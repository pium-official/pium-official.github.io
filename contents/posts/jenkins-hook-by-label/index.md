---
title: "PR ë¼ë²¨ë¡œ ì  í‚¨ìŠ¤ ë¹Œë“œìœ ë°œì„ êµ¬ë¶„í•˜ê¸°"
description: "PRì˜ ë¼ë²¨ë¡œ ì  í‚¨ìŠ¤ì˜ ë¹Œë“œ ìœ ë°œì„ êµ¬ë¶„í•´ë´…ë‹ˆë‹¤."
date: 2023-07-25
update: 2023-07-25
tags:
  - ì  í‚¨ìŠ¤
  - CD
---

> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì£¼ë…¸](https://github.com/Choi-JJunho)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

## ì„œë¡ 

í˜„ì¬ í”¼ì›€íŒ€ì˜ ì  í‚¨ìŠ¤ì—ì„œ ë¹Œë“œ íŠ¸ë¦¬ê±°ë¡œ `GitHub hook trigger for GITScm polling`ì„ ì‚¬ìš©í•˜ê³ ìˆë‹¤.

![](.index_images/b12e07f3.png)

í•´ë‹¹ ì„¤ì •ì€ Githubì—ì„œ ìœ ë°œë˜ëŠ” ëª¨ë“  WebHookì— ëŒ€í•´ ë¹Œë“œ íŠ¸ë¦¬ê±°ê°€ ë™ì‘í•˜ëŠ” ì„¤ì •ì´ë‹¤.

![](.index_images/ee2e6825.png)

ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ìœ„ì²˜ëŸ¼ triggers ì„¤ì •ì„ ë³„ë„ë¡œ ì§€ì •í•  ìˆ˜ ìˆì§€ë§Œ í˜„ì¬ í”„ë¡œì íŠ¸ êµ¬ì¡°ìƒ ë” ì„¸ë¶„í™”ëœ ì„¤ì •ì´ í•„ìš”í•œ ìƒíƒœë‹¤.

![](.index_images/7049c9ec.png)

í˜„ì¬ ë ˆí¬ì§€í† ë¦¬ í•˜ë‚˜ì— í”„ë¡ íŠ¸, ë°±ì—”ë“œ ì½”ë“œê°€ ê°™ì´ ê´€ë¦¬ë˜ê³ ìˆë‹¤.
PRì´ Merge ë˜ì—ˆì„ ë•Œ ê° íŠ¸ë™ë³„ë¡œ ì½”ë“œê°€ ë¹Œë“œ ë° ë°°í¬ë  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•´ì•¼í•œë‹¤.

## ì–´ë–»ê²Œ í• ê¹Œ?

í˜„ì¬ í•˜ë‚˜ì˜ ë ˆí¬ì§€í† ë¦¬ì—ì„œ ë‘ê°œì˜ ì½”ë“œê°€ ê´€ë¦¬ë˜ê³  ìˆê¸° ë–„ë¬¸ì— ë‹¨ìˆœíˆ develop ë¸Œëœì¹˜ì˜ ë³€ê²½ê°ì§€ë¡œëŠ” ì–´ëŠ íŠ¸ë™ì˜ ì‘ì—…ë‚´ìš©ì¸ì§€ êµ¬ë¶„í•˜ê¸°ê°€ ì–´ë µë‹¤.

![](.index_images/b1e2e898.png)

í˜„ì¬ í”¼ì›€ì€ ë¼ë²¨ì„ ì´ìš©í•˜ì—¬ íŠ¸ë™ë³„ ì‘ì—…êµ¬ë¶„ì„ í•˜ê³  ìˆë‹¤.

ì´ë¥¼ ì´ìš©í•˜ì—¬ ë¼ë²¨ë³„ë¡œ ë¹Œë“œ, ë°°í¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•´ë³´ì.

## Generic Webhook Trigger ì„¤ì¹˜

![](.index_images/cce2a05b.png)

Generic Webhook TriggerëŠ” ì  í‚¨ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ HTTP ìš”ì²­ì„ ìˆ˜ì‹ í•˜ì—¬ JSON, XML í˜•íƒœì˜ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ì—¬ íŠ¸ë¦¬ê±°ë¥¼ ì§€ì •í•  ìˆ˜ ìˆëŠ” í”ŒëŸ¬ê·¸ì¸ì´ë‹¤.

Generic Webhook Triggerë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹Œë“œ ìœ ë°œ ìƒí™©ì„ êµ¬ë¶„í•´ë³´ì.

![](.index_images/a035c7cc.png)

í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í–ˆë‹¤ë©´ íŒŒì´í”„ë¼ì¸ì˜ Build Triggers ì„¤ì •ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ íƒ­ì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

![](.index_images/43109b24.png)

í•´ë‹¹ ì„¤ì •ì„ í´ë¦­í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì„¤ëª…ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

`http://JENKINS_URL/generic-webhook-trigger/invoke` ë¡œ ì˜¤ëŠ” ìš”ì²­ì— ëŒ€í•´ íŠ¸ë¦¬ê±°ê°€ ìˆ˜í–‰ëœë‹¤ëŠ” ë§ì´ ì í˜€ì ¸ìˆë‹¤.

ìœ„ ì„¤ëª…ì— ë§ì¶° GitHubì—ì„œ WebHook ì„¤ì •ì„ ë³€ê²½í•´ì£¼ì.

> ìœ„ì—ì„œ ì„¤ëª…í•œ íƒ­ì— ëŒ€í•´ì„œëŠ” ì•„ì§ ì €ì¥í•˜ì§€ì•Šê³  ê¹ƒí—ˆë¸Œë¡œ ë„˜ì–´ì™€ì„œ ì§„í–‰í•©ë‹ˆë‹¤.
> 
> ì  í‚¨ìŠ¤ ì„¤ì •ì€ ì•„ë˜ì—ì„œ ì„¤ëª…í•˜ëŠ” `Github WebHook ì„¤ì •`ì´í›„ ì´ì–´ì„œ ì§„í–‰í•©ë‹ˆë‹¤.

## Github WebHook ì„¤ì •

![](.index_images/1862f65e.png)

`í”„ë¡œì íŠ¸ ë ˆí¬ì§€í† ë¦¬` -> `Settings` -> `Webhooks íƒ­`ì— ë“¤ì–´ì™€ì„œ ì›¹í›…ì„ ìƒˆë¡œ ë§Œë“¤ì–´ë³´ì.

![](.index_images/d3d6b68d.png)

Payload URLì„ ìœ„ì—ì„œ í™•ì¸í•œ `Generic Webhook Trigger`ì˜ ì„¤ì •ì— ë§ê²Œ ì‘ì„±í•œë‹¤.

ê·¸ë¦¬ê³  íŠ¸ë¦¬ê±°ê°€ ë™ì‘í•˜ëŠ” ì´ë²¤íŠ¸ì— ëŒ€í•´ì„œ `Send me everything` ì˜µì…˜ì„ ì²´í¬í•œë‹¤.

![](.index_images/0aae3bb6.png)

Add webhookì„ í•œ ë’¤ ë‹¤ì‹œ ë“±ë¡í•œ ì›¹ í›…ì„ í´ë¦­í•˜ì—¬ `Recent Deliveries` íƒ­ì„ í™•ì¸í•´ë³¸ë‹¤.

![](.index_images/ee606f5e.png)

ë‚´ìš©ì„ ë³´ë©´ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ Payloadì— ë‹¤ì–‘í•œ ì •ë³´ë“¤ì´ ë‹´ê²¨ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### (ì´í•´í•˜ê¸°) JSONPath ì‚´í´ë³´ê¸°

> í•´ë‹¹ ê³¼ì •ì€ ì›ë¦¬ë¥¼ ì´í•´í•˜ê¸° ìœ„í•œ ê³¼ì •ìœ¼ë¡œ ìˆ˜í–‰í•˜ì§€ ì•Šì•„ë„ ë¬´ê´€í•©ë‹ˆë‹¤.

![](.index_images/5ed35347.png)
![](.index_images/37132730.png)

PRê³¼ ì—°ê´€ëœ ìš”ì²­ì´ ë°œìƒí–ˆì„ ë•ŒëŠ” Payloadì— pull_requestì— ëŒ€í•œ ì •ë³´ê°€ ì¶”ê°€ëœë‹¤.

![](.index_images/257a3485.png)

https://jsonpath.com ì— ì ‘ì†í•˜ì—¬ í•´ë‹¹ Payloadë¥¼ ë¶™ì—¬ë„£ì–´ í™•ì¸í•´ë³¸ë‹¤.

JSONPathë¡œ í‘œí˜„í–ˆì„ ë•Œ `$.pull_request.merged`ë¥¼ í™•ì¸í•˜ë©´ í•´ë‹¹ ìš”ì²­ì´ PRì´ mergeëœ ìš”ì²­ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![](.index_images/7ca45a4f.png)

`$.pull_request.base.ref`ëŠ” í•´ë‹¹ PRì˜ base ë¸Œëœì¹˜ë¥¼ ì˜ë¯¸í•œë‹¤.

ì˜ˆë¥¼ë“¤ì–´ feature -> develop í˜•íƒœë¼ë©´ developì´ ë‚˜ì˜¨ë‹¤

![](.index_images/8aa86e4c.png)

`$.pull_request.labels..name`ëŠ” í•´ë‹¹ PRì˜ ë¼ë²¨ë“¤ì˜ ì´ë¦„ì„ ì˜ë¯¸í•œë‹¤.

## Generic Webhook Trigger ì„¤ì •

> ![](.index_images/a11771d7.png)
íŒŒì´í”„ë¼ì¸ ì„¤ì • êµ¬ì„±ì— ë“¤ì–´ì™€ì„œ ì‘ì—…ì„ ì´ì–´ë‚˜ê°‘ë‹ˆë‹¤.

![](.index_images/f13f0a48.png)

ê¸°ì¡´ì— ì„¤ì •í•´ë‘” `GitHub hook trigger for GITScm polling` ì„¤ì •ì„ í•´ì œí•œë‹¤.

![](.index_images/56956f06.png)

ê·¸ë¦¬ê³  Generic WebHook Trigger ë¥¼ í™œì„±í™”í•œë‹¤.

### Post content parameters ì„¤ì •

`Post content parameters`ì˜ ì¶”ê°€ ë²„íŠ¼ì„ ëˆŒëŸ¬ íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•œë‹¤.

![](.index_images/355d4b02.png)

`$.pull_request.merged`ë¥¼ ë“±ë¡í•˜ì—¬ Merge ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ê°€ì ¸ì˜¨ë‹¤.

![](.index_images/cbb47ad1.png)

`$.pull_request.base.ref`ë¥¼ ë“±ë¡í•˜ì—¬ base ë¸Œëœì¹˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤.

ì›í•˜ëŠ” ê°’ì€ develop ë¸Œëœì¹˜ê°€ ë  ê²ƒì´ë‹¤.

![](.index_images/3abd8938.png)

`$.pull_request.labels..name`ë¥¼ ë“±ë¡í•˜ì—¬ ë¼ë²¨ë“¤ì˜ ì´ë¦„ì„ ê°€ì ¸ì˜¨ë‹¤.

ì›í•˜ëŠ” ê°’ì€ ë“±ë¡ëœ ë¼ë²¨ë“¤ ì¤‘ì— `ë°±ì—”ë“œ`ë¥¼ í¬í•¨í•˜ëŠ” ê°’ì´ ì¡´ì¬í•˜ëŠ” ìƒí™©ì´ ë  ê²ƒì´ë‹¤.

### Optional filter ì„¤ì •

ì•„ë˜ë¡œ ë‚´ë¦¬ë‹¤ë³´ë©´ Optional filter íƒ­ì„ ë³¼ ìˆ˜ ìˆë‹¤.

![](.index_images/67d90f0b.png)

Expressionì— ë‹¤ìŒê³¼ ê°™ì€ ì •ê·œí‘œí˜„ì‹ì„ ì‘ì„±í–ˆë‹¤.

`(?=.*true)(?=.*develop)(?=.*ë°±ì—”ë“œ).*`

ë˜í•œ Text ë¶€ë¶„ì—ëŠ” ìœ„ì—ì„œ íŒŒë¼ë¯¸í„°ë¡œ ì„ ì–¸í•œ ê°’ë“¤ì„ ì‚¬ìš©í–ˆë‹¤.

ìœ„ í‘œí˜„ì‹ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ íš¨ê³¼ë¥¼ ê¸°ëŒ€í•  ìˆ˜ ìˆë‹¤.

`mergeê°€ true ì´ê³ `, `ë¸Œëœì¹˜ê°€ develop ì´ê³ `, `ë¼ë²¨ì— ë°±ì—”ë“œê°€ ì¡´ì¬`í•˜ëŠ” ì‘ì—…ì— ëŒ€í•´ íŠ¸ë¦¬ê±°ë¥¼ ìˆ˜í–‰í•˜ëŠ”ê²ƒì„ ê¸°ëŒ€í•  ìˆ˜ ìˆë‹¤.

### Token ì„¤ì •

![](.index_images/fc1d455f.png)

Token íƒ­ì— í† í° ì´ë¦„ì„ ì‘ì„±í•œë‹¤.

![](.index_images/0a7fa9b2.png)

ì´ ë•Œ GitHub WebHook ì„¤ì •ì— ë“¤ì–´ê°€ì„œ Payload URLì— token íŒŒë¼ë¯¸í„°ë¥¼ í¬í•¨í•˜ë„ë¡ ìˆ˜ì •í•œë‹¤.

![](.index_images/9ed80db7.png)

ë°”ë¡œ ì•„ë˜ íƒ­ì—ì„œ TokenCredentialì— í† í°ì— ëŒ€í•œ Secret Keyë¥¼ ì¶”ê°€í•´ì¤˜ì•¼í•œë‹¤.

ì™¸ë¶€ì—ì„œ ë¹Œë“œë¥¼ ìœ ë°œí•˜ê¸° ìœ„í•´ì„œëŠ” tokenì„ í™•ì¸í•˜ëŠ” ë°©ì‹ì´ ì¡´ì¬í•˜ëŠ”ë° ì´ ë•Œ Jenkinsì˜ Credentialì— ìˆëŠ” ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤.

> tokenì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° ê³„ì •ì •ë³´ë¥¼ ì…ë ¥í•  ìˆ˜ë„ ìˆì§€ë§Œ í•´ë‹¹ ê³¼ì •ì—ì„œëŠ” tokenì„ ë“±ë¡í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

![](.index_images/f4b07e6c.png)

ìœ„ì™€ ê°™ì€ ì •ë³´ë¡œ Secret textë¥¼ ì‘ì„±í•˜ê³  ë“±ë¡í•˜ê³  ì ìš©í•œë‹¤.

## ì‘ë‹µ í™•ì¸í•˜ê¸°

![](.index_images/ba5532ba.png)

GitHubì˜ WebHook íƒ­ì˜ Recent Deliveries íƒ­ìœ¼ë¡œ ê°€ì„œ í™•ì¸í•´ë³´ë©´ Response Bodyê°’ì— ë‹¤ìŒê³¼ ê°™ì€ ì‘ë‹µì´ ë‹´ê²¨ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```json
{
  "jobs": {
    "pium-dev": {
      "regexpFilterExpression": "(?=.*true)(?=.*develop)(?=.*ë°±ì—”ë“œ).*",
      "triggered": true,
      "resolvedVariables": {
        "BRANCH": "develop",
        "LABELS": "[\"?ï¸ \\bë¦¬íŒ©í„°ë§\",\"? ë°±ì—”ë“œ\"]",
        "LABELS_0": "?ï¸ \bë¦¬íŒ©í„°ë§",
        "LABELS_1": "? ë°±ì—”ë“œ",
        "MERGED": "true"
      },
      "regexpFilterText": "true develop [\"?ï¸ \\bë¦¬íŒ©í„°ë§\",\"? ë°±ì—”ë“œ\"]",
      "id": 248,
      "url": "queue/item/248/"
    }
  },
  "message": "Triggered jobs."
}
```

`regexpFilterText`ì— ì›í•˜ëŠ” ê°’ì´ ì˜ ë“¤ì–´ê°„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

## ê²°ë¡ 

ì  í‚¨ìŠ¤ì˜ `Generic Webhook Trigger` í”ŒëŸ¬ê·¸ì¸ì„ ì´ìš©í•˜ì—¬ Merge ì—¬ë¶€, target branch, label ê°’ì„ ë¹„êµí•˜ê³  ë¹Œë“œë¥¼ ìœ ë°œí•˜ëŠ” ì„¤ì •ì„ í–ˆë‹¤.

ê²½ìš°ì— ë”°ë¼ ì„¸ë¶€ì ì¸ ê²€ì¦ì„ ì¶”ê°€í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

### íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

Generic Webhook Trigger ì„¤ì • - Token ì„¤ì •ì—ì„œ ë§ì´ í—¤ë§¸ë‹¤.

![](.index_images/87d14459.png)

`{"jobs":null,"message":"Did not find any jobs with GenericTrigger configured! If you are using a token, you need to pass it like ...trigger/invoke?token=TOKENHERE. If you are not using a token, you need to authenticate like http://user:passsword@example.org/generic-webhook... "}`

404 ì—ëŸ¬ì™€ í•¨ê»˜ ìœ„ ë©”ì‹œì§€ê°€ ë°˜í™˜ë˜ì—ˆëŠ”ë° Jenkinsì˜ Tokenì— ëŒ€í•´ ì´í•´ë¥¼ í•˜ì§€ ëª»í•´ ìƒê¸´ ë¬¸ì œì˜€ë‹¤.

> ì™œ ë‹¤ë“¤ Tokenì´ ë­”ì§€ëŠ” ì„¤ëª…ì„ ì•ˆí•´ì£¼ëŠ”ê±°ì§€..?? ã… ã… 
> 
> `ì™¸ë¶€ì—ì„œ ë¹Œë“œë¥¼ ìœ ë°œí•˜ê¸° ìœ„í•´ì„œëŠ” tokenì„ í™•ì¸í•˜ëŠ”ë° ì´ ë•Œ Jenkinsì˜ Credentialì— ìˆëŠ” ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤.`
> 
> ì´ í•œë§ˆë””ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ í•˜ë£¨ê°€ ê±¸ë ¸ë‹¤... ğŸ˜‡

## Reference

### ì„¤ì • ê³¼ì •ì—ì„œ ì°¸ê³ í•œ ê¸€

https://bepoz-study-diary.tistory.com/385

https://velog.io/@zayson/Jenkins-CICD-4.-WebHook%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%9E%90%EB%8F%99-%EB%B0%B0%ED%8F%AC


### íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ê³¼ì •ì—ì„œ ì°¸ê³ í•œ ê¸€

https://georgik.rocks/jenkins-generic-webhook-plugin-failed-with-did-not-find-any-jobs-with-generictrigger-configured/

https://pikachu987.tistory.com/61