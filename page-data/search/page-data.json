{"componentChunkName":"component---src-pages-search-jsx","path":"/search/","result":{"data":{"allMarkdownRemark":{"nodes":[{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì£¼ë…¸'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì„œë¡  í˜„ì¬ í”¼ì›€ í”„ë¡œì íŠ¸ëŠ” properties, env íŒŒì¼ê³¼ ê°™ì€ ë¯¼ê°ì •ë³´ ë‚´ìš©ì„ ì„œë²„ ë‚´ë¶€ì— ì €ì¥, ê´€ë¦¬í•˜ê³ ìˆë‹¤. ì´ë ‡ê²Œ íŒŒì¼ì„ ê´€ë¦¬í–ˆì„ ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œì ì´ ìƒê°ë‚˜ íŒ€ì›ë“¤ê³¼ discussionì—ì„œ ì˜ê²¬ì„ ë‚˜ëˆ ë´¤ë‹¤. ìº í¼ìŠ¤ ì™¸ë¶€ì—ì„œ properties / env íŒŒì¼ ê´€ë¦¬ ë¶ˆê°€ í˜„ì¬ ì„œë²„ ì ‘ì† â€¦","fields":{"slug":"/submodule-apply/"},"frontmatter":{"date":"September 13, 2023","title":"Git submoduleì„ ì´ìš©í•œ ë¯¼ê°ì •ë³´ ê´€ë¦¬","tags":["git","submodule"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì£¼ë…¸](https://github.com/Choi-JJunho)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ì„œë¡ \n\ní˜„ì¬ í”¼ì›€ í”„ë¡œì íŠ¸ëŠ” properties, env íŒŒì¼ê³¼ ê°™ì€ ë¯¼ê°ì •ë³´ ë‚´ìš©ì„ ì„œë²„ ë‚´ë¶€ì— ì €ì¥, ê´€ë¦¬í•˜ê³ ìˆë‹¤.\n\nì´ë ‡ê²Œ íŒŒì¼ì„ ê´€ë¦¬í–ˆì„ ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œì ì´ ìƒê°ë‚˜ íŒ€ì›ë“¤ê³¼ discussionì—ì„œ ì˜ê²¬ì„ ë‚˜ëˆ ë´¤ë‹¤.\n\n- ìº í¼ìŠ¤ ì™¸ë¶€ì—ì„œ properties / env íŒŒì¼ ê´€ë¦¬ ë¶ˆê°€\n> í˜„ì¬ ì„œë²„ ì ‘ì† ê¶Œí•œì´ ìº í¼ìŠ¤ ë‚´ë¶€ IPë¡œ í•œì •ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ë°œìƒí•œ ë¬¸ì œì ì´ë‹¤.\n- properties ì„¤ì •ì„ íŒŒì•…í•˜ê¸°ê°€ ì–´ë ¤ì›€ (vim, cat ëª…ë ¹ì–´ë¡œ í™•ì¸)\n- ë¶„ì—…í™” ì§„í–‰ ê°„ properties / env íŒŒì¼ ë³€ê²½ì— ëŒ€í•œ ê³µìœ ê°€ ì–´ë ¤ì›€\n\n\n> ìì„¸í•œ ë‚´ìš©ì€ [discussion - submodule ë„ì…ì— ëŒ€í•´](https://github.com/woowacourse-teams/2023-pium/discussions/324) ì—ì„œ í™•ì¸\n\n![](.index_images/59c3159b.png)\n\níŒ€ì›ë“¤ ëª¨ë‘ ë™ì˜í•´ì¤¬ê³  ì´ì— í”„ë¡œì íŠ¸ì— submoduleì„ ë„ì…í•˜ëŠ” ê³¼ì •ì„ ì •ë¦¬í•´ë³´ë ¤ê³ í•œë‹¤.\n\n## submoduleì´ë€?\n\nì„œë¸Œëª¨ë“ˆì€ í•˜ë‚˜ì˜ ì €ì¥ì†Œ(ë ˆí¬ì§€í† ë¦¬)ì—ì„œ ë‹¤ë¥¸ ì €ì¥ì†Œë¥¼ í¬í•¨í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê¸°ëŠ¥ì´ë‹¤.\nì£¼ë¡œ ì˜ì¡´ì„± ê´€ë¦¬ í˜¹ì€ ì™¸ë¶€ í”„ë¡œì íŠ¸ í†µí•©ì— ì‚¬ìš©ë˜ê³¤ í•œë‹¤.\n\ní”¼ì›€ì—ì„œëŠ” private ë ˆí¬ì§€í† ë¦¬ë¥¼ ì´ìš©í•´ ë¯¼ê°ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ submoduleì„ ì ìš©í•´ë³´ë ¤ê³ í•œë‹¤.\n\n## ì‹œì‘í•˜ê¸°\n\nproperties, env íŒŒì¼ ë“± ë‹¤ì–‘í•œ ë¯¼ê°ì •ë³´ë¥¼ ê°€ì§€ëŠ” ì„¤ì •íŒŒì¼ë“¤ì„ private ë ˆí¬ì§€í† ë¦¬ì— ì €ì¥í•˜ê³  ì‚¬ìš©í•´ë³´ì.\n\n### Private Repository ìƒì„±\n\në¯¼ê°ì •ë³´ë¥¼ ê´€ë¦¬í•  Private Repositoryë¥¼ ìƒì„±í•œë‹¤.\n\n![](.index_images/0658737b.png)\n\n### submodule ì‹œì‘í•˜ê¸°\n\nìš°ì„  ë°±ì—”ë“œ í”„ë¡œì íŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ submoduleì„ ì ìš©ì‹œì¼œë³´ì.\n\n`git submodule add {ì„œë¸Œëª¨ë“ˆ Repo URL}`\n\n![](.index_images/effc0cc4.png)\n\ngit submodule add ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ë©´ ë£¨íŠ¸ ê²½ë¡œì— `.gitmodules` íŒŒì¼ì´ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n![](.index_images/20ec3a3b.png)\n\n![](.index_images/a8d5f20f.png)\n\níŒŒì¼ ë‚´ìš©ì„ ì‚´í´ë³´ë©´ submoduleì´ ì ìš©ëœ pathì™€ submoduleì„ ê°€ì ¸ì˜¨ urlì´ í‘œê¸°ë˜ì–´ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n![](.index_images/0185252a.png)\n\n\n> ì¶”ê°€ë¡œ branch ì •ë³´ë¥¼ ë„£ìœ¼ë©´ í•´ë‹¹ branchë¥¼ ê¸°ì¤€ìœ¼ë¡œ submodule ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.\n![](.index_images/0ebe1978.png)\n\n.gitsubmodule íŒŒì¼ê³¼ config í´ë”ê°€ ìƒì„±ë˜ê³  git stageì— ì˜¬ë¼ê°€ìˆëŠ” ìƒíƒœê°€ ë˜ì–´ìˆì„ê²ƒì´ë‹¤.\n\ncommit í›„ pushë¥¼ í•´ë³´ì.\n\n![](.index_images/2e9366b0.png)\n\në‹¤ìŒê³¼ ê°™ì´ ì„œë¸Œëª¨ë“ˆ í´ë”ê°€ ì¶”ê°€ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n![](.index_images/8a331998.png)\n\n### submodule ì ìš©í•˜ê¸°\n\në‚´ ì»´í“¨í„°ì—ì„œì˜ submodule ì ìš©ì€ ì™„ë£Œí–ˆë‹¤.\n\në‹¤ë¥¸ ê°œë°œìë“¤ì´ submoduleì„ ì–´ë–»ê²Œ ì ìš©í•´ì•¼í• ì§€ ê°€ì´ë“œë¥¼ ì œê³µí•˜ì.\n\nìš°ì„  git cloneë¶€í„° ì‹œì‘í•´ë³´ì.\n\n```shell\ngit clone {Project}\n```\n\n![](.index_images/632999b1.png)\n\nsubmoduleì„ ì´ˆê¸°í™”í•˜ê³  updateí•œë‹¤.\n**í•´ë‹¹ ì‘ì—…ì€ ì²˜ìŒ 1ë²ˆë§Œ ìˆ˜í–‰í•˜ë©´ ëœë‹¤.**\n\n```shell\ngit submodule init\n\ngit submodule update\n```\n\n![](.index_images/3a3b7bf7.png)\n\n### submodule ì—…ë°ì´íŠ¸ ë°˜ì˜í•˜ê¸°\n\ní”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ëŠ” ê³¼ì •ì—ì„œ submodule í”„ë¡œì íŠ¸ì— ìˆ˜ì •ì‚¬í•­ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤. ì´ë¥¼ ë°˜ì˜í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©´ ëœë‹¤.\n\n> ì•„ë˜ì™€ ê°™ì´ ìƒˆë¡œìš´ ì»¤ë°‹(ë³€ê²½ì‚¬í•­)ì´ ë°œìƒí–ˆë‹¤ê³  ê°€ì •í•´ë³´ì.\n![](.index_images/8fe95451.png)\n\n```shell\ngit submodule update --remote --merge\n\n## .gitmodules íŒŒì¼ì— ì •ì˜ë˜ì–´ ìˆëŠ” ë¸Œëœì¹˜ì˜ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸ (í˜¹ì€ default ë¸Œëœì¹˜)\ngit submodule update --remote\n\n## ë¡œì»¬ì—ì„œ ì‘ì—… ì¤‘ì¸ ë¶€ë¶„ê³¼ ì›ê²©ì— ì‘ì—…ëœ ë¶€ë¶„ì´ ë‹¤ë¥¸ ê²½ìš° ë¨¸ì§€ê¹Œì§€ ì§„í–‰\ngit submodule update --remote --merge\n```\n\n![](.index_images/34d677ff.png)\n\nsubmoduleì´ updateëœ ì •ë³´ì— ëŒ€í•´ ê¸°ì¡´ í”„ë¡œì íŠ¸ì—ë„ ë°˜ì˜ì„ í•´ì¤˜ì•¼í•œë‹¤.\n\n![](.index_images/dc253c7e.png)\n\n```shell\ngit add {file}\n\ngit commit -m \"build: ì„œë¸Œëª¨ë“ˆ ìµœì‹ ì‚¬í•­ ë°˜ì˜\"\n\ngit push\n```\n\n![](.index_images/0a7b7407.png)\n\n## ì •ë¦¬\n\në¯¼ê°ì •ë³´ë¥¼ ê´€ë¦¬í•˜ê¸°ìœ„í•´ submodule ë„ì…ë°©ë²•ì„ ì •ë¦¬í•´ë´¤ë‹¤.\nìƒê°ë³´ë‹¤ ê°„ë‹¨í–ˆë‹¤ ğŸ‘\n\n## Reference\n\n- https://tecoble.techcourse.co.kr/post/2021-07-31-git-submodule/\n\n### Reference\n\n- https://medium.com/dream-youngs/lets-encrypt-dns-%EB%A1%9C-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0-fdc3efda36af\n- https://techblog.woowahan.com/6217/"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'í•˜ë§ˆë“œ'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ê°œìš” í”¼ì›€ ì„œë¹„ìŠ¤ ê°œë°œì„ ì§„í–‰í•˜ë©´ì„œ, JPA Method Naming ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬  ì¿¼ë¦¬ë¥¼ ìƒì„±í•´ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ê°œë°œí•œ ê³¼ì •ì„ ê¸°ë¡í•œë‹¤. ê³¼ì • ë¨¼ì € ê°œë°œí•˜ë ¤ëŠ” ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ë‹¤ ì‹ë¬¼ì‚¬ì „ ë°ì´í„°ë² ì´ìŠ¤ì— í¬í•¨ëœ ì‹ë¬¼ì˜ ì´ë¦„ì„ ê¸°ì¤€ìœ¼ë¡œ, í•´ë‹¹ ê²€ìƒ‰ì–´ë¥¼ í¬í•¨í•œ ì‹ë¬¼ì˜ ëª©ë¡ì„ ì¡°íšŒí•´ ì˜¨ë‹¤. ë”°ë¼ì„œ ë‚˜ëŠ” ë‹¤â€¦","fields":{"slug":"/search_in_spring_data_jpa/"},"frontmatter":{"date":"August 31, 2023","title":"Spring Data Jpaë¥¼ í™œìš©í•œ ê²€ìƒ‰ ê¸°ëŠ¥ ê°œë°œí•˜ê¸°","tags":["jpa","spring","springDataJpa"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[í•˜ë§ˆë“œ](https://github.com/Choi-JJunho)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ê°œìš”\n---\ní”¼ì›€ ì„œë¹„ìŠ¤ ê°œë°œì„ ì§„í–‰í•˜ë©´ì„œ, JPA Method Naming ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ `%Like%` ì¿¼ë¦¬ë¥¼ ìƒì„±í•´ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ê°œë°œí•œ ê³¼ì •ì„ ê¸°ë¡í•œë‹¤.\n## ê³¼ì •\n---\në¨¼ì € ê°œë°œí•˜ë ¤ëŠ” ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ë‹¤\n> ì‹ë¬¼ì‚¬ì „ ë°ì´í„°ë² ì´ìŠ¤ì— í¬í•¨ëœ ì‹ë¬¼ì˜ ì´ë¦„ì„ ê¸°ì¤€ìœ¼ë¡œ, í•´ë‹¹ ê²€ìƒ‰ì–´ë¥¼ í¬í•¨í•œ ì‹ë¬¼ì˜ ëª©ë¡ì„ ì¡°íšŒí•´ ì˜¨ë‹¤.\n\në”°ë¼ì„œ ë‚˜ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ê³ ì í–ˆë‹¤.\n\n```sql\nselect *\n    from\n        dictionary_plant\n    where\n        dictionary_plant.name like '%ê²€ìƒ‰ì–´%'\n```\ní˜„ì¬ dictionary_plantì˜ entityëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n```java\n@Entity\n@Getter\n@Table(name = \"dictionary_plant\")\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\npublic class DictionaryPlant extends BaseEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = \"name\")\n    private String name;\n\n    @Column(name = \"image_url\")\n    private String imageUrl;\n\n    @Column(name = \"family_name\")\n    private String familyName;\n\n    @Column(name = \"smell\")\n    private String smell;\n\n    @Column(name = \"poison\")\n    private String poison;\n\n    @Column(name = \"manage_level\")\n    private String manageLevel;\n\n    @Column(name = \"grow_speed\")\n    private String growSpeed;\n\n    @Column(name = \"require_temp\")\n    private String requireTemp;\n\n    @Column(name = \"minimum_temp\")\n    private String minimumTemp;\n\n    @Column(name = \"require_humidity\")\n    private String requireHumidity;\n\n    @Column(name = \"posting_place\")\n    private String postingPlace;\n\n    @Column(name = \"special_manage_info\")\n    private String specialManageInfo;\n\n    @Embedded\n    private WaterCycle waterCycle;\n}\n```\n\n### Like ê¸°ëŠ¥ì„ í•˜ëŠ” Repository ë©”ì†Œë“œ ìƒì„±\n\nspring data jpaëŠ” ë©”ì†Œë“œ ë„¤ì´ë°ë§Œìœ¼ë¡œ Like ì¿¼ë¦¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.\n\nìì„¸í•œ ë‚´ìš©ì€ [ì´ê³³](https://www.baeldung.com/spring-jpa-like-queries) ì„ ì°¸ê³ í•˜ì.\n\n`Like` ì¿¼ë¦¬ëŠ” ì´ ë„¤ ê°€ì§€ì˜ ë„¤ì´ë°ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.\nì˜ˆë¥¼ ë“¤ì–´\n`SELECT * FROM movie WHERE title LIKE '%in%';` ë¼ëŠ” ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ë ¤ í•œë‹¤ë©´,\n```java\nList<Movie> findByTitleContaining(String title);\nList<Movie> findByTitleContains(String title);\nList<Movie> findByTitleIsContaining(String title);\n```\nìœ„ì™€ ê°™ì´ `Containing`, `Contains`, `IsContaining` ì´ë¼ëŠ” ë„¤ì´ë°ì„ í™œìš©í•´ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ì„¸ ê°€ì§€ ë„¤ì´ë°ì´ ë™ì‘í•œ ê²°ê³¼ëŠ” ì™„ì „íˆ ê°™ë‹¤.\n\nìŠ¤í”„ë§ì€ ë˜í•œ ë©”ì†Œë“œì—`Like` í‚¤ì›Œë“œë¥¼ í™œìš©í•´ ì ìš©í•˜ë„ë¡ í•  ìˆ˜ë„ ìˆëŠ”ë°,ì´ ê²½ìš° ì™€ì¼ë“œì¹´ë“œ í‚¤ì›Œë“œ(%)ë¥¼ ë¬¸ìì—´ì— í¬í•¨ì‹œì¼œì•¼ í•œë‹¤.\n\n```java\nList<Movie> findByTitleLike(String title);\n```\nìœ„ì™€ ê°™ì´ ë©”ì†Œë“œë¥¼ ì‘ì„±í•œë‹¤ë©´\n```java\nresults = movieRepository.findByTitleLike(\"%in%\");\n```\nìœ„ì²˜ëŸ¼ % ë¥¼ í¬í•¨í•œ ë¬¸ìì—´ì„ íŒŒë¼ë¯¸í„°ë¡œ ë„£ì–´ì•¼ í•œë‹¤ëŠ” ëœ»ì´ë‹¤.\n\në³¸ì¸ì˜ ê²½ìš° Contains í‚¤ì›Œë“œê°€ ê°€ì¥ ê°€ë…ì„±ì´ ë†’ë‹¤ê³  íŒë‹¨í•˜ì—¬ ì´ë¥¼ ì ìš©í•˜ì˜€ë‹¤.\n\n**DictionaryPlantRepository.java**\n\n```java\npublic interface DictionaryPlantRepository extends JpaRepository<DictionaryPlant, Long> {\n\n    List<DictionaryPlant> findDictionaryPlantsByNameContains(String name);\n}\n```\në”°ë¼ì„œ ìœ„ì™€ ê°™ì´ ì´ë¦„ì— íŒŒë¼ë¯¸í„°ë¡œ ë“¤ì–´ì˜¨ ê²€ìƒ‰ê°’(name)ì´ í¬í•¨ëœ ì‚¬ì „ì‹ë¬¼ì„ ê²€ìƒ‰í•˜ëŠ” ë©”ì†Œë“œë¥¼ ë§Œë“¤ì—ˆë‹¤.\n\n## ê²°ê³¼\n---\n![](.index_images/jpa1.png)\ní…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰ì‹œì¼œë³´ë‹ˆ ì›í•˜ëŠ” ê²€ìƒ‰ì–´ê°€ í¬í•¨ëœ Like ì¿¼ë¦¬ (ì—¬ê¸°ì„œëŠ” \"%ìŠ¤íˆ¬%\")ê°€ ë‚ ì•„ê°€ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤."},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì£¼ë…¸'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì„œë¡   í”¼ì›€ íŒ€ì—ì„œ ë¹„ë¡œê·¸ì¸ ì‹œ ë¡œê·¸ì¸ì„ ìˆ˜í–‰í•˜ë¼ëŠ” í˜ì´ì§€ì™€ í•¨ê»˜ ì´ë¯¸ì§€ë¥¼ ë„ìš°ë ¤ê³  í•œë‹¤.\nì´ ë•Œ ì½”ë“œë¥¼ ë°°í¬í•˜ì§€ ì•Šê³ ë„ ì´ë¯¸ì§€ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ì„ê¹Œ ìƒê°í–ˆë‹¤. í˜„ì¬ ì´ë¯¸ì§€ë¥¼ í”„ë¡ íŠ¸ì—”ë“œì˜ assetsì— ë„£ì–´ì„œ ë°°í¬ë¥¼ í•˜ê²Œ ëœë‹¤ë©´ ì´ë¯¸ì§€ê°€ ë³€ê²½í•˜ë‚˜ì—ë„ ë°°í¬ê°€ ì´ë¤„ì ¸ì•¼í•œë‹¤ëŠ” ë²ˆê±°ë¡œì›€ì´ ì¡´ì¬í•œë‹¤.â€¦","fields":{"slug":"/aws-s3-apply/"},"frontmatter":{"date":"August 30, 2023","title":"AWS S3ë¡œ ì •ì  ì´ë¯¸ì§€ ë°°í¬í•˜ê¸°","tags":["AWS","S3","CloudFront"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì£¼ë…¸](https://github.com/Choi-JJunho)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ì„œë¡ \n\n![img.png](.index_images/img.png)\n\ní”¼ì›€ íŒ€ì—ì„œ ë¹„ë¡œê·¸ì¸ ì‹œ ë¡œê·¸ì¸ì„ ìˆ˜í–‰í•˜ë¼ëŠ” í˜ì´ì§€ì™€ í•¨ê»˜ ì´ë¯¸ì§€ë¥¼ ë„ìš°ë ¤ê³  í•œë‹¤.\nì´ ë•Œ ì½”ë“œë¥¼ ë°°í¬í•˜ì§€ ì•Šê³ ë„ ì´ë¯¸ì§€ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ì„ê¹Œ ìƒê°í–ˆë‹¤.\n\ní˜„ì¬ ì´ë¯¸ì§€ë¥¼ í”„ë¡ íŠ¸ì—”ë“œì˜ assetsì— ë„£ì–´ì„œ ë°°í¬ë¥¼ í•˜ê²Œ ëœë‹¤ë©´ ì´ë¯¸ì§€ê°€ ë³€ê²½í•˜ë‚˜ì—ë„ ë°°í¬ê°€ ì´ë¤„ì ¸ì•¼í•œë‹¤ëŠ” ë²ˆê±°ë¡œì›€ì´ ì¡´ì¬í•œë‹¤.\n\nCDNì„ ì´ìš©í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ë°°í¬í•˜ê³  í•´ë‹¹ íŒŒì¼ì„ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤ë©´ ì¬ë°°í¬í•˜ëŠ” ë²ˆê±°ë¡œì›€ì€ ì¤„ì–´ë“¤ ê²ƒì´ë‹¤.\n\në‹¤ì‹œë§í•´ `https://ì´ë¯¸ì§€ê²½ë¡œ.ì´ë¯¸ì§€ì´ë¦„.png`ë¼ëŠ” ê²½ë¡œëŠ” ë™ì¼í•˜ë‚˜ í•´ë‹¹ ì„œë²„ì— ìˆëŠ” ìì›ì„ ë³€ê²½í•˜ë©´ ì´ë¯¸ì§€ê°€ ë³€ê²½ë  ìˆ˜ ìˆë‹¤.\n\nì´ëŸ¬í•œ íš¨ê³¼ë¥¼ ë‚´ê¸° ìœ„í•´ AWSì˜ S3ë¥¼ ì´ìš©í•´ë³¼ ìˆ˜ ìˆë‹¤.\n\n## AWS S3ë€?\n\nì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ê³ ìˆëŠ” ê°ì²´ ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤(Simple Storage Service)ë‹¤.\nì‰½ê²Œ ë§í•´ í´ë¼ìš°ë“œ í™˜ê²½ì— ì €ì¥ì†Œë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì˜ë¯¸í•œë‹¤.\n\n![img_1.png](.index_images/img_1.png)\n\n## ì‹œì‘í•˜ê¸°\n\n> [ì‚¬ë¡€ë³„ë¡œ ì•Œì•„ë³¸ ì•ˆì „í•œ S3 ì‚¬ìš© ê°€ì´ë“œ](https://techblog.woowahan.com/6217/)ë¥¼ ì°¸ê³ í•˜ì—¬ ì‘ì„±ëœ ê¸€ì…ë‹ˆë‹¤.\nê°œì¸ AWS ê³„ì •ìœ¼ë¡œ ì‹¤ìŠµì„ ì§„í–‰í•˜ëŠ”ì  ì°¸ê³  ë¶€íƒë“œë¦½ë‹ˆë‹¤~\n\nì§€ê¸ˆë¶€í„° AWS S3ë¥¼ ì´ìš©í•´ ì •ì  ì›¹ í˜¸ìŠ¤íŒ…ì„ ìˆ˜í–‰í•´ë³´ì.\n\n### ì›¹ í˜¸ìŠ¤íŒ… ì¤€ë¹„í•˜ê¸°\n\n![img_2.png](.index_images/img_2.png)\n\në²„í‚· ìƒì„±ë¶€í„° ì‹œì‘í•´ë³´ì.\n\n#### ë²„í‚· ìƒì„±\n\n![img_3.png](.index_images/img_3.png)\n\nìš°ì„  S3 ì„œë¹„ìŠ¤ì— ë“¤ì–´ê°€ì„œ ë²„í‚·ì„ ìƒì„±í•œë‹¤.\n\n![img_4.png](.index_images/img_4.png)\n\n`ACL ë¹„í™œì„±í™”ë¨`, `ëª¨ë“  í¼ë¸”ë¦­ ì—‘ì„¸ìŠ¤ ì°¨ë‹¨` ì˜µì…˜ì„ ì„ íƒí•´ì¤€ë‹¤.\n\n![img_5.png](.index_images/img_5.png)\n\nê¸°ë³¸ ì•”í˜¸í™”ëŠ” `Amazon S3 ê´€ë¦¬í˜• í‚¤(SSE-S3)ë¥¼ ì‚¬ìš©í•œ ì„œë²„ ì¸¡ ì•”í˜¸í™”`ë¥¼ ì„ íƒí•˜ê³  ë²„í‚·ì„ ìƒì„±í•œë‹¤.\n\n![img_6.png](.index_images/img_6.png)\n\nìœ„ì™€ê°™ì´ ë²„í‚·ì´ ìƒì„±ëœ ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n![img_7.png](.index_images/img_7.png)\n\në²„í‚· íƒ­ì— ë“¤ì–´ê°€ì„œ ì´ë¯¸ì§€ë¥¼ í•˜ë‚˜ ì—…ë¡œë“œí•˜ì.\n\n![img_8.png](.index_images/img_8.png)\n\nfavicon.png íŒŒì¼ì„ ì—…ë¡œë“œí–ˆë‹¤.\n\n![img_9.png](.index_images/img_9.png)\n\nì´ ìƒíƒœë¡œ ê°ì²´ URLì— ì ‘ê·¼í•´ë³´ë©´\n\n![img_10.png](.index_images/img_10.png)\n\në‹¤ìŒê³¼ ê°™ì´ Access Deniedê°€ ëœ¬ë‹¤.\në²„í‚·ì„ ìƒì„±í•  ë•Œ Publicìœ¼ë¡œ ìƒì„±í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ë‹¤.\n\n### ë¹„ê³µê°œì¸ ë²„í‚·ì— ì ‘ê·¼í•˜ê¸°\n\në²„í‚·ì„ Privateìœ¼ë¡œ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— ì‚¬ìš©ìê°€ ìì›ì— ì§ì ‘ì ìœ¼ë¡œ ì ‘ê·¼í•˜ì§€ ëª»í•œë‹¤.\n\n![img_32.png](.index_images/img_32.png)\n\n> ì¶œì²˜: https://techblog.woowahan.com/6217/\n\nì‚¬ìš©ìê°€ CloudFrontë¥¼ ìš°íšŒí•˜ì—¬ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•´ë³´ì.\n\n#### CloudFront ì„¤ì •\n\n![img_1.png](.index_images/img_34.png)\n\nCloudFront ë°°í¬ ìƒì„±ì—ì„œ ì›ë³¸ ë„ë©”ì¸ì„ ìœ„ì—ì„œ ìƒì„±í•œ S3ë¡œ ì„ íƒí•œë‹¤.\n\n![img_2.png](.index_images/img_35.png)\n\nì´í›„ ì›ë³¸ì•¡ì„¸ìŠ¤ ì œì–´ ì„¤ì •ì„ ì„ íƒí•˜ê³  `ì œì–´ ì„¤ì • ìƒì„±` íƒ­ì„ ì„ íƒí•œë‹¤.\n\n![img_3.png](.index_images/img_36.png)\n\nìœ„ì™€ê°™ì´ ì œì–´ ì„¤ì •ì„ êµ¬ì„±í•œë‹¤.\n\n![img_4.png](.index_images/img_37.png)\n\nê¸°ë³¸ ìºì‹œ ë™ì‘ì€ `Redirect HTTP to HTTPS` ë¥¼ ì„ íƒí•˜ê³  ìƒˆ ë°°í¬ë¥¼ ìƒì„±í•œë‹¤.\n(WAF ì„¤ì •ì€ ì ìš©í•˜ì§€ ì•Šì•˜ë‹¤)\n\n#### ë²„í‚· ì •ì±… ì—…ë°ì´íŠ¸\n\n![img_5.png](.index_images/img_38.png)\n\nCloudFrontë¥¼ ìƒì„±í•˜ë©´ ìœ„ì²˜ëŸ¼ S3 ë²„í‚· ì •ì±…ì„ ì—…ë°ì´íŠ¸í•˜ë„ë¡ ë‚˜ì˜¨ë‹¤.\n`ì •ì±… ë³µì‚¬` ë¥¼ íˆ¬ë¥´ê³  `ì •ì±…ì„ ì—…ë°ì´íŠ¸í•˜ë ¤ë©´ S3 ë²„í‚· ê¶Œí•œìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.` ë¥¼ ëˆ„ë¥¸ë‹¤.\n\n![img_6.png](.index_images/img_39.png)\n\në²„í‚· - í€€í•© íƒ­ì—ì„œ ë²„í‚· ì •ì±… í¸ì§‘ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤.\n\n![img_7.png](.index_images/img_40.png)\n\në³µì‚¬í•œ ë‚´ìš©ì„ ë²„í‚· ì •ì±…ì— ë¶™ì—¬ë„£ê³  ë³€ê²½ì‚¬í•­ì„ ì €ì¥í•œë‹¤.\n\n#### ì ‘ì†í•˜ê¸°\n\n![img_8.png](.index_images/img_41.png)\n\nì´ì œ CloudFront íƒ­ì— ë‹¤ì‹œ ë“¤ì–´ê°€ì„œ ë°°í¬ ë„ë©”ì¸ ì´ë¦„ì„ í™•ì¸í•œë‹¤.\n\n`ë°°í¬ë„ë©”ì¸/{S3ê²½ë¡œíŒŒì¼ëª…}`ë¡œ í˜¸ì¶œí–ˆì„ ë•Œ íŒŒì¼ì´ ì •ìƒì ìœ¼ë¡œ í˜¸ì¶œë˜ëŠ”ì§€ í™•ì¸í•´ë³¸ë‹¤.\n\n![img_9.png](.index_images/img_42.png)\n\n#### ëŒ€ì²´ ë„ë©”ì¸ ì„¤ì •í•˜ê¸°\n\n> í•´ë‹¹ ê³¼ì •ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ë„ë©”ì¸ì„ êµ¬ì…ì´ ì„ í–‰ë˜ì–´ì•¼í•©ë‹ˆë‹¤.\në„ë©”ì¸ êµ¬ì…ì€ [í”¼ì›€ì˜ ë°°í¬ê³¼ì •](https://pium-official.github.io/pium-deploy-step/)ì„ ì°¸ê³ í•´ì£¼ì„¸ìš”\n\në§¤ë²ˆ `ë°°í¬ë„ë©”ì¸/{S3ê²½ë¡œíŒŒì¼ëª…}`ìœ¼ë¡œ ì ‘ì†í•˜ê¸°ì—ëŠ” ë„ë©”ì¸ì˜ ê¸¸ì´ë„ ë„ˆë¬´ ê¸¸ê³  ë³µì¡í•˜ë‹¤.\n\n`image.pium.life/{S3ê²½ë¡œíŒŒì¼ëª…}`ë¡œ ì ‘ì†í•˜ë„ë¡ êµ¬ì„±í•´ë³´ì.\n\n#### ì¸ì¦ì„œ ë°œê¸‰\n\nìš°ì„  ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì•„ì•¼í•œë‹¤.\n\níŠ¹ì • ì›¹ì„œë²„ì— ì¸ì¦ì„œë¥¼ ë¶™ì´ëŠ”ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ image.pium.lifeì— ëŒ€í•´ SSL ì¸ì¦ì„œë§Œ ë°œê¸‰ë°›ì•„ë³´ì.\n\n- **certbotìœ¼ë¡œ SSL ì¸ì¦ì„œ ë°œê¸‰**\n\n> certbotì— ëŒ€í•œ ë‚´ìš©ì€ [í”¼ì›€ íŒ€ë¸”ë¡œê·¸ - ë‚´ ì„œë²„ì— HTTPS ì„¤ì •í•˜ê¸°](https://pium-official.github.io/apply-https/)ë¥¼ ì°¸ê³ \n\në§¥ë¶ì—ì„œ image.pium.lifeì— ëŒ€í•œ SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì•„ë³´ì.\ncertbotì„ ë°›ì•„ì¤€ë‹¤.\n\n```shell\n# certbot ì„¤ì¹˜\nbrew install certbot\n\n# dns challenge ë°©ì‹ì˜ ì¸ì¦ì„ ìˆ˜í–‰í•œë‹¤\nsudo certbot certonly --manual --preferred-challenges dns -d image.pium.life\n```\n\n![img_10.png](.index_images/img_43.png)\n\nì„œë¹„ìŠ¤ì— ëŒ€í•œ ë™ì˜ë¥¼ ì§„í–‰í•œë‹¤.\n\n![img_11.png](.index_images/img_11.png)\n\nì—¬ê¸°ì„œ í•´ë‹¹ ë„ë©”ì¸ì˜ ì†Œìœ ìì¸ì§€ ê²€ì¦í•˜ê¸°ìœ„í•´ DNS ì„œë¹„ìŠ¤ì— ìœ„ ê°’ì„ ë“±ë¡í•´ì•¼í•œë‹¤.\n**(ì•„ì§ ì—”í„°ë¥¼ ëˆ„ë¥´ë©´ ì•ˆëœë‹¤!!!)**\n\n![img_12.png](.index_images/img_12.png)\n\nìœ„ì²˜ëŸ¼ DNS ê´€ë¦¬ íˆ´ì—ì„œ TXT ë ˆì½”ë“œ ì •ë³´ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.\nì´í›„ í•´ë‹¹ ë„ë©”ì¸ì´ ì •ìƒì ìœ¼ë¡œ ë°°í¬ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ `Admin Toolbox: https://...`ì— ì“°ì—¬ìˆëŠ” ë§í¬ë¡œ ì ‘ì†í•œë‹¤.\n\n> https://toolbox.googleapps.com/apps/dig/#TXT/_acme-challenge.image.pium.life.\n\n![img_13.png](.index_images/img_13.png)\n\në„ë©”ì¸ì´ ì•„ì§ ë°°í¬ë˜ì§€ ì•Šì•˜ë‹¤ë©´ `Record not found!`ê°€ ëœ¬ë‹¤.\n\n![img_14.png](.index_images/img_14.png)\n\nì ì‹œ ê¸°ë‹¤ë¦¬ë©´ ì´ë ‡ê²Œ ë„ë©”ì¸ ì¡°íšŒê°€ ëœë‹¤.\n\n![img_15.png](.index_images/img_15.png)\n\në°°í¬ í™•ì¸ í›„ ë‹¤ì‹œ ì´ í™”ë©´ìœ¼ë¡œ ë„˜ì–´ì™€ì„œ ì—”í„°ë¥¼ ëˆ„ë¥´ë©´ ëœë‹¤.\n\n![img_16.png](.index_images/img_16.png)\n\n![img_18.png](.index_images/img_18.png)\n\n`/etc/letsencrypt/live/image.pium.life` ê²½ë¡œì— SSL ì¸ì¦ì„œê°€ ë°œê¸‰ë˜ì—ˆë‹¤.\n\n> ì¸ì¦ì„œ ë°œê¸‰ì´ ì™„ë£Œë˜ì—ˆìœ¼ë¯€ë¡œ DNS ì„œë¹„ìŠ¤ì— ë“±ë¡í–ˆë˜ TXT ë ˆì½”ë“œëŠ” ì‚­ì œí•´ë„ëœë‹¤.\n\n#### AWSì— ì¸ì¦ì„œ ë„£ê¸°\n\nì´ì œ ì´ ì¸ì¦ì„œë¥¼ AWSë¡œ ê°€ì ¸ê°€ë³´ì.\n\n![img_19.png](.index_images/img_19.png)\n\nAWSì˜ Certificate Manager ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•œë‹¤.\n\n![img_20.png](.index_images/img_20.png)\n\n> CloudFrontì˜ SSL ì¸ì¦ì„œ ì ìš© ê³¼ì •ì—ì„œ ë¯¸êµ­ ë™ë¶€(ë²„ì§€ë‹ˆì•„ ë¶ë¶€) ë¦¬ì „ì˜ ì¸ì¦ì„œë¥¼ ìš”êµ¬í•˜ê¸° ë•Œë¬¸ì— ë¦¬ì „ì„ ë²„ì§€ë‹ˆì•„-ë¶ë¶€ë¡œ ì„¤ì •í•´ë‘ê³  ì‘ì—…ì„ ì§„í–‰í•´ì•¼í•œë‹¤!\n>\n> ![img_21.png](.index_images/img_21.png)\n>\n> ![img_22.png](.index_images/img_22.png)\n\n\nì¸ì¦ì„œ ê°€ì ¸ì˜¤ê¸°ë¥¼ ìˆ˜í–‰í•œë‹¤.\n\n![img_23.png](.index_images/img_23.png)\n\nì¸ì¦ì„œ ì„¸ë¶€ ì •ë³´ë¥¼ ì…ë ¥í•˜ëŠ” ì¹¸ì´ ë‚˜ì˜¤ëŠ”ë° ê°ê° í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ ì ì–´ì£¼ë©´ ëœë‹¤.\n\n![img_24.png](.index_images/img_24.png)\n\n```\nsudo cat cert.pem\nsudo cat privkey.pem\nsudo cat fullchain.pem\n```\n\n> ![img_25.png](.index_images/img_25.png)\n>\n> `-----BEGIN CERTIFICATE-----`ë¶€í„°\n> `-----END CERTIFICATE-----`ê¹Œì§€\n> ë‹¤ ë³µì‚¬í•´ì„œ ë„£ì–´ì¤˜ì•¼í•œë‹¤.\n\n![img_26.png](.index_images/img_26.png)\n\në“±ë¡ì„ ëˆ„ë¥´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì¸ì¦ì„œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.\n\n![img_27.png](.index_images/img_27.png)\n\n#### CloudFront ë³„ì¹­ ì„¤ì •\n\n![img_28.png](.index_images/img_28.png)\n\nDNS í˜¸ìŠ¤íŒ… ì‚¬ì´íŠ¸ì— ê°€ì„œ CNAME ë ˆì½”ë“œë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.\ní˜¸ìŠ¤íŠ¸ëŠ” imageì´ê³  ê°’ì€ CloudFrontì˜ ë°°í¬ ì£¼ì†Œë¥¼ ë„£ì–´ì¤€ë‹¤.\n\n![img_29.png](.index_images/img_29.png)\n\nCloudFront íƒ­ìœ¼ë¡œ ì™€ì„œ í¸ì§‘íƒ­ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤.\n\n![img_30.png](.index_images/img_30.png)\n\nëŒ€ì²´ ë„ë©”ì¸ì„ ì‘ì„±í•˜ê³  ì¶”ê°€í•œ SSL ì¸ì¦ì„œë¥¼ ì„ íƒí•œ ë’¤ ì €ì¥í•œë‹¤.\n\n![img_31.png](.index_images/img_31.png)\n\nì´ì œ image.pium.lifeë¡œ cloudfrontë¡œ ì ‘ì†í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.\n\n## í›„ê¸°\n\në‹¨ìˆœí•œ ë‚´ìš©ë„ ë§ì•˜ì§€ë§Œ ì¤‘ê°„ì— ì¸ì¦ì„œ ë°œê¸‰ ë“±ê³¼ ê°™ì€ ì„¸ì„¸í•œ ë¶€ë¶„ì—ì„œ í—¤ë§¬ ìˆ˜ ìˆë‹¤ê³  ìƒê°í•˜ì—¬ ìµœëŒ€í•œ ìì„¸í•˜ê²Œ ê¸°ë¡í–ˆë‹¤.\n\n## Reference\n\n- https://medium.com/dream-youngs/lets-encrypt-dns-%EB%A1%9C-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0-fdc3efda36af\n- https://techblog.woowahan.com/6217/"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì¡°ì´'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.   ì‹œì‘í•˜ê¸° ì „ì— í”¼ì›€ í”„ë¡œì íŠ¸ì—ì„œëŠ” OAuth 2.0ì„ ì´ìš©í•´ ë¡œê·¸ì¸ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. ì¦‰, ë¡œê·¸ì¸ ê³¼ì •ì´ ì™¸ë¶€ APIì— ì˜ì¡´ì ì´ë¼ê³  ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì´ì£ . ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•  ë•Œ ë¬¸ì œê°€ ë˜ëŠ” ë¶€ë¶„ì€ ì•„ë‹ˆì§€ë§Œ, ë¡œê·¸ì¸ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ë•ŒëŠ” ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ ì™¸ë¶€ APIì—â€¦","fields":{"slug":"/OAuth-test-backend/"},"frontmatter":{"date":"August 29, 2023","title":"ì™¸ë¶€ API ë¥¼ ì˜ì¡´í•˜ëŠ” OAuth ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸í•˜ê¸°","tags":["OAuth2.0","ë¡œê·¸ì¸","í…ŒìŠ¤íŠ¸"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì¡°ì´](https://github.com/yeonkkk)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.  \n\n\n\n## ì‹œì‘í•˜ê¸° ì „ì—\n---\ní”¼ì›€ í”„ë¡œì íŠ¸ì—ì„œëŠ” OAuth 2.0ì„ ì´ìš©í•´ ë¡œê·¸ì¸ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.   \nì¦‰, ë¡œê·¸ì¸ ê³¼ì •ì´ ì™¸ë¶€ APIì— ì˜ì¡´ì ì´ë¼ê³  ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì´ì£ .\n\nì„œë¹„ìŠ¤ë¥¼ ì œê³µí•  ë•Œ ë¬¸ì œê°€ ë˜ëŠ” ë¶€ë¶„ì€ ì•„ë‹ˆì§€ë§Œ, ë¡œê·¸ì¸ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ë•ŒëŠ” ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ ì™¸ë¶€ APIì— ì˜ì¡´í•˜ì§€ ì•Šê³  í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆì„ê¹Œìš”?\ní”¼ì›€ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ì„œ ê·¸ ë°©ë²•ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\nê¸€ì„ ì½ê¸° ì „ì— ëª‡ ê°€ì§€ ì‚¬í•­ë“¤ì„ ì²´í¬í•´ ë´…ì‹œë‹¤.\n\n<br><br>\n\n### 1.  í…ŒìŠ¤íŠ¸\n> ì´ ê¸€ì€ í…ŒìŠ¤íŠ¸ ë°©ë²•ì— ëŒ€í•´ì„œ ë‹¤ë£¨ì§€ë§Œ, íŠ¹ì • í…ŒìŠ¤íŠ¸ ì¢…ë¥˜ë“¤ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.   \n> íŠ¹ì • í…ŒìŠ¤íŠ¸ì— ëŒ€í•œ ì§€ì‹ì´ í•„ìš”í•˜ì‹œê±°ë‚˜ ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ ì•„ë˜ ìë£Œë“¤ì„ ì°¸ê³ í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.\n\n- [ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ vs í†µí•© í…ŒìŠ¤íŠ¸ vs ì¸ìˆ˜ í…ŒìŠ¤íŠ¸](https://tecoble.techcourse.co.kr/post/2021-05-25-unit-test-vs-integration-test-vs-acceptance-test/)\n- [Spring Boot ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸](https://tecoble.techcourse.co.kr/post/2021-05-18-slice-test/)\n\n<br><br>\n\n### 2. ê°œë°œ í™˜ê²½\n> ì´ ê¸€ì€ ì•„ë˜ì™€ ê°™ì€ í™˜ê²½ì—ì„œ ì§„í–‰í•œ ë‚´ìš©ì„ ë‹¤ë£¹ë‹ˆë‹¤.\n\n- spring boot 3.1.1\n\n- java 17\n\n\n<br><br><br><br>\n\n## í…ŒìŠ¤íŠ¸í•  ì½”ë“œ íŒŒì•…í•˜ê¸°\n---\n> ì´ ê¸€ì€ OAuth 2.0ì„ ì´ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ ë°©ë²•ì´ ì•„ë‹Œ í…ŒìŠ¤íŠ¸ ë°©ë²•ì— ëŒ€í•´ì„œë§Œ ì„¤ëª…í•©ë‹ˆë‹¤.    \n> ê·¸ë ‡ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ì½”ë“œì™€ ë°€ì ‘í•œ ê´€ë ¨ì´ ìˆëŠ” ì½”ë“œë§Œ ê°€ë³ê²Œ í™•ì¸í•˜ê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.  \n> ë§Œì•½ ìì„¸í•œ êµ¬í˜„ ê³¼ì •ì— ëŒ€í•´ ì•Œê³  ì‹¶ë‹¤ë©´ ì•„ë˜ ìë£Œë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”!\n\n- [í”¼ì›€ë¸”ë¡œê·¸ - OAuth 2.0 ë¡œê·¸ì¸ êµ¬í˜„í•˜ê¸° (ì¹´ì¹´ì˜¤)](https://blog.pium.life/OAuth2.0-backend/)\n\n- [í”¼ì›€ ê¹ƒí—ˆë¸Œ ë ˆí¬ì§€í† ë¦¬](https://github.com/woowacourse-teams/2023-pium)\n\n<br><br><br><br>\n\n\n\n![í”¼ì›€-ë¡œê·¸ì¸-í…ŒìŠ¤íŠ¸-ì´ë¯¸ì§€.png](.index_images/img.png)\n\nê·¸ë¦¼ì„ í†µí•´ ì½”ë“œì˜ íë¦„ì„ ë¨¼ì € ìƒê°í•´ë³´ê² ìŠµë‹ˆë‹¤.\n\në¡œê·¸ì¸ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ `AuthController`ê°€ ìš”ì²­ì„ í™•ì¸í•œ í›„ `AuthService`ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.\n\n`AuthService`ì—ì„œëŠ” `OAuthProvider`ë¥¼ í˜¸ì¶œí•˜ì—¬ `Kakao server`ë¡œ í•„ìš”í•œ ì •ë³´ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.\n\n`OAuthProvider`ëŠ” `Kakao server`ì— ì•¡ì„¸ìŠ¤ í† í° ë°œê¸‰ì„ ìš”ì²­í•˜ê³  ì‚¬ìš©ì ì •ë³´ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.\n\níë¦„ì„ íŒŒì•…í–ˆë‹¤ë©´ ì½”ë“œë¥¼ ê°„ë‹¨íˆ í™•ì¸í•œ í›„ í…ŒìŠ¤íŠ¸ ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤!  \n<br><br>\n\n### AuthController\n\n\n```java\n@Validated\n@RestController\n@RequiredArgsConstructor\npublic class AuthController {\n\n\t// ...\n    \n    private final AuthService authService;\n\n    @PostMapping(\"/login\")\n    public ResponseEntity<Void> login(\n            @RequestParam(name = \"code\") @NotBlank String code,\n            HttpServletRequest request) {\n        Member loginMember = authService.login(code);\n\n\t\t// ...\n    }\n\t// ...\n}\n```\n\n<br><br>\n\n### AuthService\n\n```java\n@Service\n@Transactional(readOnly = true)\n@RequiredArgsConstructor\npublic class AuthService {\n\n    private final MemberRepository memberRepository;\n    private final OAuthProvider provider;\n\n    @Transactional\n    public Member login(String authorizationCode) {\n        KaKaoAccessTokenResponse accessTokenResponse = provider.getAccessToken(authorizationCode);\n        String accessToken = accessTokenResponse.getAccessToken();\n\n        KakaoMemberResponse kakaoMemberResponse = provider.getMemberInfo(accessToken);\n        Long kakaoId = kakaoMemberResponse.getId();\n\t\t\n        // ...\n    }\n}\n\n```\n\n<br><br>\n\n### OAuthProvider\n\n```java\n@Component\n@RequiredArgsConstructor\npublic class OAuthProvider {\n\n    public static final String AUTHORIZATION_HEADER = \"Authorization\";\n    public static final String GRANT_TYPE = \"authorization_code\";\n    public static final String TOKEN_TYPE = \"Bearer \";\n\n    @Value(\"${auth.kakao.token-request-uri}\")\n    private String tokenRequestUri;\n\n    @Value(\"${auth.kakao.member-info-request-uri}\")\n    private String memberInfoRequestUri;\n\n    @Value(\"${auth.kakao.client-id}\")\n    private String clientId;\n\n    @Value(\"${auth.kakao.admin-id}\")\n    private String adminId;\n\n    @Value(\"${auth.kakao.redirect-uri}\")\n    private String redirectUri;\n\n    @Value(\"${auth.kakao.unlink-uri}\")\n    private String unLinkUri;\n\n    private final RestTemplate restTemplate;\n\n    public KakaoMemberResponse getMemberInfo(String accessToken) {\n        try {\n            HttpHeaders httpHeaders = new HttpHeaders();\n            httpHeaders.set(AUTHORIZATION_HEADER, TOKEN_TYPE + accessToken);\n            httpHeaders.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\n\n            HttpEntity<Object> request = new HttpEntity<>(httpHeaders);\n\n            return restTemplate.postForEntity(memberInfoRequestUri, request, KakaoMemberResponse.class)\n                    .getBody();\n        } catch (HttpClientErrorException e) {\n            throw new KaKaoMemberInfoRequestException(e.getMessage());\n        } catch (HttpServerErrorException e) {\n            throw new KakaoServerException(e.getMessage());\n        }\n    }\n\n    public KaKaoAccessTokenResponse getAccessToken(String authorizationCode) {\n        try {\n            HttpHeaders httpHeaders = new HttpHeaders();\n            httpHeaders.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\n\n            MultiValueMap<String, String> body = new LinkedMultiValueMap<>();\n            body.add(\"grant_type\", GRANT_TYPE);\n            body.add(\"client_id\", clientId);\n            body.add(\"redirect_uri\", redirectUri);\n            body.add(\"code\", authorizationCode);\n\n            HttpEntity<MultiValueMap<String, String>> request = new HttpEntity<>(body, httpHeaders);\n\n            return restTemplate.postForEntity(\n                    tokenRequestUri, request, KaKaoAccessTokenResponse.class).getBody();\n        } catch (HttpClientErrorException e) {\n            throw new KakaoTokenRequestException(e.getMessage());\n        } catch (HttpServerErrorException e) {\n            throw new KakaoServerException(e.getMessage());\n        }\n    }\n\t// ...\n}\n```\n\n<br><br><br><br>\n\n\n## Mockito, MockMvc ì´ìš©í•˜ê¸°\n---\n> ë¨¼ì € `Mockito`, `MockMvc` ë“±ì„ í†µí•œ mockingì„ ìƒê°í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n`AuthController`ì— ëŒ€í•œ ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸ì— ì ìš©í•œ ì½”ë“œë¥¼ í†µí•´ ê·¸ ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\n\n`AuthService`ë¥¼ `MockBean`ìœ¼ë¡œ ì£¼ì…í•œ í›„ ì¹´ì¹´ì˜¤ ì„œë²„ì— ìš”ì²­ì„ í•˜ëŠ” ë¡œì§ì´ ë‹´ê¸´ serviceë¥¼ mocking í•˜ê³ , ì˜ˆìƒí•œ ëŒ€ë¡œ ì‘ì—…ì´ ìˆ˜í–‰ë˜ì—ˆëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\n\nservice ë ˆì´ì–´ì—ì„œë„ `OAuthProvider`ë¥¼ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ mocking í•˜ì—¬ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n### AuthControllerTest\n\n```java\n@WebMvcTest(controllers = AuthController.class)\nclass AuthControllerTest extends UITest {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private AuthService authService;\n\n    @Nested\n    class ë¡œê·¸ì¸_ {\n\n        @Test\n        void ì •ìƒ_ìš”ì²­_ì‹œ_200_ë°˜í™˜() throws Exception {\n\n           given(authService.login(anyString())).willReturn(Member.builder()\n                    .kakaoId(12345L)\n                    .build()); \n\n            mockMvc.perform(post(\"/login\")\n                            .queryParam(\"code\", \"authorization code\")\n                            .contentType(MediaType.APPLICATION_JSON_VALUE))\n                    .andExpect(status().isOk())\n                    .andDo(print());\n        }\n\n\t\t// ...\n    }\n    // ...\n}\n\n```\n\n<br><br>\n\n\n### í•œê³„ì \nì´ ë°©ë²•ì€ íŠ¹ì • ë ˆì´ì–´ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê¸°ì— ì í•©í•˜ê³  íš¨ìœ¨ì ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ ì‹¤ì œ ìš´ì˜ í™˜ê²½ê³¼ ê°™ì€ ì¡°ê±´ì—ì„œ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í…ŒìŠ¤íŠ¸í•´ì•¼í•˜ëŠ” ì¸ìˆ˜í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ëŠ” ê²½ìš° ì í•©í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n<br><br><br><br>\n\n\n## MockRestServiceServer ì´ìš©í•˜ê¸°\n---\n> ë‘ë²ˆì§¸ ë°©ë²•ìœ¼ë¡œëŠ” Http í†µì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” `RestTemplate`ë¥¼ mocking í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.  \n> `RestTemplate`ì„ mockingí•˜ê¸° ìœ„í•´ `MockRestServiceServer`ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  \n> [MockRestServiceServer](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/client/MockRestServiceServer.html)ëŠ” `RestTemplate`ë¥¼ í…ŒìŠ¤íŠ¸ í•˜ê¸° ìœ„í•œ Springì—ì„œ ì œê³µí•˜ëŠ” í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.\n\n\n### OAuthProviderTest\n\n`OAuthProvider` í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ê·¸ ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.  \nì „ì²´ ì½”ë“œë¥¼ í™•ì¸ í›„ ì„¸ë¶€ì ì¸ ë‚´ìš©ì„ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.\n\n```java\n@SpringBootTest\nclass OAuthProviderTest {\n\n    @Value(\"${auth.kakao.token-request-uri}\")\n    private String TOKEN_REQUEST_URI;\n\n    @Value(\"${auth.kakao.member-info-request-uri}\")\n    private String MEMBER_INFO_REQUEST_URI;\n\n    @Autowired\n    private OAuthProvider supporter;\n\n    @Autowired\n    private RestTemplate restTemplate;\n\n    private MockRestServiceServer mockServer;\n\n    @BeforeEach\n    void setUp() {\n        mockServer = MockRestServiceServer.createServer(restTemplate);\n    }\n\n    @Test\n    void ì‚¬ìš©ì_ì •ë³´_ì¡°íšŒ() {\n        String accessToken = \"access token\";\n        Long kakaoId = 12345L;\n\n        String response = String.format(\"{\\\"id\\\":\\\"%d\\\"}\", kakaoId);\n\n        mockServer.expect(requestTo(MEMBER_INFO_REQUEST_URI))\n                .andExpect(content().contentType(\"application/x-www-form-urlencoded\"))\n                .andExpect(method(HttpMethod.POST))\n                .andExpect(header(AUTHORIZATION_HEADER, TOKEN_TYPE + accessToken))\n                .andRespond(withSuccess(response, MediaType.APPLICATION_JSON));\n\n        KaKaoMemberInfoResponse memberInfoResponse = supporter.getMemberInfo(accessToken);\n\n        assertThat(memberInfoResponse.getId()).isEqualTo(kakaoId);\n    }\n\n    @Test\n    void ì•¡ì„¸ìŠ¤_í† í°_ì¡°íšŒ() {\n        String authorizationCode = \"authorization code\";\n        String accessToken = \"access token\";\n        String response = String.format(\"{\\\"access_token\\\":\\\"%s\\\"}\", accessToken);\n\n        mockServer.expect(requestTo(TOKEN_REQUEST_URI))\n                .andExpect(content().contentType(\"application/x-www-form-urlencoded;charset=utf-8\"))\n                .andExpect(method(HttpMethod.POST))\n                .andRespond(withSuccess(response, MediaType.APPLICATION_JSON));\n\n        KaKaoAccessTokenResponse tokenResponse = supporter.getAccessToken(authorizationCode);\n\n        assertThat(tokenResponse.getAccessToken()).isEqualTo(accessToken);\n    }\n}\n\n```\n\n<br><br>\n\n\n- ë™ì¼í•œ URLì— ëŒ€í•œ ì‘ë‹µ ê°’ì´ ë‹¤ë¥¼ ê²½ìš°ë¥¼ ê³ ë ¤í•´ ì„œë²„ë¥¼ ìƒˆë¡œ ìƒì„±í•´ì£¼ë„ë¡ í•©ë‹ˆë‹¤.\n```java\n@SpringBootTest\nclass OAuthProviderTest {\n    // ... \n    @BeforeEach\n    void setUp() {\n        mockServer = MockRestServiceServer.createServer(restTemplate);\n    }\n    // ... \n}\n```\n\n<br><br>\n\n- ìš”ì²­ ì¡°ê±´ê³¼ ì‘ë‹µ ê°’ì„ ì„¤ì •í•´ì¤ë‹ˆë‹¤.\n\n    - `requestTo(String URI)` : ìš”ì²­í•  URIë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\n    - `method(HttpMethod method)`: ìš”ì²­í•  ë©”ì„œë“œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ê¸°ë³¸ ê°’ì€ `GET` ì…ë‹ˆë‹¤.\n    - `header()`: ìš”ì²­ ì‹œ ë³´ë‚´ì•¼í•˜ëŠ” í—¤ë”ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. key-value ìˆœì„œë¡œ ì‘ì„±í•©ë‹ˆë‹¤.\n    - `andRespond()`: ëŒì•„ì™€ì•¼í•˜ëŠ” ì‘ë‹µ ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤. ì‘ë‹µì€ ì•„ë˜ì™€ ê°™ì´ Stringìœ¼ë¡œ ì‘ì„±í•©ë‹ˆë‹¤.\n    - ì´ì™¸ì—ë„ status code, contentType ë“±ë„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```java\n@SpringBootTest\nclass OAuthProviderTest {\n    // ... \n    @Test\n    void ì‚¬ìš©ì_ì •ë³´_ì¡°íšŒ() {\n        // ...\n        \n        String response = String.format(\"{\\\"id\\\":\\\"%d\\\"}\", kakaoId);\n\n        mockServer.expect(requestTo(MEMBER_INFO_REQUEST_URI))\n                .andExpect(content().contentType(\"application/x-www-form-urlencoded\"))\n                .andExpect(method(HttpMethod.POST))\n                .andExpect(header(AUTHORIZATION_HEADER, TOKEN_TYPE + accessToken))\n                .andRespond(withSuccess(response, MediaType.APPLICATION_JSON));\n        // ...\n    }\n    // ... \n}\n```\n\n<br><br>\n\nì´ë ‡ê²Œ ì§ì ‘ `MockRestServiceServer`ë¥¼ ìƒì„±í•´ì£¼ì§€ ì•Šê³  `@RestClientTest`ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤.\n\nìì„¸í•œ ë‚´ìš©ì€ [ê¸°ì–µë³´ë‹¨ ê¸°ë¡ì„(ì´ë™ìš±ë‹˜) - Spring Bootì—ì„œ ì™¸ë¶€ API í…ŒìŠ¤íŠ¸í•˜ê¸°](https://jojoldu.tistory.com/341) ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.\n\n\n<br><br>\n\n\n### í•œê³„ì \nì´ ë°©ë²•ì€ mock serverë¥¼ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— ì•ì„  ë°©ë²•ê³¼ ë‹¤ë¥´ê²Œ ì¸ìˆ˜í…ŒìŠ¤íŠ¸ì—ì„œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.  \ní•˜ì§€ë§Œ í…ŒìŠ¤íŠ¸ ì‹œ `RestTemplate`ê³¼ `MockRestServiceServer`ë¥¼ ë§¤ë²ˆ ìƒì„±í•´ì£¼ì–´ì•¼ í•˜ê³ , ì ìš©ë˜ëŠ” í…ŒìŠ¤íŠ¸ë“¤ì— ë‹¤ìˆ˜ì˜ ì¤‘ë³µ ì½”ë“œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  \në¿ë§Œ ì•„ë‹ˆë¼ ì‘ë‹µ ê°’ì„ ë¬¸ìì—´ë¡œ ì‘ì„±í•´ì£¼ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ê°€ë…ì„±ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤.\n\n\n<br><br><br><br>\n\n\n## Kakao Server Mockingí•˜ê¸°\n---\n> ë§ˆì§€ë§‰ ë°©ë²•ìœ¼ë¡œ ê°€ì§œ ì¹´ì¹´ì˜¤ ì„œë²„ë¥¼ ë§Œë“¤ì–´ì„œ mockingí•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.  \n> ì¦‰, ì¹´ì¹´ì˜¤ ì„œë²„ ëŒ€ì‹  ìš”ì²­ì„ ìˆ˜í–‰í•´ì¤„ controllerë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n### AuthApiTest\nì•„ë˜ì™€ ê°™ì´ ë¡œê·¸ì¸ ìš”ì²­ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.  \nì´ ë•Œ, `@SpringBootTest(webEnvironment = WebEnvironment.DEFINED_PORT)` ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›í•˜ëŠ” í¬íŠ¸ì—ì„œ í…ŒìŠ¤íŠ¸ê°€ ì§„í–‰ë˜ë„ë¡ ì„¤ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.\n\nê·¸ ì´ìœ ëŠ” ì¹´ì¹´ì˜¤ ì„œë²„ë¥¼ ëŒ€ì‹ í•´ ìš”ì²­ì„ ìˆ˜í–‰í•´ì¤„ controllerë¡œ ìš°ë¦¬ê°€ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ í•´ë‹¹ í¬íŠ¸ë¥¼ ê¸°ì¬í•´ì£¼ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\n(ì•„ë˜ `application.properties`ì˜ `auth.kakao.token-request-uri`ì™€ `auth.kakao.member-info-request-uri` ì°¸ê³ )\n\n\n```java\n@SpringBootTest(webEnvironment = WebEnvironment.DEFINED_PORT)\npublic class AuthApiTest {\n\n    @Test\n    void ë¡œê·¸ì¸_ì •ìƒ_ìš”ì²­_ì‹œ_200_ë°˜í™˜() {\n        ExtractableResponse<Response> response = RestAssured\n                .given()\n                .log().all()\n                .queryParam(\"code\", \"authorizationCode\")\n                .when()\n                .post(\"/login\")\n                .then()\n                .log().all()\n                .statusCode(HttpStatus.OK.value())\n                .extract();\n\n        // ...\n    }\n    \n    // ...\n}\n```\n\n<br><br>\n\n### application.properties\nmainì˜ `application.properties` ì™€ ë™ì¼í•˜ê²Œ ì¹´ì¹´ì˜¤ ì„œë²„ì— ì •ë³´ë¥¼ ìš”ì²­í•˜ê¸° ìœ„í•œ ì •ë³´ë“¤(redirect uri, client id ë“±)ì„ test ì‹œ ì‚¬ìš©ë˜ëŠ” `application.properties`ì— ì‘ì„±í•´ì¤ë‹ˆë‹¤.\n\nì—¬ê¸°ì„œ = `server.port`ë¡œ ì§€ì •í•œ í¬íŠ¸ì—ì„œ `@SpringBootTest(webEnvironment = WebEnvironment.DEFINED_PORT)` í…ŒìŠ¤íŠ¸ê°€ ì§„í–‰ë©ë‹ˆë‹¤.\n\nì´ ë•Œ, `server.port`ë¡œ ì§€ì •í•œ í¬íŠ¸ì™€ ìš”ì²­ URI(`auth.kakao.token-request-uri`, `auth.kakao.member-info-request-uri`) ì˜ í¬íŠ¸ê°€ ë™ì¼í•´ì•¼ ìš”ì²­ì´ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ë©ë‹ˆë‹¤.\n\n```properties\nserver.port=8888\nauth.kakao.token-request-uri=http://localhost:8888/oauth/token\nauth.kakao.member-info-request-uri=http://localhost:8888/user/me\nauth.kakao.redirect-uri=http://localhost:8888/authorization\nauth.kakao.client-id=clientId\n\n```\n\n<br><br>\n\n\n### MockKakaoServerController\nì¹´ì¹´ì˜¤ ì„œë²„ ëŒ€ì‹  ìš”ì²­ì„ ì²˜ë¦¬í•´ ì¤„ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‘ì„±í•˜ì—¬, ìš”ì²­ ì¡°ê±´ê³¼ ì›í•˜ëŠ” ì‘ë‹µì„ ì„¤ì •í•´ì¤ë‹ˆë‹¤.\n\n```java\n@RestController\npublic class MockKakaoServerController {\n\n// ...\n\n    @PostMapping(path = \"/oauth/token\", consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE)\n    public ResponseEntity<KaKaoAccessTokenResponse> getAccessToken(HttpEntity<String> request) {\n    \n\t\t// ...\n        \n        KaKaoAccessTokenResponse response = KaKaoAccessTokenResponse.builder()\n                .accessToken(\"access token\")\n                .build();\n\n        return ResponseEntity.ok(response);\n    }\n\n    @PostMapping(path = \"/user/me\", consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE)\n    public ResponseEntity<KakaoMemberResponse> getMemberInfo(@RequestHeader(HttpHeaders.AUTHORIZATION) String token) {\n \t\t\n        // ...\n\n        KakaoMemberResponse response = KakaoMemberResponse.builder()\n                .id(54321L)\n                .build();\n\n        return ResponseEntity.ok(response);\n    }\n}\n\n```\n\n\n<br><br><br><br>\n\n\n## ì°¸ê³  ìë£Œ\n---\n\n[PROLOG - OAuthë¥¼ ì‚¬ìš©í•˜ëŠ” ë¡œì§ì˜ í…ŒìŠ¤íŠ¸ë¥¼ ì™¸ë¶€ APIì— ì˜ì¡´í•˜ì§€ ì•Šê²Œ í•´ë³´ì](https://prolog.techcourse.co.kr/studylogs/2500)\n\n[ì™¸ë¶€ API Mockingí•˜ì—¬ í…ŒìŠ¤íŠ¸í•˜ê¸°](https://velog.io/@jurlring/%EC%99%B8%EB%B6%80-API-Mocking%ED%95%98%EC%97%AC-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0#%EC%8B%9C%EB%8F%84-2---resttemplate-mocking)  \n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì¡°ì´'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì‹œì‘í•˜ê¸° ì „ì— í”¼ì›€ í”„ë¡œì íŠ¸ì—ì„œ OAuth 2.0ì„ ì´ìš©í•´ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì„ êµ¬í˜„í•˜ì—¬ ê·¸ ê³¼ì •ì„ ê¸°ë¡í•´ë³´ë ¤ í•©ë‹ˆë‹¤. ê·¸ëŸ¼ ë³¸ê²©ì ìœ¼ë¡œ ê¸€ì„ ì½ê¸° ì „ì— ëª‡ ê°€ì§€ ì‚¬í•­ë“¤ì„ ì²´í¬í•´ ë´…ì‹œë‹¤.  1.  OAuth 2.0 ê¸°ì´ˆ ê°œë… ì´ ê¸€ì€ ë…ìê°€ OAuth 2.0 ê°œë…ì„ ì•Œê³  ìˆë‹¤ëŠ” ê°€ì • í•˜ì— ì‘ì„± ë˜ì—ˆìŠµë‹ˆë‹¤. ë§Œâ€¦","fields":{"slug":"/OAuth2.0-backend/"},"frontmatter":{"date":"August 24, 2023","title":"OAuth 2.0 ë¡œê·¸ì¸ êµ¬í˜„í•˜ê¸° (ì¹´ì¹´ì˜¤)","tags":["OAuth2.0","ë¡œê·¸ì¸"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì¡°ì´](https://github.com/yeonkkk)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ì‹œì‘í•˜ê¸° ì „ì—\n\ní”¼ì›€ í”„ë¡œì íŠ¸ì—ì„œ **OAuth 2.0**ì„ ì´ìš©í•´ **ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸**ì„ êµ¬í˜„í•˜ì—¬ ê·¸ ê³¼ì •ì„ ê¸°ë¡í•´ë³´ë ¤ í•©ë‹ˆë‹¤.\n\nê·¸ëŸ¼ ë³¸ê²©ì ìœ¼ë¡œ ê¸€ì„ ì½ê¸° ì „ì— ëª‡ ê°€ì§€ ì‚¬í•­ë“¤ì„ ì²´í¬í•´ ë´…ì‹œë‹¤.\n\n<br><br>\n\n### 1.  OAuth 2.0 ê¸°ì´ˆ ê°œë…\n> ì´ ê¸€ì€ **ë…ìê°€ OAuth 2.0 ê°œë…ì„ ì•Œê³  ìˆë‹¤ëŠ” ê°€ì • í•˜**ì— ì‘ì„± ë˜ì—ˆìŠµë‹ˆë‹¤.  \n> ë§Œì•½ OAuth 2.0ì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ê°œë…ì„ íŒŒì•…í•˜ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ ìë£Œë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.\n\n\n- [Tecoble - OAuth ê°œë… ë° ë™ì‘ ë°©ì‹ ì´í•´í•˜ê¸°](https://tecoble.techcourse.co.kr/post/2021-07-10-understanding-oauth/)\n- [Tecoble - OpenIDì™€ OAuth2.0](https://tecoble.techcourse.co.kr/post/2022-10-24-openID-Oauth/)\n\n<br><br>\n\n### 2. ê°œë°œ í™˜ê²½\n> ì´ ê¸€ì€ ì•„ë˜ì™€ ê°™ì€ í™˜ê²½ì—ì„œ êµ¬í˜„í•œ ë‚´ìš©ì„ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\n- spring boot 3.1.1\n\n- java 17\n\n\n<br><br>\n\n### 3. ì„¤ì •í•˜ê¸°\n> ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ íë¦„ì„ ì´í•´í•˜ê¸° ìœ„í•´ ì¹´ì¹´ì˜¤ì—ì„œ ì œê³µí•˜ëŠ” ê³µì‹ ë¬¸ì„œë¥¼ ìˆ™ì§€í•©ë‹ˆë‹¤.  \n> ì¹´ì¹´ì˜¤ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒì„± ë° ì„¤ì • í•©ë‹ˆë‹¤.  \n> ì›í•˜ëŠ” ì •ë³´ë¥¼ ìš”ì²­í•˜ê¸° ìœ„í•´ APIë¥¼ íŒŒì•…í•©ë‹ˆë‹¤.\n\n- ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì´í•´í•˜ê¸°: [Kakao Developers - ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì´í•´í•˜ê¸°](https://developers.kakao.com/docs/latest/ko/kakaologin/common)\n\n- ì¹´ì¹´ì˜¤ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„± ë° ì„¤ì •í•˜ê¸°: [Kakao Developers - ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì„¤ì •í•˜ê¸°](https://developers.kakao.com/docs/latest/ko/kakaologin/prerequisite)\n\n- ì¹´ì¹´ì˜¤ REST API í™•ì¸í•˜ê¸°: [Kakao Developers - ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ REST API](https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api)\n\n<br><br><br><br>\n\n\n## í™˜ê²½ êµ¬ì„±í•˜ê¸°\n>ìš°ë¦¬ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ì…ì¥ìœ¼ë¡œ ì¹´ì¹´ì˜¤ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ì•¼ í•©ë‹ˆë‹¤.  \n> ì´ë¥¼ ìœ„í•´ ë¨¼ì € ë‚´ë¶€ì—ì„œ ìš”ì²­ì„ ë³´ë‚¼ í´ë¼ì´ì–¸íŠ¸ ê°ì²´ë¥¼ ìƒì„±í•´ ì¤ë‹ˆë‹¤.\n\n<br><br>\n\n### RestTemplate\n> ìŠ¤í”„ë§ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ HTTP ìš”ì²­í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ `RestTemplate`ê³¼ `WebClient`ê°€ ìˆìŠµë‹ˆë‹¤.  \n> ìš°ë¦¬ëŠ” ê·¸ ì¤‘ `RestTemplate`ë¥¼ ì´ìš©í•  ê²ƒì…ë‹ˆë‹¤.   \n> ê´€ë ¨ ë‚´ìš©ì€ ê¸€ì˜ ë§ˆì§€ë§‰ì— ë‹¤ë£¨ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\n\nê¸°ë³¸ ìŠ¤í”„ë§ ë¶€íŠ¸ ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ë©´ `RestTemplate` ê´€ë ¨ ì˜ì¡´ì„±ì€ ìë™ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤.\n\n```groovy\nimplementation 'org.springframework.boot:spring-boot-starter-web'\n```\n\n\n<br><br>\n\n`RestTemplate`ì€ ìë™ìœ¼ë¡œ ë¹ˆ ë“±ë¡ì´ ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ì§ì ‘ ë“±ë¡í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n```java\n@Configuration\npublic class AuthConfig {\n\n    @Bean\n    public RestTemplate restTemplate(RestTemplateBuilder restTemplateBuilder) {\n        return restTemplateBuilder.build();\n    }\n}\n```\n\n<br><br>\n\n\n\n### í´ë¼ì´ì–¸íŠ¸ ê°ì²´ ìƒì„±í•˜ê¸°\n\nHTTP í†µì‹ ì„ ìœ„í•œ `RestTemplate` ì„¸íŒ…ì´ ëë‚¬ìœ¼ë‹ˆ í´ë¼ì´ì–¸íŠ¸ ì—­í• ì„ í•  ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.  \nìš°ë¦¬ëŠ” ì´ í´ë¼ì´ì–¸íŠ¸ ê°ì²´ë¥¼ ì´ìš©í•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í° ìš”ì²­, ì‚¬ìš©ì ì •ë³´ ìš”ì²­, íšŒì› íƒˆí‡´ ìš”ì²­ ë“± ì¹´ì¹´ì˜¤ ì„œë²„ë¡œ ë‹¤ì–‘í•œ ìš”ì²­ì„ ë³´ë‚¼ ê²ƒì…ë‹ˆë‹¤.\n\n```java\n@Component\n@RequiredArgsConstructor\npublic class OAuthProvider {\n\n    public static final String AUTHORIZATION_HEADER = \"Authorization\";\n    public static final String GRANT_TYPE = \"authorization_code\";\n    public static final String TOKEN_TYPE = \"Bearer \";\n\n    @Value(\"${auth.kakao.token-request-uri}\")\n    private String tokenRequestUri;\n\n    @Value(\"${auth.kakao.member-info-request-uri}\")\n    private String memberInfoRequestUri;\n    \n    @Value(\"${auth.kakao.redirect-uri}\")\n    private String redirectUri;\n\n    @Value(\"${auth.kakao.client-id}\")\n    private String clientId;\n\n    private final RestTemplate restTemplate;\n\n}\n\n```\n\n\n\n- ì•¡ì„¸ìŠ¤ í† í° ìš”ì²­, ì‚¬ìš©ì ì •ë³´ ìš”ì²­, íšŒì› íƒˆí‡´ ìš”ì²­ ë“±ì˜ ìš”ì²­ ì‹œ `RestTemplate`ì„ ë°˜ë³µì ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— í•„ë“œë¡œ ë‘ì—ˆìŠµë‹ˆë‹¤.\n\n- ì¹´ì¹´ì˜¤ ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ë°˜ë³µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì •ë³´ë“¤ì„ í•„ë“œë¡œ ë‘ì—ˆìŠµë‹ˆë‹¤.\n\n<br><br>\n\n\n### ë¯¼ê° ì •ë³´ ê´€ë¦¬\n> ìš”ì²­ì— ì‚¬ìš©ë˜ëŠ” ì •ë³´ë“¤ ì¤‘ REST API í‚¤ë‚˜ SECRETê³¼ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë“¤ì€ `@Value` ì• ë„ˆí…Œì´ì…˜ê³¼ `application.properties` íŒŒì¼ì„ ì´ìš©í•´ì„œ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n`application.properties`ëŠ” ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  \n(í”¼ì›€ í”„ë¡œì íŠ¸ì—ì„œëŠ” `properties` íŒŒì¼ì„ ì‚¬ìš©í•˜ì˜€ì§€ë§Œ, `yml` íŒŒì¼ë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤)\n\n```properties\nauth.kakao.token-request-uri= ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•  ì¹´ì¹´ì˜¤ URI\nauth.kakao.member-info-request-uri= ì‚¬ìš©ì ì •ë³´ë¥¼ ìš”ì²­í•  ì¹´ì¹´ì˜¤ URI\nauth.kakao.redirect-uri= kakao developersì—ì„œ ì„¤ì •í•œ ë¦¬ë‹¤ì´ë ‰íŠ¸ URI\nauth.kakao.client-id= kakao developersì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„± ì‹œ ë°œê¸‰ ë°›ì€ REST API í‚¤\n```\n\n\n\ní•´ë‹¹ ë‚´ìš©ì— ëŒ€í•´ ë” ì•Œì•„ë³´ê³  ì‹¶ìœ¼ì‹œë‹¤ë©´ ì•„ë˜ ê¸€ì„ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.\n\n- [Tecoble - Spring Bootì—ì„œ properties ê°’ ì£¼ì…ë°›ê¸°](https://tecoble.techcourse.co.kr/post/2020-09-29-spring-properties-binding/)\n\n\n<br><br><br><br>\n\n\n## ë¡œê·¸ì¸ êµ¬í˜„í•˜ê¸°\nì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì€ OAuth 2.0 í”„ë¡œí† ì½œ ì¤‘ `Authorization Code Grant` ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.  \nê·¸ë ‡ê¸° ë•Œë¬¸ì— ìš°ë¦¬ê°€ ìˆ˜í–‰í•´ì•¼ í•  ìš”ì²­ì€ ì•„ë˜ì™€ ê°™ì´ 3ê°œë¡œ ë‚˜ëˆ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n- `authorization code` ìš”ì²­\n\n- `access token` ìš”ì²­\n\n- ì‚¬ìš©ì ì •ë³´ ìš”ì²­\n\n<br><br>\n\n### ë™ì‘ ê³¼ì •\n> í”¼ì›€ ì„œë¹„ìŠ¤ì—ì„œ êµ¬í˜„í•œ ë¡œê·¸ì¸ì€ ì•„ë˜ì™€ ê°™ì´ ë™ì‘í•©ë‹ˆë‹¤.  \n> í”¼ì›€ì˜ ê²½ìš° ì‚¬ìš©ì ì¸ì¦ ë°©ì‹ìœ¼ë¡œ ì„¸ì…˜ì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.  \n> ì´ ê¸€ì—ì„œëŠ” OAuth 2.0ì— ëŒ€í•´ ë‹¤ë£¨ê³  ìˆìœ¼ë¯€ë¡œ ê´€ë ¨ ë‚´ìš©ì€ ìƒëµí•©ë‹ˆë‹¤.\n\n \n![pium-oauth-arc.png](.index_images/img.png)\n\n\nìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ ì¹´ì¹´ì˜¤ ì„œë²„ì— ìš”ì²­í•´ì•¼í•˜ëŠ” ì •ë³´ ì¤‘ í•˜ë‚˜ì¸ `authorization code`ëŠ” í”¼ì›€ì˜ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì¹´ì¹´ì˜¤ ì„œë²„ì— ìš”ì²­í•œ í›„ í”¼ì›€ ì„œë²„ë¡œ ë¡œê·¸ì¸ ìš”ì²­ ì‹œ ì‚¬ìš©í•©ë‹ˆë‹¤.   \nì¦‰, **í”¼ì›€ ì„œë²„ì—ì„œëŠ” ì¹´ì¹´ì˜¤ ì„œë²„ë¡œ ì•¡ì„¸ìŠ¤ í† í° ìš”ì²­ê³¼ ì‚¬ìš©ì ì •ë³´ ìš”ì²­ë§Œ ì§„í–‰**í•  ê²ƒì…ë‹ˆë‹¤.\n\n<br><br>\n\n### ì•¡ì„¸ìŠ¤ í† í° ìš”ì²­í•˜ê¸°\n> [KAKAO REST API - í† í°ë°›ê¸°](https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api#request-token)ë¥¼ ì°¸ê³ í•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•©ë‹ˆë‹¤.\n\n#### ìš”ì²­\n\n```\ncurl -v -X POST \"https://kauth.kakao.com/oauth/token\" \\\n -H \"Content-Type: application/x-www-form-urlencoded\" \\\n -d \"grant_type=authorization_code\" \\\n -d \"client_id=${REST_API_KEY}\" \\\n --data-urlencode \"redirect_uri=${REDIRECT_URI}\" \\\n -d \"code=${AUTHORIZE_CODE}\"\n```\n\n#### ì‘ë‹µ\n\n```\nHTTP/1.1 200 OK\nContent-Type: application/json;charset=UTF-8\n{\n    \"token_type\":\"bearer\",\n    \"access_token\":\"${ACCESS_TOKEN}\",\n    \"expires_in\":43199,\n    \"refresh_token\":\"${REFRESH_TOKEN}\",\n    \"refresh_token_expires_in\":5184000,\n    \"scope\":\"account_email profile\"\n}\n```\n\n<br><br>\n\n#### KaKaoAccessTokenResponse Dto\n\nì•¡ì„¸ìŠ¤ í† í°ë§Œ ë°›ì„ ê²ƒì´ê¸° ë•Œë¬¸ì— `String`ìœ¼ë¡œ ë°›ì„ìˆ˜ë„ ìˆìœ¼ë‚˜, ì´í›„ì— ì¶”ê°€ì ì¸ ì •ë³´ë¥¼ ë°›ëŠ” ê²ƒìœ¼ë¡œ ëª…ì„¸ê°€ ë³€ê²½ë  ìˆ˜ ìˆê¸°ì— DTOë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n```java\n@Getter\n@Builder\n@NoArgsConstructor(access = AccessLevel.PRIVATE)\n@AllArgsConstructor(access = AccessLevel.PRIVATE)\npublic class KaKaoAccessTokenResponse {\n\n    @JsonProperty(\"access_token\")\n    private String accessToken;\n}\n```\n\n<br><br>\n\n#### ì¹´ì¹´ì˜¤ ì„œë²„ë¡œ ì•¡ì„¸ìŠ¤ í† í° ìš”ì²­í•˜ê¸°\n\n```java\n@Component\n@RequiredArgsConstructor\npublic class OAuthProvider {\n\n    // ...\n\n    public KaKaoAccessTokenResponse getAccessToken(String authorizationCode) {\n        try {\n            HttpHeaders httpHeaders = new HttpHeaders();\n            httpHeaders.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\n\n            MultiValueMap<String, String> body = new LinkedMultiValueMap<>();\n            body.add(\"grant_type\", GRANT_TYPE);\n            body.add(\"client_id\", clientId);\n            body.add(\"redirect_uri\", redirectUri);\n            body.add(\"code\", authorizationCode);\n\n            HttpEntity<MultiValueMap<String, String>> request = new HttpEntity<>(body, httpHeaders);\n\n            return restTemplate.postForEntity(\n                    tokenRequestUri, request, KaKaoAccessTokenResponse.class).getBody();\n        } catch (HttpClientErrorException e) {\n            throw new KakaoTokenRequestException(e.getMessage());\n        } catch (HttpServerErrorException e) {\n            throw new KakaoServerException(e.getMessage());\n        }\n    }\n\n    // ...\n}\n\n```\n\n- í—¤ë” ìƒì„±\n\n    - ì¹´ì¹´ì˜¤ REST API ëª…ì„¸ì— ë”°ë¼ `HttpHeaders`ë¥¼ ì´ìš©í•´ headerë¥¼ ìƒì„±í•˜ì—¬ Content Typeì„ `application/x-www-form-urlencoded` ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.\n\n- ë°”ë”” ìƒì„±\n\n    - `MultiValueMap`ì„ ì´ìš©í•˜ì—¬ ìš”ì²­ ì‹œ ì‚¬ìš©ë  body ë¥¼ `key-value` í˜•íƒœë¡œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.\n    - ì¹´ì¹´ì˜¤ REST API ëª…ì„¸ì— ë”°ë¼ grant_type, client_id, redirect_uri, code ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„£ì–´ì¤ë‹ˆë‹¤.\n\n- ë¦¬í€˜ìŠ¤íŠ¸ ìƒì„±\n\n    - ì•ì„œ ì„¤ì •í•œ headerì™€ bodyë¡œ `HttpEntity`ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n\n- ì¹´ì¹´ì˜¤ ì„œë²„ì— ìš”ì²­í•˜ê¸°\n\n    - ì¹´ì¹´ì˜¤ REST API ëª…ì„¸ì— ë”°ë¼ POST ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ ìš”ì²­ì„ ë³´ë‚¼ ê²ƒ ì…ë‹ˆë‹¤.\n    - [RestTemplate](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html)ì—ì„œ ì œê³µí•˜ëŠ” POST ë©”ì„œë“œëŠ” ì´ 3ê°€ì§€ë¡œ ëª©ì ì— ë”°ë¼ `postForObject()`, `postForEntity()`, `postForLocation()` ì¤‘ì— ì„ íƒí•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n    - ìš°ë¦¬ëŠ” ì‘ë‹µ ê°’ì„ `ResponseEntity`ë¡œ ë°›ì„ ê²ƒì´ë¯€ë¡œ`RestTemplate`ì˜ `postForEntity()` ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤.\n    - ì¸ì ê°’ìœ¼ë¡œëŠ” `URI`, `Request`, `ResponseType` ì„ ë„£ì–´ì¤ë‹ˆë‹¤.\n\n<br><br>\n\n\n\n### ì‚¬ìš©ì ì •ë³´ ìš”ì²­í•˜ê¸°\n> [KAKAO REST API - ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°](https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api#req-user-info)ë¥¼ ì°¸ê³ í•˜ì—¬ ì‘ë‹µìœ¼ë¡œ ë°›ì€ ì•¡ì„¸ìŠ¤ í† í°ìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.\n\n#### ìš”ì²­\n\n```\ncurl -v -X POST \"https://kapi.kakao.com/v2/user/me\" \\\n  -H \"Content-Type: application/x-www-form-urlencoded\" \\\n  -H \"Authorization: Bearer ${ACCESS_TOKEN}\" \\\n```\n\n#### ì‘ë‹µ\nì‘ë‹µ ê°’ì€ ìˆ˜ì§‘ í•­ëª©ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  \ní”¼ì›€ í”„ë¡œì íŠ¸ì˜ ê²½ìš° ì‚¬ìš©ìì˜ íšŒì› IDë§Œ ìˆ˜ì§‘í•˜ë¯€ë¡œ ë‹¤ë¥¸ ì •ë³´ëŠ” ìƒëµí•˜ì˜€ìŠµë‹ˆë‹¤.\n\n```\nHTTP/1.1 200 OK\n{\n    \"id\":123456789,\n    \"connected_at\": \"2022-04-11T01:45:28Z\"\n    ...\n}\n```\n\n<br><br>\n\n#### KakaoMemberResponse Dto\n\níšŒì› ID ì—­ì‹œ Longìœ¼ë¡œ ë°”ë¡œ ë°›ì„ìˆ˜ë„ ìˆìœ¼ë‚˜, ì´í›„ì— ì¶”ê°€ì ì¸ ì •ë³´ë¥¼ ë°›ëŠ” ê²ƒìœ¼ë¡œ ëª…ì„¸ê°€ ë³€ê²½ë  ìˆ˜ ìˆê¸°ì— DTOë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n```java\n@Getter\n@Builder\n@NoArgsConstructor(access = AccessLevel.PRIVATE)\n@AllArgsConstructor(access = AccessLevel.PRIVATE)\npublic class KakaoMemberResponse {\n\n    private Long id;\n}\n```\n\n<br><br>\n\n#### ì¹´ì¹´ì˜¤ ì„œë²„ë¡œ ì‚¬ìš©ì ì •ë³´ ìš”ì²­í•˜ê¸°\n\n```java\n@Component\n@RequiredArgsConstructor\npublic class OAuthProvider {\n\n    // ...\n\n    public KakaoMemberResponse getMemberInfo(String accessToken) {\n        try {\n            HttpHeaders httpHeaders = new HttpHeaders();\n            httpHeaders.set(AUTHORIZATION_HEADER, TOKEN_TYPE + accessToken);\n            httpHeaders.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\n\n            HttpEntity<Object> request = new HttpEntity<>(httpHeaders);\n\n            return restTemplate.postForEntity(memberInfoRequestUri, request, KakaoMemberResponse.class)\n                    .getBody();\n        } catch (HttpClientErrorException e) {\n            throw new KaKaoMemberInfoRequestException(e.getMessage());\n        } catch (HttpServerErrorException e) {\n            throw new KakaoServerException(e.getMessage());\n        }\n    }\n\n    public KaKaoAccessTokenResponse getAccessToken(String authorizationCode) {\n        // ...\n    }\n\n    // ...\n}\n\n```\n\n\n- í—¤ë” ìƒì„±\n\n    - ì¹´ì¹´ì˜¤ REST API ëª…ì„¸ì— ë”°ë¼ `HttpHeaders`ë¥¼ ì´ìš©í•´ headerë¥¼ ìƒì„±í•˜ì—¬ Content Typeì„ `application/x-www-form-urlencoded` ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.\n    - ì¹´ì¹´ì˜¤ REST API ëª…ì„¸ì— ë”°ë¼ authorization í—¤ë”ë¥¼ ì¶”ê°€í•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í° ê°’ì„ ë„£ì–´ì¤ë‹ˆë‹¤.\n\n- ë¦¬í€˜ìŠ¤íŠ¸ ìƒì„±\n\n    - ì•ì„œ ì„¤ì •í•œ headerë¡œ `HttpEntity`ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n\n- ì¹´ì¹´ì˜¤ ì„œë²„ì— ìš”ì²­í•˜ê¸°\n\n    - ì´ë²ˆì—ë„ ì¹´ì¹´ì˜¤ REST API ëª…ì„¸ì— ë”°ë¼ POST ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ ìš”ì²­ì„ ë³´ë‚¼ ê²ƒ ì…ë‹ˆë‹¤.\n    - ì´ë²ˆì—ë„ ì‘ë‹µì„`ResponseEntity`ë¡œ ë°›ì„ ê²ƒì´ë¯€ë¡œ`RestTemplate`ì˜ `postForEntity()` ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.\n    - ì¸ì ê°’ìœ¼ë¡œëŠ” `URI`, `Request`, `ResponseType` ì„ ë„£ì–´ì¤ë‹ˆë‹¤.\n\n<br><br>\n\n\n### controller êµ¬í˜„í•˜ê¸°\n> í”¼ì›€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë¡œê·¸ì¸ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆë„ë¡ controller ë° apië¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.  \n> controllerì˜ ê²½ìš° ê° ì„œë¹„ìŠ¤ì˜ ëª…ì„¸ì— ë§ê²Œ ì‘ì„±í•˜ì‹œë©´ ë©ë‹ˆë‹¤.\n\n#### ìš”ì²­\n\n```\nPOST \"https://pium.life/login?code={AUTHORIZATION_CODE}\"\n```\n\n#### ì‘ë‹µ\n\n```\nHTTP/1.1 200 OK\n```\n\n<br><br>\n\n#### controller\n```java\n@Validated\n@RestController\n@RequiredArgsConstructor\npublic class AuthController {\n\n    private final AuthService authService;\n\n    @PostMapping(\"/login\")\n    public ResponseEntity<Void> login(\n            @RequestParam(name = \"code\") @NotBlank String code) {\n        Member loginMember = authService.login(code);\n        \n        // ...\n        \n        return ResponseEntity.ok().build();\n    }\n}\n\n```\n\n<br><br>\n\n\n### service êµ¬í˜„í•˜ê¸°\n> ì•ì„œ êµ¬í˜„í•œ `OAuthProvider`ë¥¼ í˜¸ì¶œí•˜ì—¬ ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\n> í•´ë‹¹ ë ˆì´ì–´ì—ì„œ ê° ì„œë¹„ìŠ¤ì˜ ê·œì •ì— ë”°ë¼ ì„œë¹„ìŠ¤ ë‚´ ì¸ì¦ ë°©ì‹(í† í°, ì„¸ì…˜ ë“±)ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.   \n> (ì´ ê¸€ì—ì„œëŠ” OAuth 2.0ë¥¼ ì´ìš©í•œ ë¡œê·¸ì¸ë§Œ ë‹¤ë£¨ê³  ìˆê¸° ë•Œë¬¸ì— í•´ë‹¹ ë‚´ìš©ì€ ìƒëµí•©ë‹ˆë‹¤)\n\n\n```java\n@Service\n@Transactional(readOnly = true)\n@RequiredArgsConstructor\npublic class AuthService {\n\n    private final OAuthProvider provider;\n\n    @Transactional\n    public Member login(String authorizationCode) {\n        KaKaoAccessTokenResponse accessTokenResponse = provider.getAccessToken(authorizationCode);\n        String accessToken = accessTokenResponse.getAccessToken();\n\n        KakaoMemberResponse kakaoMemberResponse = provider.getMemberInfo(accessToken);\n        \n        // ...\n    }\n}\n```\n\n<br><br><br><br>\n\n## ì¶”ê°€ë¡œ ê³ ë ¤í•´ ë³¼ ì‚¬í•­\n\n### RestTemplate vs WebClient\nìŠ¤í”„ë§ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ HTTP ìš”ì²­í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ [RestTemplateê³¼ WebClient](https://tecoble.techcourse.co.kr/post/2021-07-25-resttemplate-webclient/)ê°€ ìˆìŠµë‹ˆë‹¤.\n\ní˜„ì¬ ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— RestTemplateì„ ì‚¬ìš©í•œë‹¤ë©´ ë³„ë„ì˜ ì˜ì¡´ì„± ì¶”ê°€ê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ WebClientë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” webflux ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.\në˜í•œ ë¡œê·¸ì¸ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì¹´ì¹´ì˜¤ ì„œë²„ì˜ ì‘ë‹µì´ í•„ìˆ˜ì ì´ê¸° ë•Œë¬¸ì— WebClientì˜ íŠ¹ì§•ì´ í° ì´ì ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤ê³  ëŠê»´ `RestTemplate`ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.\n\në§Œì•½ ì´í›„ ì„œë¹„ìŠ¤ ê·œëª¨ê°€ ì»¤ì§€ê³ , deprecated ì†Œì‹ì´ ìˆë‹¤ë©´ `WebClient`ë¡œì˜ ëŒ€ì²´ë¥¼ ê³ ë ¤í•  ìˆ˜ë„ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.\n\në‹¤ë¥¸ ëŒ€ì²´ ë°©ì•ˆìœ¼ë¡œ Spring Boot3.2ì— ìƒˆë¡­ê²Œ ì¶”ê°€ë  [RestClient](https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.2.0-M1-Release-Notes) ë„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.\n\n<br><br>\n\n### ë‹¤ìˆ˜ì˜ Provider ê³ ë ¤í•˜ê¸°\ní˜„ì¬ í”¼ì›€ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ë§Œì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.\në§Œì•½ ì´í›„ì— êµ¬ê¸€ ë¡œê·¸ì¸, ë„¤ì´ë²„ ë¡œê·¸ì¸ ë“± ë‹¤ë¥¸ providerë¥¼ ì´ìš©í•˜ê²Œ ëœë‹¤ë©´ í˜„ì¬ì˜ ì½”ë“œë¡œëŠ” ì ìš©ì´ ë¶ˆê°€í•©ë‹ˆë‹¤.  \nì´ ì ì„ ê³ ë ¤í•˜ì—¬ ì¶”ìƒí™”ë¥¼ í†µí•´ ìœ ì—°í•œ ë¡œê·¸ì¸ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ë°©ë²•ì„ ìƒê°í•´ë³¼ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.\n\n<br><br><br><br>\n\n## ëìœ¼ë¡œ\n\nOAuth 2.0 ì„ í†µí•´ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.  \në‹¤ìŒ ê¸€ì—ì„œëŠ” êµ¬í˜„í•œ ë¡œê·¸ì¸ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ë°©ë²•ì„ ë‹¤ë¤„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.  \nê¸€ì„ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!  \n\n\n\n\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'í´ë¦°'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ë¬¸ì œ: ë¬´í•œ ìŠ¤í¬ë¡¤ ì‹œì— ë°ì´í„° fetchê°€ ì œëŒ€ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤. ì—ëŸ¬ êµ¬í˜„ ë°©ë²•: íŠ¹ì • ì‹ë¬¼ ìƒì„¸ë³´ê¸° ì ‘ì† â†’ íƒ€ì„ë¼ì¸ í˜ì´ì§€ ì ‘ì† â†’ ë’¤ë¡œê°€ê¸° â†’ í•´ë‹¹ ì‹ë¬¼ ì •ë³´ ìˆ˜ì • â†’ íƒ€ì„ë¼ì¸ í˜ì´ì§€ ì ‘ì† ì„œë¡  â€˜í”¼ì›€â€™ ì„œë¹„ìŠ¤ ì—ì„œëŠ” ì‹ë¬¼ì˜ ê´€ë¦¬ ì´ë ¥(ì‹ë¬¼ ë¬¼ ì£¼ê¸°, ë¬¼ ì£¼ê¸° Cycle ë³€í™”, ì‹ë¬¼ì˜ í™˜ê²½â€¦","fields":{"slug":"/tanstack-query-cache-trouble-shooting/"},"frontmatter":{"date":"August 22, 2023","title":"InfinityQueryì—ì„œ fetchê°€ ì œëŒ€ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤?!?!","tags":["Tanstack Query","Cache","useInfititeQuery"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[í´ë¦°](https://github.com/hozzijeong)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n### ë¬¸ì œ: ë¬´í•œ ìŠ¤í¬ë¡¤ ì‹œì— ë°ì´í„° fetchê°€ ì œëŒ€ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤.\n\n### ì—ëŸ¬ êµ¬í˜„ ë°©ë²•: íŠ¹ì • ì‹ë¬¼ ìƒì„¸ë³´ê¸° ì ‘ì† â†’ íƒ€ì„ë¼ì¸ í˜ì´ì§€ ì ‘ì† â†’ ë’¤ë¡œê°€ê¸° â†’ í•´ë‹¹ ì‹ë¬¼ ì •ë³´ ìˆ˜ì • â†’ íƒ€ì„ë¼ì¸ í˜ì´ì§€ ì ‘ì†\n\n## ì„œë¡ \n\nâ€˜í”¼ì›€â€™ ì„œë¹„ìŠ¤ ì—ì„œëŠ” ì‹ë¬¼ì˜ ê´€ë¦¬ ì´ë ¥(ì‹ë¬¼ ë¬¼ ì£¼ê¸°, ë¬¼ ì£¼ê¸° Cycle ë³€í™”, ì‹ë¬¼ì˜ í™˜ê²½ ë³€í™” ë“±)ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” â€˜íƒ€ì„ë¼ì¸â€™ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ íƒ€ì„ë¼ì¸ ê¸°ëŠ¥ì—ì„œëŠ” ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í•  í•„ìš” ì—†ì´ ì•„ë˜ë¡œë§Œ ìŠ¤í¬ë¡¤ í•˜ë©´ ë‹¤ìŒ ë°ì´í„°ê°€ ë‚˜ì˜¤ëŠ” â€˜ë¬´í•œ ìŠ¤í¬ë¡¤â€™ ê¸°ëŠ¥ì„ ì‚¬ìš©ìë“¤ì—ê²Œ ì œê³µí•˜ê³  ìˆëŠ”ë°, ì´ ë¬´í•œ ìŠ¤í¬ë¡¤ì„ ì¢€ ë” í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ React-Queryì—ì„œ ì œê³µí•˜ëŠ” [useInfiniteQuery](https://tanstack.com/query/v5/docs/react/reference/useInfiniteQuery)ë¥¼ í†µí•´ ë¬´í•œ ìŠ¤í¬ë¡¤ì„ êµ¬í˜„í•˜ê³  ìˆìŠµë‹ˆë‹¤. \n\n### ë³¸ë¡ \n\nì‚¬ê±´ì˜ ë°œë‹¨ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì‹ë¬¼ì˜ ê´€ë¦¬ ì´ë ¥ì„ ìˆ˜ì •í•˜ê³  ë³€ê²½ ë‚´ì—­ì´ íƒ€ì„ë¼ì¸ì— ê¸°ë¡ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ íƒ€ì„ë¼ì¸ì„ í´ë¦­ í–ˆë”ë‹ˆ **ìˆ˜ì •í•˜ê¸° ì „ íƒ€ì„ë¼ì¸ì„ ì œê³µí•˜ê³  ìˆë˜ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.** ë‹¹ì‹œì— ìš´ì˜ ì„œë¹„ìŠ¤ ë°°í¬í•˜ê¸°ë¡œ ê²°ì •í•œ ë‹¹ì¼ ì´ì—ˆê¸° ë•Œë¬¸ì— ìƒë‹¹íˆ ë‹¹í™©í•œ ê¸°ì–µì´ ìˆìŠµë‹ˆë‹¤. \n\në¬¸ì œë¥¼ ì°¾ì•„ë³´ê¸° ìœ„í•´ `console`ì„ í†µí•´ì„œ ë°ì´í„° fetch ìˆœì„œë¥¼ í•œë²ˆ ë´¤ìŠµë‹ˆë‹¤. ì²˜ìŒì— ì ‘ì†í•´ì„œ ìºì‹œë˜ì–´ ìˆë˜ ë°ì´í„°ê°€ ë¨¼ì € ì°íˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ ë‹¤ìŒì— íƒ€ì„ë¼ì¸ì— ì‚¬ìš©ë  ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ê³ , ë°ì´í„° í†µì‹ ì´ ì™„ë£Œê°€ ë©ë‹ˆë‹¤. `GET /history` ì´ë ¥ì„ ë³´ë©´ ë°ì´í„° fetchê°€ ì™„ë£Œëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆëŠ”ë°, ë°ì´í„° fetchë¥¼ í•˜ê³  ëì´ ë‚©ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ fetchí•œ ë°ì´í„°ê°€ ê°€ì¥ ìµœì‹ ì˜ ë°ì´í„°ì´ê³  íƒ€ì„ë¼ì¸ì— ì ìš©ë˜ì–´ì•¼ í•  ë°ì´í„°ì¸ë°, ì „í˜€ ì ìš©ë˜ì§€ ì•Šê³  fetchë§Œ í•˜ê³  ëì´ ë©ë‹ˆë‹¤. ì´ ë•Œë¬¸ì— íƒ€ì„ë¼ì¸ì—ëŠ” ì´ì „ ë‚´ìš©ì´ ì ìš©ë˜ì–´ì„œ ë°ì´í„°ê°€ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë¬¸ì œëŠ” ì–¸ì œëŠ” ë˜ ì œëŒ€ë¡œ ì‘ë™ì´ ëœë‹¤ëŠ” ê²ƒ ì´ì—ˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ì¼ê´€ì„± ì—†ëŠ” fetch ë™ì‘ì— ìƒë‹¹íˆ ë§ì€ í˜¼ë€ì´ ìˆì—ˆìŠµë‹ˆë‹¤.\n\n- `Response Data`: ì²˜ìŒ fetch ë˜ì—ˆì„ ë•Œ ë‚˜ì˜¨ ë°ì´í„°\n- `Select Data`: fetchëœ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ê¸° ìœ„í•´ `select` ì˜µì…˜ì„ ì‚¬ìš©í•œ ê³¼ì •ì—ì„œ ì°íˆëŠ” ë°ì´í„°\n- `TimeLine Data`: ì‹¤ì œ íƒ€ì„ë¼ì¸ì— ì‚¬ìš©ë  ë°ì´í„°\n\n![image](https://github.com/pium-official/pium-official.github.io/assets/50974359/3b122e0d-2404-41a6-856e-0f937de9938c)\n\në¬¸ì œì˜ ì›ì¸ì„ â€˜ìºì‹œëœ ë°ì´í„°â€™ë¼ê³  ì¶”ì •í•œ ê°€ìš´ë° ìƒê°í•œ í•´ê²°ì±…ì€ â€˜ë°ì´í„°ë¥¼ fetch í•  ë•Œë§ˆë‹¤ ìºì‹œë¥¼ í•˜ì§€ ì•Šê²Œ í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜?â€™ ì˜€ìŠµë‹ˆë‹¤. React-Queryì— ëŒ€í•´ì„œ ì¢€ ë” ìì„¸íˆ ì•Œê³  ìˆì—ˆë‹¤ë©´ ê¸ˆë°© í•´ê²° ëì„ ë¬¸ì œì´ì§€ë§Œ, ì˜µì…˜ ë“¤ì— ëŒ€í•´ ê·¸ë ‡ê²Œ ìì„¸í•˜ê²Œ ì•Œì§€ ëª»í–ˆê³ , ì• ê¿ì€ `queryKey`ì™€ `enable` ë“±ì„ ê±´ë“œë ¸ë‹¤. [Dependent Queries](https://tanstack.com/query/v4/docs/react/guides/dependent-queries)ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ, enable ì˜µì…˜ì— ìƒíƒœ ê°’ì„ í• ë‹¹í•˜ëŠ”ë°, ë°”ë¡œ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì´ í´ë¡œì €ì— ê°‡í˜€ì„œ ê³„ì† ê°™ì€ ê°’ìœ¼ ì œê³µí•˜ë‚˜? ì´ëŸ° ìƒê°ë„ í•˜ê³ , queryKeyê°€ ê°™ì•„ì„œ ê³„ì† ìºì‹±ì„ í•˜ë‚˜â€¦ filterë¥¼ ì—†ì• ì•¼ í•˜ë‚˜ í•˜ëŠ” ìƒê°ë„ í–ˆìŠµë‹ˆë‹¤. \n\nì´ë ‡ê²Œ ì—¬ëŸ¬ ê°€ì§€ë¥¼ ì‹œë„í•´ ë³´ë‹¤ê°€ í•œ ê°€ì§€ ì›ì¸ì„ ì•Œê²Œ ë˜ì—ˆëŠ”ë°, React-Queryê°€ ì œê³µí•˜ëŠ” [ìºì‹œ ì˜ˆì œ](https://tanstack.com/query/v5/docs/react/guides/caching)ì— ìˆëŠ” ê²ƒê³¼ ë™ì¼í•©ë‹ˆë‹¤.\n\n![image](https://github.com/pium-official/pium-official.github.io/assets/50974359/8686d632-4fba-4dad-a303-d9ec16342890)\n\n\n> ìºì‹œì˜ ì‹œê°„ì´ ì™„ë£Œë˜ê¸° ì „ì— ë˜‘ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ê°€ ë§ˆìš´íŠ¸ ëœë‹¤ë©´. í•´ë‹¹ ì¿¼ë¦¬ëŠ” ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ìºì‹œ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ê³ , `queryFn`ì€ backgroundì—ì„œ ì‹¤í–‰ì´ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  **í•´ë‹¹ fetchê°€ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œëœë‹¤ë©´, ë°©ê¸ˆ ì „ì— fetchí•œ ë°ì´í„°ê°€ ìºì‹œ ë°ì´í„°ë¡œ ë“¤ì–´ê°€ëŠ” ê²ƒì…ë‹ˆë‹¤.**\n> \n\nì¦‰, ì €í¬ê°€ ê²ªì—ˆë˜ ë¬¸ì œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ” ì˜µì…˜ë“¤ (`staleTime:0, gcTime:5ë¶„`)ì—ì„œëŠ” ìì—°ìŠ¤ëŸ½ê²Œ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤ì¸ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ìµœì´ˆë¡œ ìš”ì²­í•œ ì¸ìŠ¤í„´ìŠ¤ê°€ ê°€ë¹„ì§€ ì½œë ‰ì…˜ì— ë“¤ì–´ê°€ê¸° ì „ì— ê³„ì†í•´ì„œ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìš”ì²­í•˜ì˜€ê³ , ë™ì‘ ì›ë¦¬ì— ë”°ë¼ 5ë¶„ê°„ì€ ê°™ì€ ê²°ê³¼ (2 - 3 - 1 ìˆœì„œ, ìºì‹œ â†’ fetch)ë¡œ ì‘ë™í•˜ê²Œ ëœ ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.\n\nê²°êµ­ì— ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ìºì‹œ ì‹œê°„ì„ ì§§ê²Œ ì„¤ì •í•˜ë©´ ë˜ëŠ” ë¬¸ì œì˜€ê³ , íƒ€ì„ë¼ì¸ì˜ ê²½ìš°ì—ëŠ” ìºì‹œë¥¼ í•˜ì§€ ì•Šê² ë‹¤ëŠ” ì˜ë¯¸ë¡œ `gcTime`ì„ 0ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë¬¸ì œì˜€ìŠµë‹ˆë‹¤.\n\n### ê²°ë¡ \n\nì´ë²ˆ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì„ í•˜ë©´ì„œ í¬ê²Œ 2ê°€ì§€ ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ìˆì§€ ì•Šì•˜ë‚˜ í•˜ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. \n\nì²« ë²ˆì§¸ëŠ” â€œì˜ ì•Œì§€ ëª»í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë„ì…í–ˆë‹¤. ì´ ë•Œë¬¸ì— ë°°í¬ ë‹¹ì¼ ë‚ ì— ë¬¸ì œë¥¼ ë§ˆì£¼í–ˆê³ , ì«„ê¹ƒí•œ ê²½í—˜ì„ í•˜ê²Œë˜ì—ˆë‹¤.â€ ì…ë‹ˆë‹¤. ë¬¼ë¡  í•™ìŠµí•˜ëŠ” ì…ì¥ì—ì„œ ë§¤ìš° ì¢‹ì€ ê²½í—˜ì´ì—ˆì§€ë§Œ, ì‹¤ì œ ìƒí™©ì´ì—ˆë‹¤ë©´ ì‚´ì§ ì•„ì°”í•œ ìˆœê°„ì´ì—ˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. \n\në‘ ë²ˆì§¸ëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ê°œë°œ ì„œë²„ì—ì„œ í™•ì¸í–ˆë‹¤ëŠ”ê²Œ ì•½ê°„ ì¹˜ëª…ì ì´ì§€ ì•Šì•˜ë‚˜ ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. mswë¥¼ í†µí•´ì„œ mockAPIë¥¼ í†µí•´ì„œ ëª¨ë“  ì²˜ë¦¬ë¥¼ í•˜ê³  ìˆëŠ”ë°, í•´ë‹¹ API í†µì‹ ì— ëŒ€í•œ ë¹¡ë¹¡í•œ ê²€ì¦ì´ ë¶€ì¡±í–ˆë˜ ê²ƒ ê°™ê¸°ë„ í•˜ê³ , í…ŒìŠ¤íŠ¸ì˜ ë²”ìœ„ë¥¼ ì–´ë””ê¹Œì§€ ì •í•´ì•¼ í•˜ëŠ” ì§€ë„ ì‚´ì§ ì• ë§¤í•œ ëŠë‚Œì´ ë“¤ê¸´ í–ˆìŠµë‹ˆë‹¤. íƒ€ì„ë¼ì¸ ì´ë ¥ì„ ë¶ˆëŸ¬ì˜¤ëŠ” APIì„ êµ¬í˜„í•œë‹¤ë©´ ì˜ ì‘ì„±í•œ mockAPIì´ì§€ë§Œ, e2eí…ŒìŠ¤íŠ¸ë¡œ ìƒê°ì„ í•œë‹¤ë©´ ì‚´ì§ ë¶€ì¡±í•œ ê³¼ì •ì´ì§€ ì•Šì•˜ë‚˜ë¥¼ ìƒê°í•˜ë©´ì„œ e2eí…ŒìŠ¤íŠ¸ì˜ ì¤‘ìš”ì„±ê³¼ mswë¥¼ ì‘ì„±í•˜ëŠ”ë° ê³µì‹ì ìœ¼ë¡œ ì‚¬ìš©í• ë§Œí•œ DBê°€ ì—†ì—ˆë‹¤ëŠ”ê²Œ ì‚´ì§ ì•„ì‰¬ì›Œ ì§€ëŠ” íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì´ì—ˆìŠµë‹ˆë‹¤.\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ê·¸ë ˆì´'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì‚¬ê±´ì˜ ë°œë‹¨ í˜„ì¬ êµ¬ë™ ì¤‘ì¸ ê°œë°œ ì„œë²„ì™€ ìš´ì˜ ì„œë²„ë¥¼ ìº í¼ìŠ¤ì™¸ì˜ ì¥ì†Œì—ì„œ ë¹Œë“œí•´ ë°°í¬í–ˆì„ ë•Œ, ë‚´ë¶€ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ì¸ìŠ¤í„´ìŠ¤ ë‚´ë¶€ì— ë°œìƒí•œ ë¡œê·¸ë‚˜, nginxì— ë‚¨ê²¨ì§„ ë¡œê·¸ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” ìº í¼ìŠ¤ì—ì„œ ì§ì ‘ ssh ì—°ê²°ì„ í†µí•´ ì ‘ì†í•´ì„œ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì„œë²„ ì™¸ë¶€ì—ì„œë„ ì¸â€¦","fields":{"slug":"/server-monitoring/"},"frontmatter":{"date":"August 17, 2023","title":"CloudWatchë¥¼ ì´ìš©í•œ ëª¨ë‹ˆí„°ë§ í™˜ê²½ êµ¬ì„±","tags":["AWS","CloudWatch","ë¡œê·¸ ëª¨ë‹ˆí„°ë§","ìì› ëª¨ë‹ˆí„°ë§"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ê·¸ë ˆì´](https://github.com/Kim0914)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ì‚¬ê±´ì˜ ë°œë‹¨\ní˜„ì¬ êµ¬ë™ ì¤‘ì¸ ê°œë°œ ì„œë²„ì™€ ìš´ì˜ ì„œë²„ë¥¼ ìº í¼ìŠ¤ì™¸ì˜ ì¥ì†Œì—ì„œ ë¹Œë“œí•´ ë°°í¬í–ˆì„ ë•Œ, ë‚´ë¶€ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.\n\nì¸ìŠ¤í„´ìŠ¤ ë‚´ë¶€ì— ë°œìƒí•œ ë¡œê·¸ë‚˜, nginxì— ë‚¨ê²¨ì§„ ë¡œê·¸ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” ìº í¼ìŠ¤ì—ì„œ ì§ì ‘ ssh ì—°ê²°ì„ í†µí•´ ì ‘ì†í•´ì„œ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì„œë²„ ì™¸ë¶€ì—ì„œë„ ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœë¥¼ í™•ì¸í•´ì•¼ í•˜ëŠ” í•„ìš”ì„±ì´ ëŠê»´ì¡Œê³ , ëª¨ë‹ˆí„°ë§ íˆ´ì„ ë„ì…í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.\n\n\nCloudWatchëŠ” AWSì—ì„œ ì œê³µí•˜ëŠ” ëª¨ë‹ˆí„°ë§ íˆ´ì…ë‹ˆë‹¤.\n\n\n\nê¸°ì¡´ì— í”„ë¡œë©”í…Œìš°ìŠ¤ì™€ ê·¸ë¼íŒŒë‚˜ë¥¼ í™œìš©í•´ ëª¨ë‹ˆí„°ë§ì„ í•  ìˆ˜ ìˆì—ˆì§€ë§Œ, í˜„ì¬ ë³´ìœ  ì¤‘ì¸ ì„œë²„ê°€ ëª¨ë‘ ê°€ìš© ì¤‘ì´ê³  ê°€ìš© ì¤‘ì¸ ì„œë²„ì— ëª¨ë‹ˆí„°ë§ íˆ´ì„ ì„¤ì¹˜í•˜ëŠ” ê²½ìš° ë‹¤ë¥¸ ì„œë²„ë“¤ì´ ì˜í–¥ì„ ë°›ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë³„ë„ì˜ íˆ´ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.\n\n\n\nê·¸ë˜ì„œ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¶”ê°€ë¡œ ìƒì„±í•´ ëª¨ë‹ˆí„°ë§ìš© ì„œë²„ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆì—ˆìœ¼ë‚˜, ë¹„ìš©(ê¸ˆì „)ì ìœ¼ë¡œ cloud watchë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ í›¨ì”¬ ë¹„ìš© ì ˆê°ì´ ë˜ê³  ì ìš©ê³¼ì •ë„ ë¹„êµì  ê°„í¸í•˜ê¸° ë•Œë¬¸ì— AWS CloudWatchë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.\n\n\n## CloudWatch ì ìš© ê³¼ì •\ní´ë¼ìš°ë“œ ì™€ì¹˜ë¥¼ ì¸ìŠ¤í„´ìŠ¤ì— ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.\n\n\n\nIAMì„ ë°œê¸‰ ë°›ëŠ” ë°©ë²•ì€ ë‹¤ë¥¸ ë¸”ë¡œê·¸ì—ì„œ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìƒëµí•˜ê³ , ì ìš©í•˜ëŠ” ë°©ë²•ë¶€í„° ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\n\n\n\n*1. ì¸ìŠ¤í„´ìŠ¤ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™í•´  ì¸ìŠ¤í„´ìŠ¤ ìš°í´ë¦­ -> ë³´ì•ˆ -> IAM ì—­í•  ìˆ˜ì •ì„ ëˆ„ë¥´ê³  ë°œê¸‰ë°›ì€ IAMì„ ì¶”ê°€í•©ë‹ˆë‹¤.**\n\n![](.index_images/img.png)\n\n**2. CloudWatch íƒ­ìœ¼ë¡œ ì´ë™í•´ ëŒ€ì‹œë³´ë“œ ìƒì„±ì„ ëˆ„ë¥´ê³  ì›í•˜ëŠ” ì´ë¦„ì„ ììœ ë¡­ê²Œ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.**\n\n\n![](.index_images/img_1.png)\n\n\n\nëŒ€ì‹œë³´ë“œê°€ ì²˜ìŒ ìƒì„±ë˜ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì—¬ê¸°ì„œ ì™¼ìª½ í•˜ë‹¨ì— ìˆëŠ” ë¡œê·¸, ì§€í‘œë¥¼ í™œìš©í•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![](.index_images/img_2.png)\n\n*3. ì§€í‘œ ì¶”ê°€í•˜ê¸°**\n\nì§€í‘œ -> ëª¨ë“  ì§€í‘œë¥¼ ëˆ„ë¥´ë©´ ì•„ë˜ì™€ ê°™ì´ ì¸ìŠ¤í„´ìŠ¤ íƒ­ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¸ìŠ¤í„´ìŠ¤ ì´ì™¸ì—ë„ ë‹¤ë¥¸ íƒ­ë„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n![](.index_images/img_3.png)\n\nEC2 íƒ­ì„ ëˆ„ë¥´ê³  ë“¤ì–´ì˜¤ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆê³  ì¸ìŠ¤í„´ìŠ¤ë³„ ì§€í‘œë¥¼ í™•ì¸í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì¸ìŠ¤í„´ìŠ¤ë³„ ì§€í‘œë¥¼ ëˆ„ë¦…ë‹ˆë‹¤.\n\n![](.index_images/img_4.png)\n\nì¸ìŠ¤í„´ìŠ¤ ì§€í‘œë¥¼ ëˆ„ë¥´ë©´ í˜„ì¬ AWSì— ê°€ë™ ì¤‘ì¸ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nìƒë‹¨ì— ìˆëŠ” ê²€ìƒ‰ íƒ­ì— ê´€ì¸¡í•˜ê³  ì‹¶ì€ ì¸ìŠ¤í„´ìŠ¤ì˜ IDë¥¼ ì…ë ¥í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ i-0123456789 ê°€ ë©ë‹ˆë‹¤.\n\n![](.index_images/img_5.png)\n\n**4. ì›í•˜ëŠ” ì§€í‘œ í™•ì¸í•˜ê¸°**\n\n![](.index_images/img_6.png)\n\n**5. ëŒ€ì‹œë³´ë“œì— ì§€í‘œ ì¶”ê°€í•˜ê¸°**\n\në‹¤ì‹œ ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ì™€ì„œ ê´€ì¸¡í•˜ê³  ì‹¶ì€ ì§€í‘œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.\n\nìš°ì¸¡ ìƒë‹¨ì— ìˆëŠ” + ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì§€í‘œë‚˜ ë¡œê·¸ë¥¼ ì¶”ê°€í•˜ëŠ” í™”ë©´ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![](.index_images/img_7.png)\n\nì–´ë–¤ ê·¸ë˜í”„ë¡œ í™•ì¸í•  ì§€ ê·¸ë˜í”„ë¥¼ ì„ íƒí•œ í›„ ë‹¤ìŒì„ ëˆŒëŸ¬ ì• ì„œ ëª¨ë“  ì§€í‘œì—ì„œ í™•ì¸í–ˆë˜ ë°©ë²•ê³¼ ë™ì¼í•˜ê²Œ ì§€í‘œë¥¼ ì„ íƒí•©ë‹ˆë‹¤.\n\n![](.index_images/img_8.png)\n\nìœ„ì ¯ ìƒì„± ë²„íŠ¼ì„ ëˆŒëŸ¬ ìœ„ì ¯ì„ ìƒì„±í•©ë‹ˆë‹¤.\n\n![](.index_images/img_9.png)\n\nì¶”ê°€ëœ ìœ„ì ¯ì„ í™•ì¸í•˜ê³  ì €ì¥ë²„íŠ¼ì„ ëˆŒëŸ¬ ì €ì¥í•©ë‹ˆë‹¤.\n\n![](.index_images/img_10.png)\n\n## CloudWatch Agent ì„¤ì¹˜\nCloudWatchì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì •ë³´ëŠ” CPU, Network I/O ë“±ê³¼ ê°™ì€ ê¸°ë³¸ì ì¸ ì •ë³´ë§Œ ì œê³µí•©ë‹ˆë‹¤.\n\nì¸ìŠ¤í„´ìŠ¤ì˜ ë©”ëª¨ë¦¬, ìŠ¤ì™‘ ë©”ëª¨ë¦¬, ë””ìŠ¤í¬ I/O ë“± ë³´ë‹¤ ìì„¸í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” `CloudWatch Agent`ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.\n\n\n\nAWS CloudWatch ê³µì‹ ë¬¸ì„œì— ì„¤ì¹˜ ë°©ë²•ì´ ìì„¸íˆ ì˜ ë‚˜ì™€ìˆìŠµë‹ˆë‹¤.\n\n\n\nì €í¬ íŒ€ì€ `Ubuntu22.04 ARM`ì„ ì‚¬ìš© ì¤‘ì´ë¯€ë¡œ, Ubuntu22.04 ARM ê¸°ì¤€ì˜ ì„¤ì¹˜ ë°©ë²•ì„ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\nCloudAgent íŒ¨í‚¤ì§€ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ëŠ” ê³¼ì • ì´ì™¸ì—ëŠ” ë‹¤ë¥¸ í™˜ê²½ë„ ë™ì¼í•˜ê²Œ ì ìš©ë©ë‹ˆë‹¤.\n\n**1.ARM or AMD í™•ì¸**\n\n\nìš°ì„  ì‚¬ìš©í•˜ê³  ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ ì•„í‚¤í…ì²˜ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n\n```java\nlscpu | grep \"Vendor ID\"\n```\n\n![](.index_images/img_11.png)\n\n**2. Cloudwatch Agent ë‹¤ìš´**\n\n\në‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ Agentë¥¼ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.\n\n```shell\nsudo wget https://s3.amazonaws.com/amazoncloudwatch-agent/ubuntu/arm64/latest/amazon-cloudwatch-agent.deb\n```\n\n**ì—¬ê¸°ì„œ ì£¼ì˜í•  ì  !**\n\n\n\ní´ë¼ìš°ë“œ ì™€ì¹˜ë¥¼ ë‹¤ìš´ë°›ì€ í›„ ì„¤ì •ì„ ë§ˆì¹˜ê³  ì ìš©í•˜ëŠ” ê³¼ì •ì—ì„œ ì•Œ ìˆ˜ ì—†ëŠ” **403 ì˜ˆì™¸ê°€ ë°œìƒ**í–ˆì—ˆìŠµë‹ˆë‹¤.\n\n\n\n[processors.ec2tagger] ec2tagger: unable to describe ec2 tags for initial retrieval: unauthorizedoperation: you are not authorized to perform this operation.\n\n\n\nêµ¬ê¸€ë§ì„ í•´ë³´ë‹ˆ IAM ê¶Œí•œê³¼ ê´€ë ¨ëœ ì˜ˆì™¸ì¸ ê²ƒ ê°™ì•˜ëŠ”ë°, IAMì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ì—†ì–´ì„œ ëª‡ ì‹œê°„ ë™ì•ˆ í—¤ë§¤ì—ˆìŠµë‹ˆë‹¤..\n\n\n\nê²°ë¡ ì€ `sudo`ì™€ í•¨ê»˜ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ë‹ˆ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤. sudo ! \n\n![](.index_images/img_12.png)\n\n\n**3. íŒ¨í‚¤ì§€ë¥¼ ë””ë ‰í† ë¦¬ë¡œ ì••ì¶• í•´ì œ**\n\n\n```shell\nsudo dpkg -i -E ./amazon-cloudwatch-agent.deb\n```\n\n**4. CloudWatch Agentì‹œì‘**\n\n\nì••ì¶• í•´ì œê¹Œì§€ ëª¨ë‘ ë§ˆì¹˜ë©´ í´ë¼ìš°ë“œ ì™€ì¹˜ë¥¼ ì ìš©í•˜ëŠ” ì¼ë§Œ ë‚¨ì•˜ìŠµë‹ˆë‹¤.\n\nì—¬ê¸°ì„œ í´ë¼ìš°ë“œ ì™€ì¹˜ë¥¼ ì ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ 2ê°€ì§€ê°€ ìˆëŠ”ë° ì§ì ‘ config.json íŒŒì¼ì„ ìƒì„±í•˜ê±°ë‚˜ wizardë¥¼ ì´ìš©í•˜ì—¬ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Wizardë¡œ ì‹œì‘í•˜ê²Œ ë˜ë©´ ê¸°ë³¸ config.json íŒŒì¼ì„ ìƒì„±í•´ ì£¼ê¸° ë•Œë¬¸ì— ì €ëŠ” wizardë¡œ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.\n\n\n`Wizard`ë¥¼ ì‹¤í–‰í•˜ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.\n\n```shell\nsudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-config-wizard\n```\n\nëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì§ˆë¬¸ì— ëŒ€í•œ ë‹µì„ ì…ë ¥í•˜ëŠ” ë¬¸êµ¬ê°€ ë‚˜ì˜µë‹ˆë‹¤.\n\n![](.index_images/img_13.png)\n\nì›¬ë§Œí•œ ì„¤ì •ì€ default ì„¤ì •ì„ ë”°ë¼ê¸°ì‹œë©´ ë©ë‹ˆë‹¤.\n\ní•œ ë²ˆì”© ì½ì–´ë³´ê³  ìƒí™©ì— ë§ëŠ” ì„¤ì •ì„ í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\n![](.index_images/img_14.png)\n\nì„¤ì •ì„ ì§„í–‰í•˜ë‹¤ ë³´ë©´ **í˜„ì¬ê¹Œì§€ ì‘ì„±ëœ config íŒŒì¼ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**\n\n![](.index_images/img_15.png)\n\nê³„ì†í•´ì„œ ì§„í–‰í•˜ë‹¤ ë³´ë©´ `Do you want to monitor any log files?`ì´ë¼ëŠ” ì§ˆë¬¸ì´ ë‚˜ì˜µë‹ˆë‹¤.\n\nì¸ìŠ¤í„´ìŠ¤ ë‚´ì— **ë¡œê·¸ë¥¼ í´ë¼ìš°ë“œ ì›Œì¹˜ë¡œ ì „ì†¡í•˜ê¸°ë¥¼ ì›í•˜ë©´ 1, ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ 2**ë¥¼ ëˆ„ë¥´ë©´ ë©ë‹ˆë‹¤.\n\n\n\n**ì§€ê¸ˆ ì„¤ì •í•˜ì§€ ì•Šì•„ë„, ì´í›„ì— íŒŒì¼ë¡œ ê°€ì„œ ì§ì ‘ ìˆ˜ì •í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í¬ê²Œ ì¤‘ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ !!**\n\n\n\nDo you want to store the config in the SSM parameter store?\n\n\n\nì§ˆë¬¸ì—ëŠ” `2. no` ë¥¼ ì„ íƒí•˜ì‹œë©´ ë©ë‹ˆë‹¤.\n\n\n\nì„¤ì •ì´ ëë‚˜ë©´ `/opt/aws/amazon-cloudwatch-agent/bin/` ìœ„ì¹˜ì— `config.json` íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.\n\n\n\nconfig.json íŒŒì¼ì„ ì—´ì–´ë´…ì‹œë‹¤.\n\n![](.index_images/img_16.png)\n\ní¬ê²Œ `agent`, `logs`, `metrics`ë¡œ ë‚˜ë‰˜ëŠ”ë° agentëŠ” ê³„ì •ê³¼ ê¶Œí•œì— ê´€ë ¨ëœ ë¶€ë¶„ì´ê³  logsëŠ” ë¡œê·¸ì™€ ê´€ë ¨ëœ ë¶€ë¶„, metricsëŠ” ì¸ìŠ¤í„´ìŠ¤ ë‚´ì˜ ëª¨ë‹ˆí„°ë§ê³¼ ê´€ë ¨ëœ ë¶€ë¶„ì…ë‹ˆë‹¤. ìì„¸í•œ ì„¤ì •ì€ CloudWatch docsë¥¼ ì°¸ê³ í•˜ì‹œë©´ ë©ë‹ˆë‹¤ !\n\n\n\nmetricsì—ëŠ” mem ì´ì™¸ì— cpu, disk, swap ë“±ì´ ìˆìŠµë‹ˆë‹¤.\n\n\n\nhttps://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/monitoring/CloudWatch-Agent-Configuration-File-Details.html#CloudWatch-Agent-Configuration-File-Metricssection\n\nê´€ì¸¡í•˜ê³  ì‹¶ì€ ìì›ì— ëŒ€í•œ ì„¤ì •ì„ ëª¨ë‘ ë§ˆì¹œ í›„ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ CloudWatch Agentë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.\n\n```shell\nsudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -c file:/opt/aws/amazon-cloudwatch-agent/bin/config.json -s\n```\n\n/opt/aws/amazon-cloudwatch-agent/logsì— ìˆëŠ” amazon-cloudwatch-agent.logë¥¼ í™•ì¸í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ”ì§€ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![](.index_images/img_17.png)\n\n**5. ëŒ€ì‹œë³´ë“œì— ì¶”ê°€**\n\n\nëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ì™€ ìœ„ì ¯ ì¶”ê°€ë¥¼ ëˆŒëŸ¬ ì§€í‘œë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n\nì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©ì ì§€ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ êµ¬ì—­ì„ í™•ì¸í•©ë‹ˆë‹¤. ì €ëŠ” config.jsonì„ ì„¤ì •í•  ë•Œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ë”°ë¡œ ì„¤ì •í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ê¸°ë³¸ì¸ CWAgentì— ì¶”ê°€ë©ë‹ˆë‹¤.\n\n![](.index_images/img_18.png)\n\nCWAgent -> hostë¡œ ì´ë™í•´ hostnameì„ ë³´ë©´ ì¸ìŠ¤í„´ìŠ¤ ì•„ì´ë””ë¡œ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\në³¸ì¸ì˜ ì¸ìŠ¤í„´ìŠ¤ ì•„ì´ë””ë¥¼ ì°¾ì•„ì„œ ìœ„ì ¯ìœ¼ë¡œ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.\n\n**6. CloudWatchë¡œ ë¡œê·¸ ê´€ì¸¡í•˜ê¸°**\n\nì¸ìŠ¤í„´ìŠ¤ ë‚´ì—ì„œ ë‚¨ê¸°ê³  ìˆëŠ” ë¡œê·¸ë¥¼ í´ë¼ìš°ë“œ ì›Œì¹˜ë¥¼ ì´ìš©í•´ ê´€ì¸¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ìŠ¤í”„ë§ ì„œë²„ì—ì„œ ë‚¨ê¸°ê³  ìˆëŠ” ë¡œê·¸, NginXì—ì„œ ë‚¨ê¸°ê³  ìˆëŠ” ë¡œê·¸ë“±ì„ í´ë¼ìš°ë“œ ì›Œì¹˜ë¡œ ê´€ì¸¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\nì§€í‘œë¥¼ ì„¤ì •í–ˆë˜ ê²ƒê³¼ ë™ì¼í•˜ê²Œ config.json íŒŒì¼ì— ì›í•˜ëŠ” ë¡œê·¸ íŒŒì¼ì„ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.\n\nlogs -> logs_collected -> files -> collect_listì˜ value ê°’ì— ë¡œê·¸ íŒŒì¼ ìœ„ì¹˜, ë¡œê·¸ ê·¸ë£¹ ì´ë¦„, ë¡œê·¸ ìŠ¤íŠ¸ë¦¼ ì´ë¦„ì„ ì„¤ì •í•©ë‹ˆë‹¤.\n\n![](.index_images/img_19.png)\në¡œê·¸ ê·¸ë£¹ì€ í´ë¼ìš°ë“œ ì›Œì¹˜ ì™¼ìª½ì˜ ë¡œê·¸ -> ë¡œê·¸ ê·¸ë£¹ì—ì„œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në¡œê·¸ ìŠ¤íŠ¸ë¦¼ ì´ë¦„ì€ config.json íŒŒì¼ì— ëª…ì‹œí•œ log_stream_nameì´ ë¡œê·¸ ê·¸ë£¹ì— ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.\n\n\n\n- file_path: ì¸ìŠ¤í„´ìŠ¤ ë‚´ì— ë¡œê·¸ íŒŒì¼ì˜ ê²½ë¡œ\n\n- log_group_name: CloudWatchì—ì„œ ìƒì„±í•œ ë¡œê·¸ ê·¸ë£¹ ì´ë¦„\n\n- log_stream_name: ì›í•˜ëŠ” ë¡œê·¸ ìŠ¤íŠ¸ë¦¼ ì´ë¦„. ë¡œê·¸ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ í´ë¼ìš°íŠ¸ ì™€ì¹˜ì—ì„œ í•„í„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```json\n{\n        \"agent\": {\n                \"metrics_collection_interval\": 60\n        },\n        \"logs\": {\n                \"logs_collected\": {\n                        \"files\": {\n                                \"collect_list\": [\n                                        {\n                                                \"file_path\": \"/home/ubuntu/log/pium-prod-**.log\",\n                                                \"log_group_name\": \"2023-pium-prod\",\n                                                \"log_stream_name\": \"spring-prod-log\"\n                                        },\n                                        {\n                                                \"file_path\": \"/var/log/nginx/access.log\",\n                                                \"log_group_name\": \"2023-pium-prod\",\n                                                \"log_stream_name\": \"nginx-access-log\"\n                                        },\n                                        {\n                                                \"file_path\": \"/var/log/nginx/error.log\",\n                                                \"log_group_name\": \"2023-pium-prod\",\n                                                \"log_stream_name\": \"nginx-error-log\"\n                                        }\n                                ]\n                        }\n                }\n        }\n}\n```\n\nconfig.json íŒŒì¼ì„ ìˆ˜ì •í•œ í›„ ë‹¤ì‹œ **ì—ì´ì „íŠ¸ ì‹¤í–‰ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ ìˆ˜ì •ëœ config íŒŒì¼ ë‚´ìš©ì„ ì ìš©ì‹œí‚µë‹ˆë‹¤.**\n\n```shell\nsudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -c file:/opt/aws/amazon-cloudwatch-agent/bin/config.json -s\n```\n\nì •ìƒì ìœ¼ë¡œ ì ìš©ë˜ë©´ ë¡œê·¸ ê·¸ë£¹ ë‚´ì— ë¡œê·¸ ìŠ¤íŠ¸ë¦¼ì´ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![](.index_images/img_20.png)\n\n**ìƒì„±ëœ ë¡œê·¸ ìŠ¤íŠ¸ë¦¼ì„ ë°”íƒ•ìœ¼ë¡œ ëŒ€ì‹œë³´ë“œì— ë¡œê·¸ ìœ„ì ¯ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**\n\nì§€í‘œ ëŒ€ì‹  ë¡œê·¸ë¥¼ ì„ íƒí•´ì„œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n**ë¡œê·¸ ë³„ë¡œ ìœ„ì ¯ì„ êµ¬ë¶„í•˜ë ¤ë©´ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•  ë•Œ filter ì˜µì…˜ì„ ì¶”ê°€**í•´ ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.\n\n![](.index_images/img_21.png)\n![](.index_images/img_22.png)\n![](.index_images/img_23.png)\n\në¡œê·¸ê°€ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'í•˜ë§ˆë“œ'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ê°œìš” ìš°ì•„í•œí…Œí¬ì½”ìŠ¤ 5ê¸° í”¼ì›€ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ, í•„í„°ë§ ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•´ Querydslì„ ì ìš©í•œ ê³¼ì •ì„ ì •ë¦¬í•œë‹¤ ì´ì „ê¸€ ê³¼ì • ë³¸ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í™˜ê²½ì—ì„œ êµ¬ì„±ë˜ì—ˆë‹¤ Springboot 3.1.1 JAVA 17 Querydsl ì„¤ì • build.gradleì— ê´€ë ¨ ì½”ë“œ ì¶”ê°€   íŒŒì¼ì— ìœ„ â€¦","fields":{"slug":"/querydsl_apply_procedure/"},"frontmatter":{"date":"August 16, 2023","title":"í”¼ì›€ ì„œë¹„ìŠ¤ì˜ Querydsl ì ìš© ê³¼ì •","tags":["Querydsl"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[í•˜ë§ˆë“œ](https://github.com/rawfishthelgh)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ê°œìš”\n---\nìš°ì•„í•œí…Œí¬ì½”ìŠ¤ 5ê¸° í”¼ì›€ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ, í•„í„°ë§ ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•´ Querydslì„ ì ìš©í•œ ê³¼ì •ì„ ì •ë¦¬í•œë‹¤\n\n[ì´ì „ê¸€](https://pium-official.github.io/why_we_applied_querydsl/)\n\n## ê³¼ì •\n---\n> ë³¸ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í™˜ê²½ì—ì„œ êµ¬ì„±ë˜ì—ˆë‹¤\n> \n> Springboot 3.1.1\n> \n> JAVA 17\n\n## Querydsl ì„¤ì •\n---\n### build.gradleì— ê´€ë ¨ ì½”ë“œ ì¶”ê°€\n![](.index_images/1.png)\n\n\n```\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-validation'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n\n    implementation 'com.github.maricn:logback-slack-appender:1.6.1'\n\n    //querydsl ì¶”ê°€\n    implementation 'com.querydsl:querydsl-jpa:5.0.0:jakarta'\n    annotationProcessor \"com.querydsl:querydsl-apt:5.0.0:jakarta\"\n    annotationProcessor \"jakarta.annotation:jakarta.annotation-api\"\n    annotationProcessor \"jakarta.persistence:jakarta.persistence-api\"\n}\n\n//querydsl ì¶”ê°€\ndef querydslSrcDir = 'src/main/generated'\n\nclean {\n    delete file(querydslSrcDir)\n}\n\ntasks.withType(JavaCompile) {\n    options.generatedSourceOutputDirectory = file(querydslSrcDir)\n}\n```\n`build.gradle` íŒŒì¼ì— ìœ„ ì„¤ì •ì„ ì¶”ê°€í•´ ì¤€ë‹¤.\n`dependencies` í•˜ë¶€ì˜ ì˜µì…˜ ì„¤ì •ì€ ì•„ë˜ì™€ ê°™ì€ ì˜ë¯¸ë¥¼ ê°€ì§„ë‹¤.\n\n`def querydslSrcDir = 'src/main/generated'`\n\nQuerydslì´ ìƒì„±í•œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì €ì¥í•  ë””ë ‰í† ë¦¬ë¥¼ ì •ì˜í•œë‹¤. ì—¬ê¸°ì„œëŠ” 'src/main/generated'ë¡œ ë””ë ‰í† ë¦¬ ê²½ë¡œë¥¼ ì§€ì •í•˜ê³ , ì´ë¥¼ querydslSrcDir ë³€ìˆ˜ì— í• ë‹¹í•œë‹¤.\n\n`clean { delete file(querydslSrcDir) }`\n\nGradleì˜ clean íƒœìŠ¤í¬ë¥¼ ì •ì˜í•˜ê³ , í•´ë‹¹ íƒœìŠ¤í¬ê°€ ì‹¤í–‰ë  ë•Œ querydslSrcDir ë””ë ‰í† ë¦¬ë¥¼ ì‚­ì œí•˜ë„ë¡ í•œë‹¤. ì¦‰, í”„ë¡œì íŠ¸ë¥¼ clean í•˜ë©´ Querydslì´ ìƒì„±í•œ ì†ŒìŠ¤ ì½”ë“œë„ ì‚­ì œëœë‹¤.\n\n`tasks.withType(JavaCompile) { options.generatedSourceOutputDirectory = file(querydslSrcDir) }`\n\nJavaCompile íƒœìŠ¤í¬ ìœ í˜•ì„ ê°€ì§„ ëª¨ë“  íƒœìŠ¤í¬ì— ëŒ€í•´, ì»´íŒŒì¼ ì˜µì…˜ ì¤‘ì—ì„œ ìƒì„±ëœ ì†ŒìŠ¤ ì½”ë“œì˜ ì¶œë ¥ ë””ë ‰í† ë¦¬ë¥¼ querydslSrcDirë¡œ ì„¤ì •í•œë‹¤. Querydslì´ ìƒì„±í•œ ì†ŒìŠ¤ ì½”ë“œê°€ ì§€ì •í•œ ë””ë ‰í† ë¦¬ì— ì»´íŒŒì¼ë˜ë„ë¡ ë³´ì¥í•œë‹¤.\n### build ìˆ˜í–‰ ë° Q Class ìƒì„±\n![](.index_images/2.png)\n![](.index_images/3.png)\n\nì´ì œ ë°”ë€ ì„¤ì • íŒŒì¼ë¡œ `build`ë¥¼ ìˆ˜í–‰í•˜ë©´ ìš°ë¦¬ê°€ ì§€ì •í•œ`src/main/generated` ê²½ë¡œì— ìœ„ì™€ ê°™ì€ Q Classê°€ ìƒì„±ëœë‹¤.\n\nQueryDslì€ ë¹Œë“œ ì‹œì ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë„ë©”ì¸ ì¤‘ `@Entity`ì™€ `@Embeddable` ì–´ë…¸í…Œì´ì…˜ì´ í¬í•¨ëœ í´ë˜ìŠ¤ë¥¼ ì°¾ì•„ Q Classë¥¼ ìƒì„±í•œë‹¤. ì´ Q classë¥¼ ê°€ì§€ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ë¶€ì—ì„œ QueryDsl ê´€ë ¨ ë¡œì§ì„ ì ìš©í•´ì•¼ í•œë‹¤.\n\n## ì ìš©\n---\n### JPAQueryFactory Bean ë“±ë¡\n![](.index_images/4.png)\n```java\n@Configuration\npublic class QueryDslConfig {\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @Bean\n    public JPAQueryFactory jpaQueryFactory() {\n        return new JPAQueryFactory(entityManager);\n    }\n}\n```\nJPAQueryFactoryëŠ” Querydslì„ ì‚¬ìš©í•˜ì—¬ JPA ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ë‹¤. `EntityManager`ë¥¼ ì£¼ì…í•´ JPAQueryFactoryê°€ db ìƒí˜¸ ì‘ìš©ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” Config íŒŒì¼ì„ ì‘ì„±í•œë‹¤.\n\n### Querydsl ì§ˆì˜ìš© Repository ìƒì„± ë° ì ìš©\n```java\npublic interface HistoryCustomRepository {\n\n    Page<History> findAllByPetPlantIdAndHistoryTypes(Long petPlantId, List<HistoryType> historyTypes, Pageable pageable);\n}\n```\në¨¼ì € í•´ë‹¹ ê¸°ëŠ¥ì„ ì¶”ìƒí™”í•œ Repository ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•œë‹¤.\n```java\nimport static com.official.pium.domain.QHistory.history;\n\n@Repository\n@RequiredArgsConstructor\npublic class HistoryCustomRepositoryImpl implements HistoryCustomRepository {\n\n    private final JPAQueryFactory jpaQueryFactory;\n\n    @Override\n    public Page<History> findAllByPetPlantIdAndHistoryTypes(Long petPlantId, List<HistoryType> historyTypes, Pageable pageable) {\n\n        List<History> histories = jpaQueryFactory.selectFrom(history)\n                .where(history.petPlant.id.eq(petPlantId), inHistoryType(historyTypes))\n                .orderBy(new OrderSpecifier<>(Order.DESC, history.createdAt), new OrderSpecifier<>(Order.DESC, history.date))\n                .offset(pageable.getOffset())\n                .limit(pageable.getPageSize())\n                .fetch();\n\n        return new PageImpl<History>(histories, pageable, getCount(petPlantId, historyTypes));\n    }\n\n    private Long getCount(Long petPlantId, List<HistoryType> historyTypes) {\n        return jpaQueryFactory.select(history.count())\n                .from(history)\n                .where(history.petPlant.id.eq(petPlantId), inHistoryType(historyTypes))\n                .fetchOne();\n    }\n\n    private BooleanExpression inHistoryType(List<HistoryType> historyTypes) {\n        if (historyTypes == null || historyTypes.isEmpty()) {\n            return null;\n        }\n\n        return history.historyCategory.historyType.in(historyTypes);\n    }\n}\n```\nê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„ì´ë‹¤. HistoryCustomRepositoryë¥¼ implementsí•œ HistoryCustomRepositoryImplë¥¼ ì‘ì„±í•œë‹¤.\n\nì—¬ê¸°ì„œ **ì¸í„°í˜ì´ìŠ¤ëª…+impl ë„¤ì´ë° ê·œì•½ì„ ë°˜ë“œì‹œ ì§€ì¼œì•¼** í–¥í›„ HistoryRepositoryì— extends í•  ì‹œ í•´ë‹¹ êµ¬í˜„ì²´ê°€ ì£¼ì…ë  ìˆ˜ ìˆë‹¤.\n\në˜ ì—¬ê¸°ì„œ ì‚¬ìš©í•˜ë ¤ëŠ” Q class(QHistory)ë¥¼ ìœ„ì™€ ê°™ì´ static importí•˜ì—¬ ì‚¬ìš©í•œë‹¤.\n\n`import static com.official.pium.domain.QHistory.history;`\n\në¨¼ì €, ìš°ë¦¬ê°€ ìˆ˜í–‰í•˜ë ¤ëŠ” ë™ì‘ê³¼ ë„ì¶œí•˜ê³ ì í•˜ëŠ” ì¿¼ë¦¬ í˜•íƒœëŠ” ì•„ë˜ì™€ ê°™ë‹¤.\n\n> - ê¸°ëŠ¥ : ë¦¬ìŠ¤íŠ¸ë¡œ ë°›ì€ íˆìŠ¤í† ë¦¬ íƒ€ì…ë“¤ì— í•´ë‹¹í•˜ëŠ” íˆìŠ¤í† ë¦¬ë¥¼ ì‹œê°„ìˆœìœ¼ë¡œ ì¡°íšŒí•˜ê³ , í˜ì´ì§• ì •ë³´(size, page)ì— í•´ë‹¹í•˜ëŠ” ë§Œí¼ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.\n\n```\nselect *\n    from\n        history h1_0 \n    join\n        history_category h2_0 \n            on h2_0.id=h1_0.history_category_id \n    where\n        h1_0.pet_plant_id=(ë°˜ë ¤ì‹ë¬¼_id) \n        and h2_0.history_type in (íƒ€ì…1,íƒ€ì…2...) \n    order by\n        h1_0.created_at desc,\n        h1_0.event_date desc \n        offset (í˜ì´ì§€ë²ˆí˜¸ * í˜ì´ì§€ì‚¬ì´ì¦ˆ) rows fetch first (í˜ì´ì§€ì‚¬ì´ì¦ˆ) rows only\n```\n\n![](.index_images/5.png)\n\nì´ì œ ìœ„ ì½”ë“œë¥¼ ì²œì²œíˆ íŒŒì•…í•´ë³´ì.\n\n>**`jpaQueryFactory.selectFrom(history)`**\n\nhistoryë¥¼ ëŒ€ìƒìœ¼ë¡œ select ì§ˆì˜ë¥¼ ìˆ˜í–‰í•¨ì„ ì˜ë¯¸í•œë‹¤\n\n>**`.where(history.petPlant.id.eq(petPlantId), inHistoryType(historyTypes))`**\n\nwhere ì¡°ê±´ë¬¸ì„ ì‚¬ìš©í•˜ëŠ” ì½”ë“œì´ë‹¤. `eq` ë©”ì†Œë“œë¥¼ í†µí•´ íŒŒë¼ë¯¸í„°ë¡œ ì£¼ì…ë°›ì€ `petPlantId`ì™€ì˜ ë¹„êµë¥¼ ìˆ˜í–‰í•œë‹¤.\n\n![](.index_images/6.png)\n\nìœ„ëŠ” `in` ì ˆì„ ìˆ˜í–‰í•˜ëŠ” `inHistoryType` ë©”ì†Œë“œë‹¤. ì—¬ê¸°ì„œ ë°˜í™˜ íƒ€ì…ì„ `BooleanExpression`ìœ¼ë¡œ ì‚¬ìš©í•œ ê²ƒì— ì£¼ëª©í•˜ì. **`BooleanExpression` ì˜ ë°˜í™˜ê°’ì´ nullì¼ ê²½ìš°, ìë™ìœ¼ë¡œ ì¡°ê±´ì ˆì—ì„œ ì œì™¸ëœë‹¤.** ë”°ë¼ì„œ ìš°ë¦¬ëŠ” `historyTypes`ê°€ ë“¤ì–´ì˜¤ì§€ ì•Šì•˜ì„ ê²½ìš°, in ì ˆì„ ìˆ˜í–‰í•˜ì§€ ì•Šë„ë¡ ì§€ì •í–ˆë‹¤.\n\n> **`.orderBy(new OrderSpecifier<>(Order.DESC, history.createdAt), new OrderSpecifier<>(Order.DESC, history.date))`**\n\n`order by`ì˜ Sorting ì¡°ê±´ì„ ì§€ì •í•˜ê¸° ìœ„í•œ ë¶€ë¶„ì´ë‹¤.\n**Sorting ì¡°ê±´ì€ `OrderSpecifier` í´ë˜ìŠ¤ë¡œ ì •ì˜í•´ ì§€ì •í•´ì•¼ í•œë‹¤.**\n\nì²« ì¸ìì— Sorting ë°©í–¥ Enum(Order.DESC)ì„, ë‘ ë²ˆì§¸ ì¸ìì— Sorting ëŒ€ìƒ í•„ë“œ(history.createdAt)ë¥¼ ì§€ì •í•œë‹¤. ìš°ë¦¬ëŠ” Sorting ì¡°ê±´ì´ ë‘ ê°€ì§€ì´ë¯€ë¡œ, ë‘ ê°œì˜ `OrderSpecifier` ë¥¼ ì •ì˜í•´ ì •ë ¬ ìˆœì„œëŒ€ë¡œ ë„£ì–´ì£¼ì—ˆë‹¤.\n\n> **`.offset(pageable.getOffset().limit(pageable.getPageSize())`**\n\ní˜ì´ì§• ì²˜ë¦¬ë¥¼ ìœ„í•œ offset, limitì„ ì§€ì •í•˜ëŠ” ë¶€ë¶„ì´ë‹¤. ì´ ë¶€ë¶„ì€ ê·¸ëƒ¥ Long íƒ€ì…ì„ ë„£ì–´ì£¼ë©´ ëœë‹¤. ë„˜ê¸¸ ë¶€ë¶„ì„ ì§€ì •í•˜ëŠ” offset ê°’ê³¼, ê°€ì ¸ì˜¬ ì–‘ì„ ì§€ì •í•˜ëŠ” limit ê°’ì„ ë„£ì–´ì¤€ë‹¤.(í•´ë‹¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ offset ê°’ì€ Pageable ê°ì²´ì— ë¯¸ë¦¬ ê³„ì‚°ë˜ì–´ ìˆë‹¤)\n\n> **`.fetch()`**\n\n`.fetch()` ë¥¼ í™œìš©í•˜ë©´ ê²°ê³¼ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤. \n\nì—¬ê¸°ì„œ ì£¼ì˜í•  ì ì€ **`.fetch()`ë¥¼ ì‚¬ìš©í•œë‹¤ê³  `fetch join`ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤**. ê²°ê³¼ ë°˜í™˜ ë°©ë²•ì€ ì•„ë˜ ë¸”ë¡œê·¸ì— ìì„¸íˆ ì„¤ëª…ë˜ì–´ ìˆì–´ ì²¨ë¶€í•˜ê² ë‹¤.\n[ì°¸ê³ ](https://devocean.sk.com/blog/techBoardDetail.do?ID=163915)\n\n```java\nprivate Long getCount(Long petPlantId, List<HistoryType> historyTypes) {\nreturn jpaQueryFactory.select(history.count())\n.from(history)\n.where(history.petPlant.id.eq(petPlantId), inHistoryType(historyTypes))\n.fetchOne();\n}\n```\n\nì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” ë ˆì½”ë“œì˜ ì´ ê°œìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” Count ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ëŠ” ë©”ì†Œë“œë‹¤. ê°„ë‹¨í•˜ê²Œ `.select()` ë©”ì†Œë“œì˜ Qclassì— `.count()` ë§Œ ì¶”ê°€í•˜ë©´ count ì¿¼ë¦¬ë¥¼ ìƒì„±í•´ì¤€ë‹¤. \n`.fetchOne()` ì„ í†µí•´ ë‹¨ê±´ìœ¼ë¡œ `Long`ì„ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.\n  \n### ìƒì„±í•œ CustomRepositoryë¥¼ ê¸°ì¡´ ì‚¬ìš©í•˜ë˜ Repositoryì— extends\n\n![](.index_images/7.png)\n\n  ì´ì œ ë§Œë“  CustomRepositoryë¥¼ ê¸°ì¡´ ì‚¬ìš©í•˜ë˜ Repositoryì— extends í•˜ê¸°ë§Œ í•˜ë©´ ê¸°ì¡´ Serviceì— ìƒˆë¡œìš´ ì¸í„°í˜ì´ìŠ¤ í•„ë“œë¥¼ ì„ ì–¸í•˜ì§€ ì•Šê³ ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\n**HistoryService.java**\n ```java\n@Service\n@Transactional(readOnly = true)\n@RequiredArgsConstructor\npublic class HistoryService {\n\n    private final HistoryRepository historyRepository;\n    private final PetPlantRepository petPlantRepository;\n\n    public HistoryResponse read(Long petPlantId, Pageable pageable, Member member, List<String> filters) {\n        PetPlant petPlant = petPlantRepository.findById(petPlantId)\n                .orElseThrow(() -> new NoSuchElementException(\"ì¼ì¹˜í•˜ëŠ” ë°˜ë ¤ ì‹ë¬¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. id :\" + petPlantId));\n\n        if (petPlant.isNotOwnerOf(member)) {\n            throw new IllegalArgumentException(\"ìš”ì²­ ì‚¬ìš©ìì™€ ë°˜ë ¤ ì‹ë¬¼ì˜ ì‚¬ìš©ìê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. id :\" + member.getId());\n        }\n\n        List<HistoryType> historyTypes = new ArrayList<>();\n\n        if (filters != null) {\n            historyTypes = filters.stream()\n                    .map(HistoryType::from)\n                    .toList();\n        }\n\n        Page<History> historyPageByPetPlantId = historyRepository.findAllByPetPlantIdAndHistoryTypes(petPlantId, historyTypes, pageable);\n\n        return HistoryMapper.toHistoryResponse(historyPageByPetPlantId);\n    }\n}\n```\nê¸°ì¡´ì— ì£¼ì…ë°›ì€ `historyRepository`ë¥¼ í™œìš©í•´, ìƒˆë¡œ ìƒì„±í•œ `findAllByPetPlantIdAndHistoryTypes` ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n## ê²°ê³¼\n---\n  ```\n    select\n        h1_0.id,\n        h1_0.created_at,\n        h1_0.event_date,\n        h1_0.history_category_id,\n        h1_0.curr,\n        h1_0.prev,\n        h1_0.pet_plant_id,\n        h1_0.updated_at \n    from\n        history h1_0 \n    join\n        history_category h2_0 \n            on h2_0.id=h1_0.history_category_id \n    where\n        h1_0.pet_plant_id=? \n        and h2_0.history_type in (?,?) \n    order by\n        h1_0.created_at desc,\n        h1_0.event_date desc offset ? rows fetch first ? rows only\n2023-08-16 17:10:47.907 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [1] as [BIGINT] - [1]\n2023-08-16 17:10:47.907 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [2] as [VARCHAR] - [FLOWERPOT]\n2023-08-16 17:10:47.907 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [3] as [VARCHAR] - [LOCATION]\n2023-08-16 17:10:47.907 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [4] as [INTEGER] - [0]\n2023-08-16 17:10:47.907 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [5] as [INTEGER] - [5]\nHibernate: \n    select\n        count(h1_0.id) \n    from\n        history h1_0 \n    join\n        history_category h2_0 \n            on h2_0.id=h1_0.history_category_id \n    where\n        h1_0.pet_plant_id=? \n        and h2_0.history_type in (?,?)\n2023-08-16 17:10:47.919 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [1] as [BIGINT] - [1]\n2023-08-16 17:10:47.919 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [2] as [VARCHAR] - [FLOWERPOT]\n2023-08-16 17:10:47.919 [main] TRACE org.hibernate.orm.jdbc.bind - binding parameter [3] as [VARCHAR] - [LOCATION]\n```\ní…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ ì‹¤ì œ ì–´ë–¤ ì¿¼ë¦¬ê°€ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸í•´ ë³´ë‹ˆ,\nìš°ë¦¬ê°€ ìœ„ì—ì„œ êµ¬í˜„í•˜ê³ ì í–ˆë˜ sql ì¿¼ë¦¬ì™€ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n![](.index_images/8.png)\n\n\ní´ë¼ì´ì–¸íŠ¸ í™”ë©´ì—ì„œë„ í•„í„°ë§ì´ ì˜ ìˆ˜í–‰ ëœë‹¤. ê¸°ë¶„ì´ ì¢‹ë‹¤.\n### ì–´ë–»ê²Œ joinì´ ê±¸ë ¸ì„ê¹Œ?\nìœ„ ì˜ˆì‹œë¥¼ ë³´ë©´ joinì„ í†µí•´ ì—°ê´€ê´€ê³„ê°€ ìˆëŠ” í…Œì´ë¸” ì •ë³´ë¥¼ í•œ ë²ˆì— ê°€ì ¸ì™€ n+1 ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ°ë°, ìš°ë¦¬ëŠ” select where ì„¤ì •ë§Œ í–ˆì„ ë¿, join ì²˜ë¦¬ë¥¼ ë”°ë¡œ í•˜ì§€ ì•Šì•˜ë‹¤. ê·¸ëŸ°ë° ì–´ë–»ê²Œ ì—°ê´€ê´€ê³„ë¥¼ íŒŒì•…í•˜ê³  Querydslì´ joinì„ ìƒì„±í•´ ì¤€ ê±¸ê¹Œ?\n\n**Where ì¡°ê±´ì— ì¶”ê°€ëœ ì—°ê´€ ê´€ê³„ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  join ì¿¼ë¦¬ ìƒì„±**\n\nì•„ê¹Œ where ì¡°ê±´ì—ì„œ ì‚¬ìš©í–ˆë˜ `inHistoryTypes` ë©”ì†Œë“œë¥¼ ë‹¤ì‹œ íŒŒì•…í•´ë³¼ í•„ìš”ê°€ ìˆë‹¤.\n\n![](.index_images/9.png)\n\n`history.historyCategory.historyType.in(historyTypes)` ì™€ ê°™ì€ í˜•íƒœë¡œ ê°ì²´ì˜ ì—°ê´€ê´€ê³„ë¥¼ íƒìƒ‰í•˜ì—¬ `in`ì ˆì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ í•´ë‹¹ ì—°ê´€ê´€ê³„ ì •ë³´ê°€ í•„ìš”í•¨ì„ querydslì´ íŒŒì•…í•˜ê³  join ì¿¼ë¦¬ë¥¼ ì‹¤í–‰ì‹œì¼œì£¼ëŠ” ê²ƒì´ë‹¤.\n\n**Whereì„ ìƒëµí•œ ê²½ìš°**\n![](.index_images/10.png)\n\në§Œì•½ whereì„ ìƒëµí–ˆì„ ë•ŒëŠ” ì—°ê´€ ê´€ê³„ ì •ë³´ê°€ í•„ìš”í•˜ì§€ ì•ŠìŒì„ íŒŒì•…í•˜ë¯€ë¡œ join ì¿¼ë¦¬ê°€ ë‚ ì•„ê°€ì§€ ì•ŠëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ê·¸ë ˆì´'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ë¡œê¹…ì´ë€ ? ìš°ë¦¬ê°€ ì²˜ìŒ ê°œë°œì„ í•  ë•Œ System.out.println(), cout << \"hello world\" << endl, print() ë“±ìœ¼ë¡œ ì›í•˜ëŠ” ëŒ€ë¡œ ë™ì‘í•˜ê³  ìˆëŠ”ì§€ ì¶œë ¥í•˜ê³¤ í–ˆì„ ê²ƒì…ë‹ˆë‹¤. ë˜í•œ ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ ê°™ì€ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ Log ê°ì²´ë¥¼ ì´ìš©í•´ ë¡œê·¸ë¥¼ ë‚¨ê²¨ë³¸ ê²½í—˜ì´ â€¦","fields":{"slug":"/server-logging/"},"frontmatter":{"date":"August 16, 2023","title":"Logbackì„ ì´ìš©í•´ ìš´ì˜ í™˜ê²½ ë³„ ë¡œê·¸ ë‚¨ê¸°ê¸°","tags":["Spring","Logback"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ê·¸ë ˆì´](https://github.com/Kim0914)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ë¡œê¹…ì´ë€ ?\n\nìš°ë¦¬ê°€ ì²˜ìŒ ê°œë°œì„ í•  ë•Œ System.out.println(), cout << \"hello world\" << endl, print() ë“±ìœ¼ë¡œ ì›í•˜ëŠ” ëŒ€ë¡œ ë™ì‘í•˜ê³  ìˆëŠ”ì§€ ì¶œë ¥í•˜ê³¤ í–ˆì„ ê²ƒì…ë‹ˆë‹¤. ë˜í•œ ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ ê°™ì€ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ Log ê°ì²´ë¥¼ ì´ìš©í•´ ë¡œê·¸ë¥¼ ë‚¨ê²¨ë³¸ ê²½í—˜ì´ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n\n\n\nì´ëŸ° ê³¼ì •ì„ ë¡œê¹…ì´ë¼ê³  í•  ìˆ˜ ìˆëŠ”ë°, ì‰½ê²Œ ë§í•´ í”„ë¡œê·¸ë¨ ë™ì‘ì‹œ ë°œìƒí•˜ëŠ” ëª¨ë“  ì¼ì„ ê¸°ë¡í•˜ëŠ” í–‰ìœ„ë¥¼ ë§í•©ë‹ˆë‹¤.\n\n\n\në¡œê¹…ì„ í†µí•´ ì‹œìŠ¤í…œ ë‚´ë¶€ì— ë¬¸ì œê°€ ë°œìƒí•œ ê²½ìš° ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆê³ , ì‚¬ìš©ì ë¡œê·¸ì˜ ê²½ìš° ë¶„ì„ì˜ ë„êµ¬ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\ní•˜ì§€ë§Œ ì¸í„°ë„·ì—ì„œ ë°œìƒí•˜ëŠ” ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ ë¡œê·¸ë¥¼ ë‚¨ê¸°ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?\n\në¡œê·¸ì˜ ì–‘ì´ ë„ˆë¬´ë‚˜ ë°©ëŒ€í•´ì§€ë©° ì›í•˜ëŠ” ë¡œê·¸ë¥¼ ì°¾ëŠ” ë¹„ìš©ì´ ì ì  ì»¤ì§ˆ ê²ƒì…ë‹ˆë‹¤.\n\n\n\nì–´ë–»ê²Œ ë¡œê¹…ì„ íš¨ìœ¨ì ìœ¼ë¡œ í•  ìˆ˜ ìˆì„ê¹Œìš”?\n\n\n\nê°œë°œìê°€ ì›í•˜ëŠ” ì •ë³´ë¥¼ ì•Œë§ì€ ìˆ˜ì¤€ì˜ ë¡œê·¸ë¡œ ë‚¨ê¸¸ ìˆ˜ ìˆë‹¤ë©´ íš¨ìœ¨ì ìœ¼ë¡œ ë¡œê¹…ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në˜í•œ ê°€ìš©í•˜ê³  ìˆëŠ” ì„œë²„ì˜ í™˜ê²½ì— ë”°ë¼ ì ì ˆí•œ ë¡œê¹… ì „ëµì„ ê°€ì ¸ê°„ë‹¤ë©´, ê°œë°œ ê³¼ì •ì—ì„œë„ ë¡œê¹…ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n\n\n## Logback vs Log4j2\n\nìŠ¤í”„ë§ í™˜ê²½ì˜ ëŒ€í‘œì ì¸ ë¡œê¹… í”„ë ˆì„ì›Œí¬ëŠ” `Logback`ê³¼ `Log4j2`ê°€ ìˆìŠµë‹ˆë‹¤.\nê°ê°ì˜ ì¥ë‹¨ì ì´ ìˆì§€ë§Œ í˜„ì¬ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ logbackì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì£¼ì–´ì§„ ê¸°ê°„ ë‚´ì— ë¹ ë¥´ê²Œ ì ìš©í•  ìˆ˜ ìˆê³ , \ní˜„ì¬ í”„ë¡œì íŠ¸ì˜ ê·œëª¨ì—ì„œëŠ” logbackê³¼ log4j2 ì„±ëŠ¥ ì°¨ì´ê°€ í¬ì§€ ì•Šì„ ê²ƒì´ë¼ê³  íŒë‹¨í•´ `logback`ì„ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.\n\n\n## ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ë¡œê·¸ ë‚¨ê¸°ê¸°\n\nìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ë¡œê·¸ë¥¼ ì‰½ê²Œ ë‚¨ê¸¸ ìˆ˜ ìˆë„ë¡ í¸ì˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n\nì´ˆê¸°ì˜ ìŠ¤í”„ë§ì€ JCK(Jakarta Commons Logging)ì„ ì‚¬ìš©í•´ì„œ ë¡œê¹…ì„ êµ¬í˜„í–ˆëŠ”ë°, ìš”ì¦˜ì—ëŠ” Log4j, Logbackìœ¼ë¡œ ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ë¡œê·¸ êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n![](.index_images/img_0.png)\n![](.index_images/img_0-1.png)\n\n\nìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Logback ì„¤ì •ì´ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚´í´ë³´ë©´ slf4jë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nSlf4jëŠ” Simple Logging Facade for Javaë¼ëŠ” ëœ»ìœ¼ë¡œ ë‹¤ì–‘í•œ ë¡œê¹… í”„ë ˆì„ì›Œí¬ì— ëŒ€í•œ ì¶”ìƒí™”(ì¸í„°í˜ì´ìŠ¤) ì—­í• ì„ í•©ë‹ˆë‹¤.\n\nLogbackì€ Slf4jì˜ êµ¬í˜„ì²´ì´ë©° Log4jë¥¼ í† ëŒ€ë¡œ ë§Œë“  í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.\n\nìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œë„ slf4jì™€ Logbackì„ ì±„íƒí•´ì„œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\n![](.index_images/img_1.png)\n\nì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ LoggerFactoryë¥¼ ì§ì ‘ ìƒì„±í•´ ë¡œê·¸ë¥¼ ë‚¨ê¸¸ ìˆ˜ë„ ìˆê³ \n\n![](.index_images/img_2.png)\n\në¡¬ë³µì—ì„œ ì œê³µí•´ ì£¼ëŠ” @Slf4j ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ log ê°ì²´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\në¡¬ë³µìœ¼ë¡œ @Slf4j ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ì»´íŒŒì¼ íƒ€ì„ì— ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¥¼ ìƒì„±í•´ ì¤€ë‹¤.\n\n```java\nprivate static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(LogExample.class);\n```\n\nì§€ê¸ˆê¹Œì§€ ì„¤ëª…í•œ ë°©ë²•ìœ¼ë¡œ ë¡œê·¸ë¥¼ ë‚¨ê¸°ë©´ ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì½˜ì†”ì— ë¡œê·¸ê°€ ë‚¨ê²Œ ë©ë‹ˆë‹¤.\n\nì¦‰ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê»ë‹¤ ì¼œê²Œ ë˜ë©´ ë³„ë„ì˜ outputìœ¼ë¡œ ë¹¼ì„œ ì²˜ë¦¬í•˜ì§€ ì•ŠëŠ” í•œ í•´ë‹¹ ë¡œê·¸ë“¤ì´ ì‚¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤.\n\n\n\në˜í•œ ì›í•˜ëŠ” ë ˆë²¨ ë³„ë¡œ ë¡œê·¸ë¥¼ í™•ì¸í•˜ê¸° ì œí•œì´ ìˆê³ , ë³„ë„ì˜ íŒŒì¼ë¡œ ì €ì¥í•´ ë¡œê·¸ë¥¼ ê´€ë¦¬í•˜ê¸°ì—ë„ ì œí•œì´ ìˆìŠµë‹ˆë‹¤.\n\n\n\nì´ëŸ° ìƒí™©ì„ í•´ê²°í•  ìˆ˜ ìˆëŠ”, logbackì„ í™œìš©í•œ íš¨ê³¼ì ìœ¼ë¡œ ë¡œê¹…í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤.\n\n## Logbackì„ í™œìš©í•´ íš¨ê³¼ì ìœ¼ë¡œ ë¡œê¹…í•˜ê¸°\nìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ì½˜ì†” ë¡œê·¸ì˜ ìˆ˜ì¤€ì„ ë³€ê²½í•˜ëŠ” ë°©ë²•ì€ `application.properties`ë‚˜ `logback-spring.xml` ì—ì„œ ì„¤ì •í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.\n\napplication.propertiesë¡œ ì„¤ì •í•˜ëŠ” ë°©ë²•ì´ ìˆì§€ë§Œ ì„¸ì„¸í•œ ì„¤ì •ì„ í•˜ëŠ”ë° ì œí•œì´ ìˆìŠµë‹ˆë‹¤.\n\nê·¸ëŸ¬ë¯€ë¡œ logback-spring.xmlë¡œ ê´€ë¦¬í•˜ì—¬ ì„¸ë¶€ì ì¸ ì„¤ì •ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\nìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ë¡œê¹… ì„¤ì • íŒŒì¼ì˜ ë„¤ì´ë°ì— ê´€í•œ ê·œì¹™ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\n\n\n\nìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ë¡œë”©ë˜ëŠ” ì‹œì ì— ë¡œê·¸ ì„¤ì • íŒŒì¼ì´ í”„ë¡œì íŠ¸ ë‚´ì— ì¡´ì¬í•˜ëŠ”ì§€ ìŠ¤ìº”í•˜ëŠ”ë°\n\n\n\n1. logback-spring.xml\n\n2. logback-spring.groovy\n\n3. logback.xml\n\n4. logback.grooby\n\n\n\në“±ì˜ íŒŒì¼ì„ ìŠ¤ìº”í•˜ê³  ë°œê²¬í•˜ë©´ í•´ë‹¹ íŒŒì¼ì— ì •ì˜ëœ ë¡œê·¸ ì„¤ì •ì„ ì ìš©í•©ë‹ˆë‹¤.\n\n\n\nì—¬ê¸°ì„œ logback-spring.xmlì€ Spring Bootì— íŠ¹í™”ëœ ì„¤ì • íŒŒì¼ì…ë‹ˆë‹¤.\n\nì´ íŒŒì¼ì„ ì‚¬ìš©í•˜ë©´ Spring Bootì˜ ë¡œê¹… í™•ì¥ ê¸°ëŠ¥ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´, í”„ë¡œíŒŒì¼ì— ë”°ë¥¸ ë¡œê·¸ ë ˆë²¨ ì„¤ì •ì´ë‚˜ Spring í™˜ê²½ ë³€ìˆ˜ë¥¼ ë¡œê¹… ì„¤ì •ì— ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ì€ ê¸°ëŠ¥ë“¤ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\në§Œì•½ ë‹¤ë¥¸ íŒŒì¼ ì´ë¦„ìœ¼ë¡œ ëœ ë¡œê·¸ ì„¤ì • íŒŒì¼ì„ ì‚¬ìš©í•˜ê³  ì‹¶ìœ¼ë©´ logging.config ê°’ì„ ë³€ê²½í•œ í›„ í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì‹œ JVM ì¸ìë¡œ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.\n\n\n\nLogback ì„¤ì •ì„ í•˜ê¸° ì „, êµ¬ì¡°ë¥¼ ê°„ë‹¨í•˜ê²Œ ì‚´í´ë³´ë©´ Logbackì€ í¬ê²Œ 3ê°€ì§€ `Logger`, `Appender`, `Layout`ì˜ êµ¬ì„± ìš”ì†Œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\n\n![](.index_images/img_3.png)\n`Logger`ëŠ” ë¡œê¹…ì„ ìˆ˜í–‰í•˜ëŠ” ì£¼ìš” ê°ì²´ì…ë‹ˆë‹¤. \në¡œê±°ëŠ” ì´ë¦„ì„ ê°€ì§€ë©° ì£¼ë¡œ íŒ¨í‚¤ì§€ ì´ë¦„ ë˜ëŠ” í´ë˜ìŠ¤ ì´ë¦„ê³¼ ì¼ì¹˜í•˜ê²Œ ì„¤ì •í•©ë‹ˆë‹¤. \në˜í•œ ë¡œê±°ëŠ” ê³„ì¸µ êµ¬ì¡°ë¥¼ ê°€ì§€ëŠ”ë° ROOT ë¡œê±°ëŠ” ëª¨ë“  ë¡œê±°ì˜ ìƒìœ„ ë¡œê±°ì…ë‹ˆë‹¤.\n\n![](.index_images/img_4.png)\n`Appender`ëŠ” ë¡œê¹… ì´ë²¤íŠ¸ë¥¼ íŠ¹ì • ì¶œë ¥ ëŒ€ìƒìœ¼ë¡œ ì „ì†¡í•˜ëŠ” êµ¬ì„± ìš”ì†Œì…ë‹ˆë‹¤. \nì‰½ê²Œ ë§í•´ ë¡œê·¸ ë©”ì„¸ì§€ê°€ ì¶œë ¥í•  ëŒ€ìƒì„ ê²°ì •í•œë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \nì½˜ì†”ì— ì¶œë ¥í• ì§€, íŒŒì¼ì— ì¶œë ¥í• ì§€ ë“±ë“±.\n\n**ê° ë¡œê±°ëŠ” í•˜ë‚˜ ì´ìƒì˜ Appenderì— ì—°ê²°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**\n\n![](.index_images/img_5.png)\n`Layout`ì€ ë¡œê¹… ì´ë²¤íŠ¸ê°€ ì–´ë–»ê²Œ í¬ë§·ë˜ì–´ ì¶œë ¥ë ì§€ ê²°ì •í•˜ëŠ” êµ¬ì„± ìš”ì†Œì…ë‹ˆë‹¤. \nì‚¬ìš©ìê°€ ì§€ì •í•œ í˜•ì‹ìœ¼ë¡œ ë¡œê·¸ ë©”ì„¸ì§€ë¥¼ ë³€í™˜í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. \nì˜ˆë¥¼ ë“¤ì–´ ìë°”ì—ì„œ ë¬¸ìì—´ í¬ë§·íŒ…ê³¼ ë¹„ìŠ·í•˜ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n  \n  \nì´ì œ ë¡œê·¸ë¥¼ ë‚¨ê¸°ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\n\n## logback-spring.xml ì‘ì„± & í™˜ê²½ ë³„ ë¡œê·¸ ì‘ì„±\n\n### 1. **logback-spring.xml ìƒì„±**\n```html\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<configuration>\n <!-- ì¶”ê°€í•  ê¸°ëŠ¥ì„ ì‘ì„±í•  ê³³. -->\n</configuration>\n```\n### 2. **appenderì™€ patternì„ ì´ìš©í•´ ë¡œê·¸ ì¶œë ¥ ìœ„ì¹˜ì™€ ì¶œë ¥ë˜ëŠ” í˜•ì‹ ì§€ì •**\n```html\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<configuration>\n    <conversionRule conversionWord=\"clr\" converterClass=\"org.springframework.boot.logging.logback.ColorConverter\"/>\n\n    <property name=\"CONSOLE_LOG_PATTERN\"\n              value=\"%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %clr(%5level) %cyan(%logger) - %msg%n\"/>\n\n    <appender name=\"CONSOLE\" class=\"ch.qos.logback.core.ConsoleAppender\">\n        <encoder>\n            <pattern>${CONSOLE_LOG_PATTERN}</pattern>\n        </encoder>\n    </appender>\n\n    <root level=\"INFO\">\n        <appender-ref ref=\"CONSOLE\"/>\n    </root>\n</configuration>\n```\n\npropertyë¥¼ ì´ìš©í•´ ë³€ìˆ˜ì²˜ëŸ¼ ì„ ì–¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§ˆì¹˜ ìë°”ì—ì„œ ìƒìˆ˜í™”ë¥¼ ì‹œí‚¤ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\nì½˜ì†”ì—ëŠ” ìƒ‰ì„ í¬í•¨í•´ ì´ì˜ê²Œ ì¶œë ¥í•˜ê¸° ìœ„í•´ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” Logback ì»¨ë²„í„° ColorConverter íƒœê·¸ë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.\n\n\n\nì‘ì„±í•œ ë¡œê·¸ íŒ¨í„´ \"%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %clr(%5level) %cyan(%logger) - %msg%n\"ì„ ì‚´í´ë³´ë©´\n\n\n\n- %d{yyyy-MM-dd HH:mm:ss.SSS}: ë¡œê·¸ ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ ë‚ ì§œì™€ ì‹œê°„ì„ yyyy-MM-dd HH:mm:ss.SSS í˜•ì‹ìœ¼ë¡œ í‘œì‹œ.\n\n\n\n- [%thread]: í˜„ì¬ ë¡œê·¸ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ ìŠ¤ë ˆë“œì˜ ì´ë¦„ì„ í‘œì‹œ.\n\n\n\n- %clr(%5level): clr ë³€í™˜ í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ ë ˆë²¨ (INFO, ERROR ë“±)ì„ ì ì ˆí•œ ìƒ‰ìƒìœ¼ë¡œ ì¶œë ¥.\n\n\n\n- %cyan(%logger): ë¡œê±° ì´ë¦„ (%logger)ì„ ì‹œì•ˆìƒ‰ (cyan)ìœ¼ë¡œ ì¶œë ¥.\n\n\n\n- %msg: ë¡œê·¸ ë©”ì‹œì§€ì˜ ë‚´ìš©ì„ í‘œì‹œ.\n\n\n\n- %n: ì¤„ ë°”ê¿ˆ ë¬¸ì.\n\n\n  \nappenderì˜ ì´ë¦„ì€ CONSOLEë¡œ ì§€ì •í•˜ê³  patternì€ ì•ì„œ propertyì—ì„œ ì •ì˜í•œ CONSOLE_LOG_PATTERNì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n\n\në§ˆì§€ë§‰ìœ¼ë¡œ ë¡œê±° ë ˆë²¨ì„ INFOë¡œ ì„¤ì •í•˜ê³  ì‚¬ìš©í•  appenderë¥¼ appender-ref íƒœê·¸ë¥¼ ì´ìš©í•´ ëª…ì‹œí•©ë‹ˆë‹¤.\n\n![](.index_images/img_6.png)\nìœ„ì™€ ê°™ì´ ì¶œë ¥ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n  \n   \n### 3. **í™˜ê²½ ë³„ë¡œ ë¡œê·¸ ë‚¨ê¸°ëŠ” ë°©ë²• ë‚˜ëˆ„ê¸°**\n   \ní˜„ì¬ ì €í¬ íŒ€ì€ ìš´ì˜ ì„œë²„, ê°œë°œ ì„œë²„ë¥¼ ë‚˜ëˆ„ì–´ ê°€ìš© ì¤‘ì— ìˆê³  íŒ€ì›ë“¤ì´ ë¡œì»¬ë¡œ ê°œë°œí•˜ëŠ” í™˜ê²½ê¹Œì§€ ì´ 3ê°œì˜ í™˜ê²½ì—ì„œ ì„œë²„ë¥¼ ìš´ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\n\n\në¡œì»¬ ì„œë²„ì˜ ê²½ìš° DBë¡œ ë‚ ì•„ê°€ëŠ” ì¿¼ë¦¬ë¥¼ ëª¨ë‘ í™•ì¸í•  í•„ìš”ê°€ ìˆê³ , í•„ìš”í•œ ê²½ìš° DEBUG ìˆ˜ì¤€ì˜ ë¡œê·¸ë„ í™•ì¸í•˜ëŠ” ìƒí™©ì´ ìƒê¹ë‹ˆë‹¤.\n\nê°œë°œ ì„œë²„ì˜ ê²½ìš° ì‹¤ì œ ì‚¬ìš©ìë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ë¡œê·¸ê°€ ì•„ë‹Œ, ê°œë°œ ë‹¨ê³„ì—ì„œ í•„ìš”í•œ ì¿¼ë¦¬ í™•ì¸, ê°œë°œìê°€ ì˜ë„í•œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ëŠ”ì§€ ë“±ì˜ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.\n\nìš´ì˜ ì„œë²„ì˜ ê²½ìš° ì¿¼ë¦¬ë‚˜ ì˜ë„í•œ ì˜ˆì™¸ë¥¼ í™•ì¸í•˜ëŠ” ë¡œê·¸ë³´ë‹¤ëŠ”, ì˜ˆìƒí•˜ì§€ ëª»í•œ ì—ëŸ¬(NPE, ISE)ë“±ì´ ë°œìƒí–ˆì„ ë•Œ ì—ëŸ¬ì— ëŒ€í•œ ë¡œê·¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.\n\n\n\në˜í•œ ê°œë°œ ì„œë²„, ìš´ì˜ ì„œë²„ëŠ” ì½˜ì†” outputì´ ì•„ë‹Œ ë³„ë„ì˜ íŒŒì¼ì— ë¡œê·¸ë¥¼ ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤.\n\n\n\nê·¸ëŸ¬ë¯€ë¡œ ê° í™˜ê²½ë§ˆë‹¤ ë¡œê·¸ ì „ëµì„ ë‹¤ë¥´ê²Œ ê°€ì ¸ê°€ì•¼ í•©ë‹ˆë‹¤.\n\n```html\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<configuration>\n    <conversionRule conversionWord=\"clr\" converterClass=\"org.springframework.boot.logging.logback.ColorConverter\"/>\n\n    <property name=\"CONSOLE_LOG_PATTERN\"\n              value=\"%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %clr(%5level) %cyan(%logger) - %msg%n\"/>\n    <property name=\"FILE_LOG_PATTERN\" value=\"%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %5level %logger - %msg%n\"/>\n    \n    <appender name=\"CONSOLE\" class=\"ch.qos.logback.core.ConsoleAppender\">\n        <encoder>\n            <pattern>${CONSOLE_LOG_PATTERN}</pattern>\n        </encoder>\n    </appender>\n    \n    <appender name=\"FILE-INFO\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <encoder>\n            <pattern>${FILE_LOG_PATTERN}</pattern>\n        </encoder>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\">\n            <fileNamePattern>./log/pium-dev-%d{yyyy-MM-dd}.%i.log</fileNamePattern>\n            <maxFileSize>50MB</maxFileSize>\n            <maxHistory>30</maxHistory>\n            <totalSizeCap>1GB</totalSizeCap>\n        </rollingPolicy>\n    </appender>\n\n    <appender name=\"FILE-ERROR\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <filter class=\"ch.qos.logback.classic.filter.LevelFilter\">\n            <level>ERROR</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <encoder>\n            <pattern>${FILE_LOG_PATTERN}</pattern>\n        </encoder>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\">\n            <fileNamePattern>./log/pium-prod-%d{yyyy-MM-dd}.%i.log</fileNamePattern>\n            <maxFileSize>50MB</maxFileSize>\n            <maxHistory>30</maxHistory>\n            <totalSizeCap>3GB</totalSizeCap>\n        </rollingPolicy>\n    </appender>\n    \n    <root level=\"INFO\">\n        <appender-ref ref=\"CONSOLE\"/>\n    </root>\n</configuration>\n```\n\nìš°ì„  íŒŒì¼ë¡œ ì¶œë ¥í•˜ê¸° ìœ„í•œ propertyì™€ appenderë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. \nPropertyëŠ” ì½˜ì†”ì—ì„œ ì§€ì •í•œ ë°©ë²•ê³¼ ë™ì¼í•˜ì§€ë§Œ íŒŒì¼ì— ì €ì¥í•˜ëŠ” ê²½ìš°ì—ëŠ” ìƒ‰ì´ ë“¤ì–´ê°ˆ í•„ìš”ê°€ ì—†ê³ , ìƒ‰ ì½”ë“œê°€ ë“¤ì–´ê°€ë©´ ê¸€ìê°€ ê¹¨ì§€ëŠ” í˜„ìƒì´ ë°œìƒí•©ë‹ˆë‹¤. \nê·¸ëŸ¬ë¯€ë¡œ ìƒ‰ì„ ì œê±°í•œ íŒ¨í„´ì„ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\nAppenderì˜ ê²½ìš° Fileë¡œ ë¡œê·¸ë¥¼ ë‚¨ê¸°ê¸° ìœ„í•´ RollingFileAppenderë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. \n`INFO`ì™€ `ERROR`ë¡œ appenderë¥¼ êµ¬ë¶„í•´ ë ˆë²¨ ìˆ˜ì¤€ì— ë”°ë¼ ë³„ë„ì˜ appenderë¡œ ë¶„ë¦¬í–ˆìŠµë‹ˆë‹¤. \nRollingFileAppenderëŠ” **maxFileSize**ì™€ **maxHistory**, **totalSizeCap** ì„¤ì •ì„ í†µí•´ í•œ ë¡œê·¸ íŒŒì¼ì˜ ìµœëŒ€ í¬ê¸°, ë©°ì¹  ë™ì•ˆ ë³´ê´€í• ì§€, ëª¨ë“  ë¡œê·¸ íŒŒì¼(./logs/..)ì˜ í¬ê¸°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![](.index_images/img_7.png)\n\ní™˜ê²½ ë³„ë¡œ ë¶„ë¦¬í•˜ê¸°ì— ì•ì„œ, **ê° appender ë“¤ì€ ë¶„ë¦¬ í•˜ì—¬ ì„¤ì • íŒŒì¼ë¡œ ì €ì¥í•´ ë‘ë©´ ì¬ì‚¬ìš©ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**\n\nìœ„ì—ì„œ ì‘ì„±í•œ console, file-info, file-error appender ë“¤ì„ ê°ê°ì˜ xml íŒŒì¼ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.\n\nìë°”ì—ì„œ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ ë§¥ë½ì…ë‹ˆë‹¤.\n\n**console-appender.xml**\n```html\n<included>\n    <appender name=\"CONSOLE\" class=\"ch.qos.logback.core.ConsoleAppender\">\n        <encoder>\n            <pattern>${CONSOLE_LOG_PATTERN}</pattern>\n        </encoder>\n    </appender>\n</included>\n```\n\n**file-info-appender.xml**\n```html\n<included>\n    <appender name=\"FILE-INFO\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <encoder>\n            <pattern>${FILE_LOG_PATTERN}</pattern>\n        </encoder>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\">\n            <fileNamePattern>./log/pium-dev-%d{yyyy-MM-dd}.%i.log</fileNamePattern>\n            <maxFileSize>50MB</maxFileSize>\n            <maxHistory>30</maxHistory>\n            <totalSizeCap>1GB</totalSizeCap>\n        </rollingPolicy>\n    </appender>\n</included>\n```\n\n**file-error-appender.xml**\n```html\n<included>\n    <appender name=\"FILE-ERROR\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <filter class=\"ch.qos.logback.classic.filter.LevelFilter\">\n            <level>ERROR</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <encoder>\n            <pattern>${FILE_LOG_PATTERN}</pattern>\n        </encoder>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\">\n            <fileNamePattern>./log/pium-prod-%d{yyyy-MM-dd}.%i.log</fileNamePattern>\n            <maxFileSize>50MB</maxFileSize>\n            <maxHistory>30</maxHistory>\n            <totalSizeCap>3GB</totalSizeCap>\n        </rollingPolicy>\n    </appender>\n</included>\n```\n\nì´ì œ í™˜ê²½ë³„ë¡œ ë¡œê·¸ ì „ëµì„ ë¶„ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.\n\n```html\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<configuration>\n    <include resource=\"org/springframework/boot/logging/logback/defaults.xml\"/>\n    <conversionRule conversionWord=\"clr\" converterClass=\"org.springframework.boot.logging.logback.ColorConverter\"/>\n\n    <property name=\"CONSOLE_LOG_PATTERN\"\n              value=\"%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %clr(%5level) %cyan(%logger) - %msg%n\"/>\n    <property name=\"FILE_LOG_PATTERN\" value=\"%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %5level %logger - %msg%n\"/>\n\n    <!--local-->\n    <springProfile name=\"local\">\n        <include resource=\"console-appender.xml\"/>\n\n        <root level=\"INFO\">\n            <appender-ref ref=\"CONSOLE\"/>\n        </root>\n    </springProfile>\n\n    <!--dev-->\n    <springProfile name=\"dev\">\n        <include resource=\"file-info-appender.xml\"/>\n\n        <root level=\"INFO\">\n            <appender-ref ref=\"FILE-INFO\"/>\n        </root>\n\n        <logger level=\"DEBUG\" name=\"org.hibernate.SQL\">\n            <appender-ref ref=\"FILE-INFO\"/>\n        </logger>\n\n        <logger level=\"TRACE\" name=\"org.hibernate.type.descriptor.sql.BasicBinder\">\n            <appender-ref ref=\"FILE-INFO\"/>\n        </logger>\n    </springProfile>\n\n    <!--prod-->\n    <springProfile name=\"prod\">\n        <include resource=\"file-error-appender.xml\"/>\n\n        <root level=\"ERROR\">\n            <appender-ref ref=\"FILE-ERROR\"/>\n        </root>\n    </springProfile>\n\n</configuration>\n```\n\n`springProfile` íƒœê·¸ë¥¼ ì´ìš©í•´ local, dev, prodë¡œ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\ninclude íƒœê·¸ë¥¼ ì´ìš©í•´ ì–´ë–¤ appenderë¥¼ ì‚¬ìš©í• ì§€ ì¶”ê°€í•©ë‹ˆë‹¤. ìë°”ì—ì„œ importì™€ ë™ì¼í•˜ë‹¤ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.\n\nì´í›„ ê° profile ë³„ë¡œ ë¡œê·¸ ë ˆë²¨ì„ ì„¤ì •í•˜ê³  í•„ìš”í•œ appenderë¥¼ appender-ref íƒœê·¸ì— ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.\n\n\n\nê°œë°œ ì„œë²„ì˜ ê²½ìš° ì¿¼ë¦¬ì™€ ì¿¼ë¦¬ì— ë°”ì¸ë”©ë˜ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ DEBUG, TRACE ë ˆë²¨ì˜ appenderë¥¼ ì¶”ê°€í•´ ì¤¬ìŠµë‹ˆë‹¤.\n\n\n\në¡œì»¬ì€ localë¡œ profileì„ êµ¬ë¶„í•´ë„ ë˜ê³ , ì•„ë¬´ëŸ° profileì„ ì„ ì–¸í•˜ì§€ ì•Šìœ¼ë©´ defaultë¡œ í•´ë‹¹ ì„¤ì •ì„ ì½ê¸° ë•Œë¬¸ì— êµ¬ë¶„í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.\n\në§Œì•½ localë¡œ profileì„ ì„¤ì •í•œ ê²½ìš°ì—ëŠ” ì¸í…”ë¦¬ì œì´ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•´ì•¼ ì½˜ì†” ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![](.index_images/img8.png)\n\ndev, prod í™˜ê²½ì—ì„œì˜ ë¡œê¹…ì„ ì¸í…”ë¦¬ì œì´ë¡œ í™•ì¸í•˜ê³  ì‹¶ì€ ê²½ìš°ì—ëŠ” ë™ì¼í•˜ê²Œ profilesì— ì…ë ¥í•˜ê³  RUN í•˜ë©´ ë©ë‹ˆë‹¤.\n\n### Reference\n\n- https://www.baeldung.com/logback\n- https://www.youtube.com/watch?v=1MD5xbwznlI\n- https://www.youtube.com/watch?v=JqZzy7RyudI \n\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì°¸ìƒˆ'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì™œ Cypressë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‚˜ tanstack queryì˜ ì—ì„œ ê¸°ì¡´ì—ëŠ”  ì„¤ì •ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì—ˆì–´ìš”. \nê·¼ë° ì´ í•¨ìˆ˜ë¥¼ ë¦¬íŒ©í„°ë§í•˜ë©´ì„œ  ì„¤ì •ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ê³³ì—ì„œ ë¥¼ ì ìš©í•˜ì§€ ì•Šì•˜ê³ , ê²°êµ­ ê°œë°œ ì„œë²„ì— ì˜¬ë¼ê°„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ í„°ì§€ëŠ” ì‚¬ê³ ê°€ ìƒê²¼ìŠµë‹ˆë‹¤. ì´â€¦","fields":{"slug":"/github-actions-cypress/"},"frontmatter":{"date":"August 14, 2023","title":"í”¼ì›€ Cypress ìë™í™” êµ¬ì¶•ê¸°","tags":["CI","Cypress","í…ŒìŠ¤íŠ¸ ìë™í™”"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì°¸ìƒˆ](https://github.com/WaiNaat)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n \n\n## ìš°ë¦¬ëŠ” ì™œ Cypressë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‚˜\n\ntanstack queryì˜ `useQuery`ì—ì„œ ê¸°ì¡´ì—ëŠ” `suspense` ì„¤ì •ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì—ˆì–´ìš”. \nê·¼ë° ì´ í•¨ìˆ˜ë¥¼ ë¦¬íŒ©í„°ë§í•˜ë©´ì„œ `suspense: true` ì„¤ì •ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ê³³ì—ì„œ `<Suspense>`ë¥¼ ì ìš©í•˜ì§€ ì•Šì•˜ê³ , ê²°êµ­ ê°œë°œ ì„œë²„ì— ì˜¬ë¼ê°„ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ í„°ì§€ëŠ” ì‚¬ê³ ê°€ ìƒê²¼ìŠµë‹ˆë‹¤.\n\nì´ëŸ¬í•œ ë¬¸ì œë¥¼ ì˜ˆë°©í•˜ê¸° ìœ„í•´ì„œ ë¦¬íŒ©í„°ë§ ì´í›„ì—ë„ Cypressë¡œ ê¸°ì¡´ì— ëŒì•„ê°€ë˜ ë‹¤ë¥¸ ê¸°ëŠ¥ì´ ëŒì•„ê°ì„ ë³´ì¥í•˜ê³ ì í–ˆì–´ìš”.\n\nì´ ê¸€ì€ Cypressì˜ ê¸°ë³¸ì ì¸ ì‚¬ìš©ë²•ì€ ì•Œê³  ìˆë‹¤ëŠ” ê°€ì • í•˜ì— ì“°ì—¬ì¡ŒìŠµë‹ˆë‹¤.\n\n## ì„¤ì¹˜ì™€ ì‹¤í–‰\n\nCypress ì„¤ì¹˜ëŠ” ê°„ë‹¨í•˜ê²Œ ë„˜ì–´ê°ˆê²Œìš”.\n\n```shell\nnpm install --save-dev cypress\n```\n\npackage.jsonì— Cypress ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ë„ ë„£ì–´ì¤ë‹ˆë‹¤.\n\n```json\nscripts: {\n    \"cypress\": \"cypress open\"\n}\n```\n\nì‹¤í–‰í•´ë³¼ê¹Œìš”?\n\n```shell\nnpm run cypress\n```\n\në§¨ ì²˜ìŒ ì‹¤í–‰í–ˆì„ ë•ŒëŠ” ì„¤ì •ì´ ë˜ì§€ ì•Šì€ ìƒíƒœì…ë‹ˆë‹¤.\nì €í¬ëŠ” E2E í…ŒìŠ¤íŠ¸ë¥¼ í•  ê±°ë‹ˆê¹Œ `E2E Testing`ì„ ëˆŒëŸ¬ìš”.\n\n![e2e í…ŒìŠ¤íŠ¸ ì„ íƒì°½](.index_images/01-e2e.png)\n\nê·¸ëŸ¬ë©´ ìë™ìœ¼ë¡œ ì„¤ì •ì´ ë©ë‹ˆë‹¤.\n\n![ìë™ config](.index_images/02-config.png)\n\n![ë¸Œë¼ìš°ì € ì„ íƒ](.index_images/03-browser.png)\n\n![e2e í…ŒìŠ¤íŠ¸ ì„ íƒì°½](.index_images/04-first-test.png)\n\në§Œì•½ `cy.visit`ì„ í¸í•˜ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´ `cypress.config.ts`ì— ì•„ë˜ ì„¤ì •ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”!\n\n```ts\nexport default defineConfig({\n  e2e: {\n    baseUrl: 'http://localhost:8282',\n  },\n});\n```\n\n## íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì˜¤ë¥˜ í•´ê²°í•˜ê¸°\n\nì„¤ë ˆëŠ” ë§ˆìŒìœ¼ë¡œ ì²« í…ŒìŠ¤íŠ¸ë¥¼ ì“°ë ¤ê³  í–ˆëŠ”ë°\n\n![ì½”ë“œì— ë¹¨ê°„ ì¤„](.index_images/05-error.png)\n\nì´ëŸ°! ë²Œì¨ ëŠë‚Œì´ ì¢‹ì§€ ì•Šë„¤ìš”..\n\n![](.index_images/06-error-code.png)\n\nì €í•œí…Œ ì™œ ì´ëŸ¬ëŠ” ê±¸ê¹Œìš”? ì‚´í´ë´…ì‹œë‹¤.\n\n![](.index_images/07-error-details-1.png)\n\n![](.index_images/08-error-details-2.png)\n\níƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì œë„¤ìš”. [ê°™ì€ ë¬¸ì œë¥¼ ê²ªìœ¼ì‹  ë¶„ë“¤ì˜ í•´ê²°ì±…](https://github.com/vuejs/vue-cli/issues/4239#issuecomment-1214261721)ìœ¼ë¡œ ê¸ˆë°© ì²˜ë¦¬í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. `tsconfig.json`ì— Cypressë¥¼ ì´í•´í•  ìˆ˜ ìˆë‹¤ëŠ” ìš©ê¸°ë¥¼ ë¶ˆì–´ë„£ì–´ ì£¼ì„¸ìš”.\n\n```json\n\"compilerOptions\": {\n\t\t\"types\": [\"cypress\"]\n},\n\"include\": [\"cypress/**/*\"]\n```\n\n![](.index_images/09-good.png)\n\nì¢‹ì•„ìš” ì¢‹ì•„ìš”\n\n## í…ŒìŠ¤íŠ¸ ì‘ì„±\n\nì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ ì—´ì‹¬íˆ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.\n\n```ts\ndescribe('í”¼ì›€ ë©”ì¸ í˜ì´ì§€', () => {\n  beforeEach(() => {\n    cy.visit('http://localhost:8282');\n  });\n\n  it('í”¼ì›€ ì†Œê°œ ë¬¸êµ¬ê°€ ë³´ì¸ë‹¤.', () => {\n    cy.contains('ì‹ë¬¼ì„ ì‰½ê²Œ')\n      .get('img[alt=\"logo\"]')\n      .contains('í”¼ì›€ì— ë“±ë¡ëœ ì‹ë¬¼ì„ ê²€ìƒ‰í•´ ë³´ì„¸ìš”');\n  });\n\n  it('ê²€ìƒ‰ì°½ì„ ì´ìš©í•´ ì‹ë¬¼ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆë‹¤.', () => {\n    cy.get('input')\n      .type('ì•„ì¹´ì‹œ')\n      .wait(300)        // ê²€ìƒ‰ì°½ì— ë””ë°”ìš´ìŠ¤ê°€ ë˜ì–´ ìˆì–´ì„œ ê¸°ë‹¤ë¦¼\n      .contains('ì•„ì¹´ì‹œ')\n      .contains('ì•„ì¹´ì‹œì•„');\n  });\n});\n```\n\n## Github Actions ì ìš©\n\nì´ì œ Github Actionsë¥¼ ì´ìš©í•´ PRì´ ì˜¬ë¼ì˜¬ ë•Œë§ˆë‹¤ ì‘ì„±í•œ í…ŒìŠ¤íŠ¸ë¥¼ ëŒë ¤ì„œ ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤.\n\nì‚¬ì‹¤ ê¸°ë³¸ì ì¸ ë°©ë²•ì€ [Cypress ê³µì‹ í™ˆí˜ì´ì§€](https://docs.cypress.io/guides/continuous-integration/github-actions)ì— ì˜ ë‚˜ì™€ ìˆì–´ìš”!\n`cypress-io/github-action@v5`ë¥¼ ì‚¬ìš©í•˜ë©´ ìë™ì ìœ¼ë¡œ Cypressë¥¼ ì—´ì–´ì„œ ì•ˆì— ìˆëŠ” ëª¨ë“  specë“¤ì„ í•œ ë²ˆì”© ëŒë ¤ë´…ë‹ˆë‹¤. ê²°ê³¼ ìš”ì•½ë„ ë‚˜ì¤‘ì— Actions ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë©´ ì•Œ ìˆ˜ ìˆì–´ìš”.\n\n```yml\nname: Frontend E2E Test\n\non:\n  # developê³¼ main branchì— pushë˜ì—ˆì„ ê²½ìš° í…ŒìŠ¤íŠ¸ ì§„í–‰\n  # PR ë¨¸ì§€ í›„ì— í˜¹ì‹œ ê¹¨ì§€ëŠ”ì§€ í™•ì¸ ê°€ëŠ¥\n  push:\n    branches:\n      - develop\n      - main\n    # í”¼ì›€ ë ˆí¬ì§€í† ë¦¬ êµ¬ì¡° ìƒ í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œëŠ” `{root}/frontend`ì— ì¡´ì¬\n    paths:\n      - frontend/**\n  # PRì´ ì—´ë ¸ì„ ê²½ìš° í™•ì¸\n  # branch ì„¤ì •ì„ í†µí•´ í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ì§€ ì•Šìœ¼ë©´ ë¨¸ì§€ ë¶ˆê°€ ì„¤ì •ë„ ê°€ëŠ¥\n  pull_request:\n    branches:\n      - develop\n      - main\n    paths:\n      - frontend/**\n\ndefaults:\n  run:\n    working-directory: frontend\n\npermissions:\n  checks: write\n\njobs:\n  cypress:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Set up repository\n        uses: actions/checkout@v3\n\n      - name : Set up Node 18.16.0 \n        uses: actions/setup-node@v3\n        with:\n          node-version: 18.16.0\n\n      # package-lock.jsonì´ ë°”ë€Œì§€ ì•Šì•˜ì„ ê²½ìš° ìºì‹œí•œ node_module ì‚¬ìš©\n      # npm install ì‹œê°„ ì ˆì•½\n      - name: Cache node_modules\n        id: cache\n        uses: actions/cache@v3\n        with:\n          path: '**/node_modules'\n          key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}\n          restore-keys: | \n            ${{ runner.os }}-node-\n          \n      - name: Install dependencies\n        run: npm ci\n        if: steps.cache.outputs.cache-hit != 'true'\n\n      # í…ŒìŠ¤íŠ¸ ìë™ ì§„í–‰\n      - name: Run Cypress\n        uses: cypress-io/github-action@v5\n        with:\n          start: npm run start\n```\n\nì´ íŒŒì¼ì„ `{repo_root}/.github/workflows/` ì•ˆì— ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.\n\n## ê²½ë¡œ ì„¤ì • ë¬¸ì œ!\n\nì‚¬ì‹¤ ì´ë ‡ê²Œ ì„¸íŒ…í•˜ë‹ˆê¹Œ Github Actionì„ ì‹¤í–‰í•  ë•Œ ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ìƒê¸°ë”ë¼êµ¬ìš”. í”¼ì›€ ë ˆí¬ì§€í† ë¦¬ êµ¬ì¡° ìƒ í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œëŠ” `{repo_root}/frontend`ì— ìˆëŠ”ë° ìê¾¸ ë£¨íŠ¸ í´ë”ì—ì„œ `package-lock.json`ì„ ì°¾ì•„ì„œ ë‚˜ì˜¤ëŠ” ë¬¸ì œì˜€ìŠµë‹ˆë‹¤.\n\n![](.index_images/11-error.png)\n\nì•„ë˜ ì½”ë“œì²˜ëŸ¼ cypressë¥¼ ëŒë¦´ ë•Œ ì‹œì‘ì ì„ ì •í•´ ì£¼ë‹ˆê¹Œ í•´ê²°ëì–´ìš”.\n\n```yml\n      - name: Run Cypress\n        uses: cypress-io/github-action@v5\n        with:\n\t  working-directory: frontend\n          start: npm run start\n```\n\n## ì™„ë£Œ\n\n![](.index_images/12.png)\n\nì§€ê¸ˆ ì´ ìˆœê°„ì—ë„ í”¼ì›€ íŒ€ì˜ ë ˆí¬ì§€í† ë¦¬ì—ì„œëŠ” Cypressê°€ ëŒì•„ê°€ê³  ìˆë‹¤ëŠ” ê´´ë‹´ì´ ë“¤ë ¤ì˜µë‹ˆë‹¤..\n\n\n## Reference\n\n- [Cypress typings not recognized. Cannot find name 'cy'](https://github.com/vuejs/vue-cli/issues/4239#issuecomment-1214261721)\n- [Cypress ê³µì‹ í™ˆí˜ì´ì§€: GitHub Actions](https://docs.cypress.io/guides/continuous-integration/github-actions)"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'í•˜ë§ˆë“œ'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ê°œìš” ìš°ì•„í•œí…Œí¬ì½”ìŠ¤ 5ê¸° í”¼ì›€ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ, í•„í„°ë§ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ Querydsl ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë„ì…í•œ ê³¼ì •ì„ ì •ë¦¬í•œë‹¤. ë¬¸ì œìƒí™© í•„í„°ë§ ê¸°ëŠ¥ ë„ì… ë‚´ê°€ ë‹´ë‹¹í•œ íŒŒíŠ¸ëŠ” ì•„ë˜ì™€ ê°™ë‹¤. \"ì‚¬ìš©ìê°€ ë³´ìœ í•œ ë°˜ë ¤ ì‹ë¬¼ì˜ ê´€ë¦¬ ì´ë ¥ì„ ìµœì‹  ìˆœìœ¼ë¡œ ì¡°íšŒí•˜ê¸°\"   ì€  ë¼ëŠ” í…Œì´ë¸” ë° ì—”í‹°í‹° ê°ì²´ì—â€¦","fields":{"slug":"/why_we_applied_querydsl/"},"frontmatter":{"date":"August 14, 2023","title":"í”¼ì›€ ì„œë¹„ìŠ¤ì˜ Querydsl ë„ì… ì´ìœ ","tags":["Querydsl"]},"rawMarkdownBody":"\n![](.index_images/querydsl.png)\n\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[í•˜ë§ˆë“œ](https://github.com/rawfishthelgh)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ê°œìš”\n---\nìš°ì•„í•œí…Œí¬ì½”ìŠ¤ 5ê¸° í”¼ì›€ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ, í•„í„°ë§ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ Querydsl ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë„ì…í•œ ê³¼ì •ì„ ì •ë¦¬í•œë‹¤.\n## ë¬¸ì œìƒí™©\n---\n### í•„í„°ë§ ê¸°ëŠ¥ ë„ì…\në‚´ê°€ ë‹´ë‹¹í•œ íŒŒíŠ¸ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.\n>\"ì‚¬ìš©ìê°€ ë³´ìœ í•œ ë°˜ë ¤ ì‹ë¬¼ì˜ ê´€ë¦¬ ì´ë ¥ì„ ìµœì‹  ìˆœìœ¼ë¡œ ì¡°íšŒí•˜ê¸°\" \n\n`ë°˜ë ¤ ì‹ë¬¼ì˜ ê´€ë¦¬ ì´ë ¥` ì€ `History` ë¼ëŠ” í…Œì´ë¸” ë° ì—”í‹°í‹° ê°ì²´ì— ì €ì¥ë˜ê³  ê´€ë¦¬ëœë‹¤.\n\n`History` ê°ì²´ ë° í…Œì´ë¸” í˜•íƒœëŠ” ì•„ë˜ì™€ ê°™ì´ ìƒê²¨ë¨¹ì—ˆë‹¤.\n\n**History ê°ì²´**\n```java\n@Entity\n@Getter\n@Table(name = \"history\")\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\npublic class History extends BaseEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @NotNull\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"pet_plant_id\", nullable = false)\n    private PetPlant petPlant;\n\n    @NotNull\n    @Column(name = \"event_date\", nullable = false)\n    private LocalDate date;\n\n    @NotNull\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"history_category_id\", nullable = false)\n    private HistoryCategory historyCategory;\n\n    @Valid\n    @NotNull\n    @Embedded\n    private HistoryContent historyContent;\n\t...\n```\n**history í…Œì´ë¸”**\n![](https://velog.velcdn.com/images/rg970604/post/c71da5e7-4a11-4ced-84d9-4d81764abd29/image.png)\n\nê¸°ì¡´ì—ëŠ” ê¸°ë¡ì˜ ì¹´í…Œê³ ë¦¬ì— ìƒê´€ì—†ì´ ì „ì²´ë¥¼ ë¶ˆëŸ¬ì™€ ì¡°íšŒë¥¼ í•˜ëŠ” í˜•íƒœì˜€ì§€ë§Œ, í”¼ì›€ ì„œë¹„ìŠ¤ëŠ” 4ì°¨ ìŠ¤í”„ë¦°íŠ¸ ê³¼ì •ì—ì„œ \n\n>ì›í•˜ëŠ” ì¹´í…Œê³ ë¦¬(historyCategory) ì¡°í•©ì— ë”°ë¼ì„œ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ë“¤ì— í•´ë‹¹í•˜ëŠ” ê´€ë¦¬ ê¸°ë¡(History)ë“¤ë§Œ ì¡°íšŒí•´ ì˜¨ë‹¤\n\në¼ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê²Œ ë˜ì—ˆë‹¤.\n\n`/history?petPlantId=1&page=0&size=20&filter=â€lastwaterDate,flowerpotâ€¦â€`\nìœ„ urlì˜ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì¤‘ filterì— í•´ë‹¹í•˜ëŠ” ê°’ë“¤ì„ ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë§ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤.\n\n### ì–´ë–¤ í•„í„°ë§ ì¡°ê±´ì´ëƒì— ë”°ë¼ ì¿¼ë¦¬ í˜•íƒœê°€ ì–´ë§ˆë¬´ì‹œí•˜ê²Œ ë³€í™”í•œë‹¤.\n\n`History` ì˜ ì¹´í…Œê³ ë¦¬ ëª©ë¡ì€\n\n`location, flowerpot, waterCycle, light, wind, lastWaterDate`\n\nì´ ì—¬ì„¯ ê°€ì§€ë¥¼ ë³´ìœ í•˜ê³  ìˆë‹¤.\n\nì´ ì¹´í…Œê³ ë¦¬ë¥¼ í™œìš©í•œ í•„í„°ë§ì´ ì „í˜€ ë“¤ì–´ì˜¤ì§€ ì•Šì„ ìˆ˜ë„(0ê°œ), ëª¨ë‘ ë“¤ì–´ì˜¬ìˆ˜ë„(6ê°œ), ëª‡ ê°œë§Œ ë“¤ì–´ì˜¬ ìˆ˜ë„ ìˆë‹¤(1~5ê°œ).\n\në˜í•œ ê°œìˆ˜ê°€ ê°™ì•„ë„, ì–´ë–¤ ì¹´í…Œê³ ë¦¬ê°€ ì¡°í•©ë˜ëŠëƒì— ë”°ë¼ ì¿¼ë¦¬ í˜•íƒœê°€ ë³€í™”í•œë‹¤.\n\nì˜ˆë¥¼ ë“¤ë©´ \n```sql\n// í•„í„°ë§ ì¡°ê±´ì´ location, flowerpotì¸ ê²½ìš°\nwhere history.pet_plant_id = ë°˜ë ¤ì‹ë¬¼ID \n        and history_category.history_type in (location,flowerpot)\n        \n// í•„í„°ë§ ì¡°ê±´ì´ flowerpot, waterCycleì¸ ê²½ìš°\nwhere history.pet_plant_id = ë°˜ë ¤ì‹ë¬¼ID\n        and history_category.history_type in (flowerpot,waterCycle)\n        \n// ì–´ì©Œêµ¬ì €ì©Œêµ¬ ìˆ˜ë§ì€ ê²½ìš°\n...\n```\në”°ë¼ì„œ, ê³„ì‚°í•´ ë´¤ì„ ë•Œ \n>6C0 + 6C1 + 6C2 + 6C3 + 6C4 + 6C5  + 6C6 \n= 1 + 6 + 15 + 20 + 15 + 6 + 1 \n= 64\n\nì´ 64ê°œì˜ ê²½ìš°ì˜ ìˆ˜ê°€ ë“±ì¥í•˜ê²Œ ëœë‹¤ ;;\n\në”°ë¼ì„œ í˜„ì¬ ì´ ë¬¸ì œë¥¼ ìŒ©ìœ¼ë¡œ í•´ê²°í•˜ë ¤ë©´, ì¡°í•©ì— ë”°ë¼ ì´64ê°œì˜ ë¶„ê¸°ë¬¸ì„ ì‘ì„±í•´ì•¼ í•œë‹¤...\n\nê·¸ëŸ°ë° 64ê°œì˜ ë¶„ê¸°ë¬¸ì„ ì‘ì„±í•˜ë©´ ë§Œë“¤ê³  ëì´ ì•„ë‹ˆë¼, í•„í„°ë§ ì¡°ê±´ì´ í•˜ë‚˜ë§Œ ëŠ˜ì–´ë‚˜ë„ ì—„ì²­ë‚œ ì–‘ì˜ ë¶„ê¸°ë¬¸ì˜ ì¶”ê°€ì™€ ìˆ˜ì •ì´ ì¼ì–´ë‚œë‹¤. ì´ëŸ´ ë°”ì—” ê·¸ëƒ¥ ê°œë°œìë¥¼ ê·¸ë§Œ ë‘ëŠ”ê²Œ ë‚˜ì„ ìˆ˜ë„ ìˆë‹¤.\n\në”°ë¼ì„œ! í”¼ì›€ì€ ë™ì  ì¿¼ë¦¬ë¥¼ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë„êµ¬ë¥¼ ì„ íƒ ë° ë„ì…í•˜ê¸°ë¡œ í–ˆë‹¤.\n\n## ëŒ€ì•ˆë¶„ì„ ë° ì„ íƒê³¼ì •\n---\n\njava / springì—ì„œ ë™ì  ì¿¼ë¦¬ë¥¼ í•´ê²°í•˜ëŠ” ë„êµ¬ëŠ” ì—¬ëŸ¿ ì¡´ì¬í•œë‹¤. ìš°ë¦¬ê°€ ì–´ë–¤ ëŒ€ì•ˆì„ ë– ì˜¬ë ¸ëŠ”ì§€ì™€, ì´ë¥¼ ë„ì…í•˜ì§€ ì•Šì€/ë„ì…í•œ ì´ìœ ë¥¼ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.\n\n### **Mybatis**\n\nJdbcTemplateì˜ ë™ì  ì¿¼ë¦¬ í•œê³„ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í•´ê²°í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ SQL Mapper í”„ë ˆì„ì›Œí¬ì´ë‹¤. í•˜ì§€ë§Œ ìš°ë¦¬ëŠ” SQL Mapperê°€ ì•„ë‹Œ JPAë¼ëŠ” ORMì„ ì‚¬ìš©í•˜ê¸°ì— naviteí•œ sql ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë„ì…í•˜ì§€ ì•Šì•˜ë‹¤.\n\n### **JPA - Criteria Query**\n\nJPAì—ì„œëŠ” JPQLì´ë¼ëŠ” ì¿¼ë¦¬ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì§ˆì˜í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ê·¸ëŸ¬ë‚˜ JPQLë„ sql mapper ì²˜ëŸ¼ String í˜•íƒœë¡œ ì‘ì„±í•˜ë¯€ë¡œ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜ë¥¼ ì¡ì•„ë‚´ê¸° í˜ë“ ë°, Criteria Query í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ ìë°” ì½”ë“œë¡œ JPQLì„ ì‘ì„±í•  ìˆ˜ ìˆì–´ íƒ€ì… ì•ˆì „ì„±ì„ ì œê³µí•œë‹¤. ë˜í•œ ì¡°ê±´ë¬¸ì„ í™œìš©í•˜ì—¬ ë™ì  ì¿¼ë¦¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ê·¸ëŸ¼ ì´ ë°©ë²•ë¡ ì„ ì¨ì•¼ê² ë‹¤ëŠ” ìƒê°ì´ ìŠ¬ìŠ¬ ë“¤ê²Œ ëœë‹¤.\n\nê·¸ëŸ¬ë‚˜...Criteria Queryì— ëŒ€í•œ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¾ì•„ë³´ë‹ˆ, ëŒ€ë¶€ë¶„ì˜ ëŒ€ë‹µì€ ì´ëŸ¬í–ˆë‹¤.\n> ì“°ì§€ ë§ˆì„¸ìš” ê°€ë…ì„± ì•ˆì¢‹ìŠµë‹ˆë‹¤...\n\nê·¸ë˜ì„œ ì´ê²Œ ì–´ë–¤ í˜•íƒœë¥¼ ê°–ëŠ”ì§€ ëŒ€ì¶© ì°¾ì•„ë´¤ë‹¤. gpt ì„ ìƒë‹˜ì—ê²Œ \n`where history.pet_plant_id = ë°˜ë ¤ì‹ë¬¼ID \n        and history_category.history_type in (íƒ€ì… ì¡°ê±´ë“¤...)`\nì½”ë“œ ì‘ì„±ì„ ìš”ì²­ë“œë¦¬ë‹ˆ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œ í˜•íƒœê°€ íƒœì–´ë‚¬ë‹¤. ì•„ë˜ ì½”ë“œëŠ” ê·¸ëƒ¥ Criteria Queryê°€ ì´ëŸ° í˜•íƒœë¥¼ ê°–ëŠ”êµ¬ë‚˜ ì •ë„ë¡œ ìƒê°í•˜ì.\n\n```java\npublic class DynamicCriteriaQueryExample {\n\n    public static void main(String[] args) {\n        EntityManager entityManager = ...; // EntityManager ìƒì„± ì½”ë“œ\n\n        CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\n\n        // Criteria Query ìƒì„±\n        CriteriaQuery<History> criteriaQuery = criteriaBuilder.createQuery(History.class);\n        Root<History> historyRoot = criteriaQuery.from(History.class);\n\n        // ë™ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ì¡°ê±´ì„ ìœ„í•œ ë¦¬ìŠ¤íŠ¸ ìƒì„±\n        List<Predicate> predicates = new ArrayList<>();\n\n        // ë™ì  ì¡°ê±´ ì¶”ê°€\n        int plantId = ë°˜ë ¤ì‹ë¬¼ID; // ë™ì ìœ¼ë¡œ ì„¤ì •ë˜ëŠ” ê°’\n        predicates.add(criteriaBuilder.equal(historyRoot.get(\"petPlantId\"), plantId));\n\n        List<String> types =íˆìŠ¤í† ë¦¬ íƒ€ì…ë“¤; // ë™ì ìœ¼ë¡œ ì„¤ì •ë˜ëŠ” ê°’\n        predicates.add(historyRoot.get(\"historyType\").in(types));\n\n        // ëª¨ë“  ë™ì  ì¡°ê±´ì„ ANDë¡œ ê²°í•©\n        criteriaQuery.where(predicates.toArray(new Predicate[0]));\n\n        // ê²°ê³¼ ì¿¼ë¦¬ ì‹¤í–‰\n        List<History> resultList = entityManager.createQuery(criteriaQuery).getResultList();\n\n        // ê²°ê³¼ ì²˜ë¦¬ ë“±ì˜ ë¡œì§\n    }\n}\n\n```\në”± ë´ë„ ë­”ê°€ ì½”ë“œê°€ ë”ëŸ½ê³ , ì–´ë–¤ sqlì´ íƒ„ìƒí•˜ëŠ”ì§€ ìœ ì¶”ê°€ ì •ë§ í˜ë“¤ë‹¤. ìœ„ ì½”ë“œë¥¼ ë³´ê³  ì£¼ì„ì˜ ìƒì„¸í•œ ì„¤ëª… ì—†ì´ ë™ì  where in ì ˆì´ íƒ„ìƒí•˜ëŠ”ê²Œ ìœ ì¶”ë˜ëŠ”ê°€? ì½”ë“œ í˜•íƒœê°€ sqlì´ ì•„ë‹Œ ê°ì²´ ì¤‘ì‹¬ì ì´ë‹¤ë³´ë‹ˆ ë°œìƒí•œ ë¬¸ì œì´ë‹¤.\n\n### **Querydsl**\nìë°” ì½”ë“œë¡œ jpqlì„ ìƒì„±í•  ìˆ˜ ìˆëŠ” Criteria Queryì˜ ì´ì ì„ ìœ ì§€í•˜ë©´ì„œ, sqlê³¼ ë¹„ìŠ·í•œ í˜•íƒœë¡œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆëŠ” ì¥ì ê¹Œì§€ ì±™ê²¨ê°„ ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤.\n\në”°ë¼ì„œ í”¼ì›€ì€ \n>1. ê°€ë…ì„± : sqlê³¼ ë¹„ìŠ·í•œ í˜•íƒœì˜ ìë°” ì½”ë“œ ì‘ì„±\n>2. íƒ€ì… ì•ˆì „ì„± : ìë°” ì½”ë“œë¡œ ì‘ì„±í•´ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜ íŒŒì•… ê°€ëŠ¥\n>3. ìƒì‚°ì„± : join, ì„œë¸Œì¿¼ë¦¬, ì§‘ê³„í•¨ìˆ˜ ë“± í•´ë‹¹ ì„œë¹„ìŠ¤ì—ì„œ í•„ìš”í•œ ë³µì¡í•œ ì¿¼ë¦¬ í˜•íƒœë¥¼ ê°„ë‹¨í•˜ê²Œ ì‘ì„± ê°€ëŠ¥í•œ api ì œê³µ\n>4. ìœ ì§€ë³´ìˆ˜ì„± : í˜„ì¬ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬, í”„ë ˆì„ì›Œí¬ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ê°œë°œ ê°€ëŠ¥\n\në™ì  ì¿¼ë¦¬ë¥¼ êµ¬í˜„í•˜ëŠ” ê³¼ì •ì—ì„œ, ë‹¤ë¥¸ ëŒ€ì•ˆì— ë¹„í•´ ìœ„ ë„¤ ê°€ì§€ì˜ ê°€ì¹˜ë¥¼ ì°½ì¶œí•  ìˆ˜ ìˆë‹¤ëŠ” ê²°ë¡ ì„ ë‚´ë¦¬ê³  Querydslì„ ë„ì…í–ˆë‹¤.\n\në‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œëŠ” Querydsl ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìš°ë¦¬ ì„œë¹„ìŠ¤ì— ì–´ë–¤ í˜•íƒœë¡œ ì ìš©í–ˆëŠ”ì§€ êµ¬í˜„ ê³¼ì •ì„ ì„¤ëª…í•˜ë„ë¡ í•˜ê² ë‹¤.\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì£¼ë…¸'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì‚¬ê±´ì˜ ë°œë‹¨ ë¬¼ì£¼ê¸°, ë°˜ë ¤ ì‹ë¬¼ ì •ë³´ ë“±ë¡ ë° ìˆ˜ì •ê³¼ ê°™ì€ í–‰ë™ì— ëŒ€í•œ Historyë¥¼ ê¸°ë¡í•´ì•¼í•œë‹¤. ì´ ê³¼ì •ì—ì„œ Historyë¥¼ ê¸°ë¡í•˜ëŠ” ì½”ë“œê°€ ReminderService, PetPlantServiceì— ì¹¨íˆ¬í•˜ëŠ” ìƒí™©ì´ ë°œìƒí–ˆë‹¤. Historyë¼ëŠ” ë„ë©”ì¸ì´ Reminder, PetPlant ê·¸ë¦¬ê³  â€¦","fields":{"slug":"/spring-event-apply/"},"frontmatter":{"date":"August 13, 2023","title":"Spring Event ì ìš©í•˜ê¸°","tags":["ì´ë²¤íŠ¸","Spring"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì£¼ë…¸](https://github.com/Choi-JJunho)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ì‚¬ê±´ì˜ ë°œë‹¨\n\në¬¼ì£¼ê¸°, ë°˜ë ¤ ì‹ë¬¼ ì •ë³´ ë“±ë¡ ë° ìˆ˜ì •ê³¼ ê°™ì€ í–‰ë™ì— ëŒ€í•œ Historyë¥¼ ê¸°ë¡í•´ì•¼í•œë‹¤.\n\nì´ ê³¼ì •ì—ì„œ Historyë¥¼ ê¸°ë¡í•˜ëŠ” ì½”ë“œê°€ ReminderService, PetPlantServiceì— ì¹¨íˆ¬í•˜ëŠ” ìƒí™©ì´ ë°œìƒí–ˆë‹¤.\n\nHistoryë¼ëŠ” ë„ë©”ì¸ì´ Reminder, PetPlant ê·¸ë¦¬ê³  ì•ìœ¼ë¡œ ìƒê²¨ë‚  íˆìŠ¤í† ë¦¬ê°€ í•„ìš”í•œ ë¡œì§ë“¤ì— ëŒ€í•´ ê°•í•œ ì˜ì¡´ì„±ì„ ê°€ì§€ê²Œ ë  ê²ƒì„ ìš°ë ¤í–ˆë‹¤.\n\nì‹¤ì œë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œê°€ ì‘ì„±ë˜ë©´ì„œ ê·¸ ì‹¬ê°ì„±ì€ ë”ìš± ê°€ê¹ê²Œ ë‹¤ê°€ì™”ë‹¤.\n\n```java\n@Transactional\npublic void water(ReminderCreateRequest reminderCreateRequest, Long petPlantId, Member member) {\n    PetPlant petPlant = petPlantRepository.findById(petPlantId)\n            .orElseThrow(() -> new NoSuchElementException(\"ì¼ì¹˜í•˜ëŠ” ë°˜ë ¤ ì‹ë¬¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. id: \" + petPlantId));\n    checkOwner(petPlant, member);\n    LocalDate prevDate = petPlant.getLastWaterDate();\n    petPlant.water(reminderCreateRequest.getWaterDate());\n\n    HistoryCategory historyCategory = historyCategoryRepository.findByHistoryType(HistoryType.LAST_WATER_DATE)\n            .orElseThrow(\n                    () -> new NoSuchElementException(\"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íˆìŠ¤í† ë¦¬ íƒ€ì…ì…ë‹ˆë‹¤. type: \" + HistoryType.LAST_WATER_DATE));\n\n    History history = History.builder()\n            .petPlant(petPlant)\n            .date(reminderCreateRequest.getWaterDate())\n            .historyCategory(historyCategory)\n            .historyContent(HistoryContent.builder()\n                    .previous(prevDate.toString())\n                    .current(petPlant.getLastWaterDate().toString())\n                    .build())\n            .build();\n\n    historyRepository.save(history);\n}\n```\n\nì´ë ‡ê²Œ ê°œë°œì„ ì§„í–‰í•˜ë‹¤ê°€ëŠ” ëª¨ë“  ì½”ë“œì— HistoryRepository, HistoryCategoryRepositoryë“¤ì´ ì¹¨íˆ¬í•˜ê²Œëœë‹¤.\n\nì•„ë¬´ë¦¬ ê°œë°œì´ ê¸‰í•´ë„ ì´ê±´ ì•„ë‹ˆë‹¤ ì‹¶ì–´ì„œ `Historyë¥¼ ê¸°ë¡í•œë‹¤` ë¼ëŠ” í–‰ìœ„ì— ëŒ€í•œ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì°¾ì•„ë´¤ë‹¤.\n\n## ê´€ì‹¬ì‚¬ ë¶„ë¦¬\n\nê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë‹¤ìŒ ë‘ê°€ì§€ ë°©ë²•ì„ ì°¾ì•˜ë‹¤.\n\n`1. AOPë¥¼ ì‚¬ìš©í•œë‹¤.`\n\nAOPì˜ `@Around`ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ì—¬ History ê¸°ë¡ì´ í•„ìš”í•œ ë¶€ë¶„ì— ëŒ€í•´ ê¸°ë¡í•˜ëŠ” ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\ní•´ë‹¹ ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§„ë‹¤.\n\n- í¬ì¸íŠ¸ì»· í‘œí˜„ì‹ìœ¼ë¡œ ëŒ€ìƒ ë©”ì†Œë“œ í˜¹ì€ í´ë˜ìŠ¤ë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.\n- ë©”ì†Œë“œì˜ íŒŒë¼ë¯¸í„°ê°’, ë°˜í™˜ê°’, ì´ë¦„ ë“±ì˜ ì •ë³´ë¥¼ êµ¬í•  ìˆ˜ ìˆë‹¤.\n- ë‚´ë¶€ì—ì„œ ì„ ì–¸ëœ ë³€ìˆ˜ì— ëŒ€í•´ì„œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.\n- ì„ ì–¸ëœ ë©”ì†Œë“œì™€ ë™ì¼í•œ íŠ¸ëœì­ì…˜ ì£¼ê¸°ë¥¼ ê°€ì§„ë‹¤.\n\n`2. Spring Eventë¥¼ ì‚¬ìš©í•œë‹¤.`\n\nSpringì—ì„œ ì œê³µí•˜ëŠ” Event ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.\n\nHistoryì™€ ê´€ë ¨ëœ Repositoryë‚˜ Serviceì— ì˜ì¡´í•˜ì§€ ì•Šê³  EventPublisherë¥¼ ì˜ì¡´í•˜ê²Œ í•˜ì—¬ íŒ¨í‚¤ì§€ê°„ ì˜ì¡´ì„±ì„ í•´ê²°í•  ìˆ˜ ìˆë‹¤.\n\n- ì„œë¹„ìŠ¤ê°„ì˜ ê°•í•œ ì˜ì¡´ì„±ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.\n- ì´ë²¤íŠ¸ë¡œ ë¶„ë¦¬ëœ ë¶€ë¶„ì„ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.\n\nAOPì™€ Event ë‘ê°€ì§€ ë°©ì‹ì„ ì•Œì•„ë´¤ë‹¤.\n\nAOPë¥¼ ì‚¬ìš©í•˜ë©´ í”„ë¡œë•ì…˜ ì½”ë“œ ë‚´ì—ì„œ Historyì— ëŒ€í•´ ì•„ì˜ˆ ëª°ë¼ë„ ëœë‹¤ëŠ” ì´ì ì´ ìˆì—ˆì§€ë§Œ History ìƒì„± ê°„ ë‚´ë¶€ ê°’ì´ í•„ìš”í•œ ê²½ìš° ì´ì— ëŒ€ì²˜í•˜ê¸° ì–´ë µë‹¤ëŠ” ë¬¸ì œê°€ ìˆì—ˆë‹¤.\n\nì´ì— ë‚´ë¶€ ê°’ì„ Historyì— ë§ëŠ” ì–‘ì‹ìœ¼ë¡œ ë³€í™˜í•œ ë’¤ EventListenerì—ê²Œ ìœ„ì„í•˜ëŠ” í˜•íƒœë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆë‹¤.\n\n## Event íë¦„\n\nEventì˜ íë¦„ ìì²´ëŠ” ê°„ë‹¨í•˜ë‹¤.\n\n![](.index_images/5ba5ff42.png)\n\nê¸°ì¡´ì˜ ì„œë¹„ìŠ¤ ë¡œì§ì´ Historyë¼ëŠ” ë„ë©”ì¸ì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ê°€ì§€ê²Œ ë˜ëŠ” êµ¬ì¡°ì˜€ë‹¤ë©´\n\n![](.index_images/aebfae33.png)\n\në‹¤ìŒê³¼ ê°™ì´ History ë„ë©”ì¸ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ” êµ¬ì¡°ë¡œ ê°œì„ ë  ìˆ˜ ìˆë‹¤.\n\n## Event êµ¬í˜„í•˜ê¸°\n\nSpring Eventë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” í¬ê²Œ 3ê°€ì§€ ìš”ì†Œê°€ í•„ìš”í•˜ë‹¤.\n\n### Event Class\n\n> í•´ë‹¹ ì‹¤ìŠµì€ SpringBoot 3.1(Spring Framework 6) í™˜ê²½ì—ì„œ ì§„í–‰ë©ë‹ˆë‹¤. \n> \n> (Spring Framework 4.2 ì´ì „ ë²„ì „ì€ ì„¤ì •ì´ ìƒì´í•˜ë‹ˆ ì´ì  ìœ ì˜í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.)\n\nìš°ì„  ì´ë²¤íŠ¸ í´ë˜ìŠ¤ë‹¤.\n\nì´ë²¤íŠ¸ í´ë˜ìŠ¤ëŠ” ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ë°ì´í„°ë¥¼ ê°€ì§€ê³ ìˆë‹¤.\n\n```java\n@Getter\n@Validated\n@RequiredArgsConstructor\npublic class HistoryEvent {\n\n    @NotNull\n    private final Long petPlantId;\n\n    @NotNull\n    private final String previous;\n\n    @NotNull\n    private final String current;\n\n    @NotNull\n    private final HistoryType historyType;\n    \n    @NotNull\n    private final LocalDate date;\n}\n```\n\n### Event Publisher\n\në‹¤ìŒì€ ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ëŠ” publisherë‹¤.\n\nSpringì—ì„œëŠ” ApplicationEventPublisherì˜ publish() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ Contextì— ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•  ìˆ˜ ìˆë‹¤.\n\n```java\n@Service\n@Transactional(readOnly = true)\n@RequiredArgsConstructor\npublic class ReminderService {\n    ...\n    private final ApplicationEventPublisher publisher;\n    \n    @Transactional\n    public void water(ReminderCreateRequest reminderCreateRequest, Long petPlantId, Member member) {\n        // ë°˜ë ¤ ì‹ë¬¼ ë¬¼ì£¼ê¸° ìˆ˜í–‰\n        publisher.publishEvent(new HistoryEvent(...));\n    }\n    ...\n}\n```\n\n### EventListener\n\në§ˆì§€ë§‰ìœ¼ë¡œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë‹¤.\n\në°œí–‰ëœ ì´ë²¤íŠ¸ë¥¼ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì¡ì•„ì„œ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì„ í•œë‹¤.\n\n```java\n@Component\n@RequiredArgsConstructor\npublic class HistoryEventListener {\n\n    private final PetPlantRepository petPlantRepository;\n    private final HistoryRepository historyRepository;\n    private final HistoryCategoryRepository historyCategoryRepository;\n\n    // íˆìŠ¤í† ë¦¬ë¥¼ ì €ì¥í•œë‹¤.\n    @EventListener\n    public void savePetPlantHistory(HistoryEvent historyEvent) {\n\n        PetPlant petPlant = petPlantRepository.findById(historyEvent.getPetPlantId())\n                .orElseThrow(() -> new NoSuchElementException(\"ì¼ì¹˜í•˜ëŠ” ë°˜ë ¤ ì‹ë¬¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. id: \" + historyEvent.getPetPlantId()));\n\n        HistoryCategory historyCategory = historyCategoryRepository.findByHistoryType(historyEvent.getHistoryType())\n                .orElseThrow(() -> new NoSuchElementException(\"ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íˆìŠ¤í† ë¦¬ íƒ€ì…ì…ë‹ˆë‹¤. type: \" + historyEvent.getHistoryType()));\n\n        History history = History.builder()\n                .petPlant(petPlant)\n                .date(historyEvent.getDate())\n                .historyCategory(historyCategory)\n                .historyContent(HistoryContent.builder()\n                        .previous(historyEvent.getPrevious())\n                        .current(historyEvent.getCurrent())\n                        .build())\n                .build();\n\n        historyRepository.save(history);\n    }\n}\n```\n\n## ê²°ë¡ \n\nSpring Eventë¥¼ ë„ì…í•˜ì—¬ ë„ë©”ì¸ê°„ì˜ ê²°í•©ë„ë¥¼ ì¤„ì—¬ë´¤ë‹¤.\n\nì´ë²¤íŠ¸ë¥¼ ë‹¤ë£¨ë©´ ë¹„ë™ê¸° ì²˜ë¦¬ì— ëŒ€í•œ ì´ì•¼ê¸°ê°€ ë§ì´ ë³´ì´ëŠ” ê²ƒ ê°™ì€ë° ì•„ì§ í•´ë‹¹ ì‘ì—…ì´ ë¹„ë™ê¸°ì²˜ë¦¬ê°€ í•„ìš”í•  ë§Œí¼ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ì´ë¼ëŠ” íŒë‹¨ì„ ë‚´ë¦¬ì§€ ëª»í–ˆë‹¤.\n\në¹„ë™ê¸° ì²˜ë¦¬ëŠ” ë‚˜ì¤‘ì— ì¶”ê°€ë¡œ ë‹¤ë¤„ë³´ë„ë¡ í•˜ì.\n\n## Reference\n\n- https://wildeveloperetrain.tistory.com/217\n- https://mangkyu.tistory.com/292"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì£¼ë…¸'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì‚¬ê±´ì˜ ë°œë‹¨  3ì°¨ ìŠ¤í”„ë¦°íŠ¸ë¥¼ ì§„í–‰í•˜ê¸° í•˜ë£¨ ì „ë‚  í”„ë¡ íŠ¸ê°€ ë°°í¬ë˜ì—ˆë‹¤.  ê·¸ëŸ°ë° ë°°í¬ëœ ì‚¬ì´íŠ¸ì— ë“¤ì–´ê°€ë³´ë‹ˆ ë°˜ë ¤ ì‹ë¬¼ì˜ íƒ€ì„ë¼ì¸ì„ ë³´ëŠ” í˜ì´ì§€ê°€ 404ë¥¼ ë„ìš°ê³ ìˆì—ˆë‹¤. ë‹¹í™©í•˜ì§€ ì•Šê³  ì¹¨ì°©í•˜ê²Œ f12ë¥¼ ëˆŒëŸ¬ ê°œë°œìë„êµ¬ë¥¼ ì—´ê³  ë„¤íŠ¸ì›Œí¬íƒ­ì„ í™•ì¸í•´ë³´ë‹ˆ APIê°€ ì´ìƒí•˜ê²Œ í˜¸ì¶œë˜ê³ ìˆì—ˆë‹¤. í‰ì†Œ í”„ë¡ íŠ¸ë¶„ë“¤ì„ êµ‰ì¥â€¦","fields":{"slug":"/restdocs-start/"},"frontmatter":{"date":"August 11, 2023","title":"RestDocsë¡œ API ë¬¸ì„œí™”í•˜ê¸°","tags":["ë¬¸ì„œí™”","RestDocs","í…ŒìŠ¤íŠ¸"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì£¼ë…¸](https://github.com/Choi-JJunho)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ì‚¬ê±´ì˜ ë°œë‹¨\n\n![](.index_images/c4fe129c.png)\n\n3ì°¨ ìŠ¤í”„ë¦°íŠ¸ë¥¼ ì§„í–‰í•˜ê¸° í•˜ë£¨ ì „ë‚  í”„ë¡ íŠ¸ê°€ ë°°í¬ë˜ì—ˆë‹¤.\n\n![](.index_images/dbb1d706.png)\n\nê·¸ëŸ°ë° ë°°í¬ëœ ì‚¬ì´íŠ¸ì— ë“¤ì–´ê°€ë³´ë‹ˆ ë°˜ë ¤ ì‹ë¬¼ì˜ íƒ€ì„ë¼ì¸ì„ ë³´ëŠ” í˜ì´ì§€ê°€ 404ë¥¼ ë„ìš°ê³ ìˆì—ˆë‹¤.\n\në‹¹í™©í•˜ì§€ ì•Šê³  ì¹¨ì°©í•˜ê²Œ f12ë¥¼ ëˆŒëŸ¬ ê°œë°œìë„êµ¬ë¥¼ ì—´ê³  ë„¤íŠ¸ì›Œí¬íƒ­ì„ í™•ì¸í•´ë³´ë‹ˆ APIê°€ ì´ìƒí•˜ê²Œ í˜¸ì¶œë˜ê³ ìˆì—ˆë‹¤.\n\ní‰ì†Œ í”„ë¡ íŠ¸ë¶„ë“¤ì„ êµ‰ì¥íˆ ì‹ ë¢°í•˜ë˜ ì£¼ë…¸ëŠ” ì„¤ë§ˆ í•˜ëŠ” ë§ˆìŒì— Notionì„ ì—´ì–´ë´¤ë‹¤. ì•„ë‹ˆë‚˜ë‹¤ë¥¼ê¹Œ Notionì— API ëª…ì„¸ê°€ ì´ìƒí•˜ê²Œ ì‘ì„±ë˜ì–´ìˆì—ˆë‹¤.\n\në²”ì¸ì€ ë°”ë¡œ ì´ê²ƒì €ê²ƒ ë„ì ì´ë‹¤ê°€ ë˜ëŒë¦¬ê¸°ë¥¼ í•˜ì§€ ì•Šì€ ì£¼ë…¸...\n\n![](.index_images/03624593.png)\n\nìœ„ì™€ ê°™ì€ ì‚¬ê±´ì„ ê²ªìœ¼ë©´ì„œ ì‚¬ëŒ ì†ìœ¼ë¡œ ì‘ì„±ë˜ëŠ” ë¬¸ì„œì˜ ì‹ ë¢°ë„ ë¬¸ì œë¥¼ ì¸ì§€í–ˆê³ , API ë¬¸ì„œí™”ë¥¼ ìë™í™”í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ ì˜ í•„ìš”ì„±ì„ ëŠê¼ˆë‹¤.\n\n## ì„œë¡ \n\nAPI ë¬¸ì„œí™” ë°©ì‹ì— ëŒ€í•´ ì°¾ì•„ë³¸ ê²°ê³¼ í¬ê²Œ ë‘ê°€ì§€ ë°©ë²•ì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.\n\n### ì•Œì•„ë³´ê¸°\n\n`1. Spring RestDocs`\n\nSpring Rest DocsëŠ” Springì—ì„œ ì œê³µí•˜ëŠ” ë¬¸ì„œí™” ë„êµ¬ë‹¤.\n\n- í…ŒìŠ¤íŠ¸ ì‘ì„±ì´ ê°•ì œëœë‹¤ëŠ” íŠ¹ì§•ì´ ìˆë‹¤.\n- í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ë„ì¶œëœ ê²°ê³¼ë¥¼ ë¬¸ì„œë¡œ ì‘ì„±í•˜ê¸° í”„ë¡œë•ì…˜ ì½”ë“œì— ì˜í–¥ì´ ì—†ë‹¤ëŠ” íŠ¹ì§•ì´ ìˆë‹¤.\n- ì•„ë˜ ì„¤ëª…í•  Swaggerì™€ ë¹„êµí–ˆì„ ë•Œ ì„¤ì •ì´ ì•½ê°„ ë²ˆê±°ë¡­ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. \n\n`2. Swagger` \n\nSwaggerëŠ” API ë¬¸ì„œí™”ë¥¼ ë•ëŠ” ì˜¤í”ˆì†ŒìŠ¤ íˆ´ì´ë‹¤.\n\n- í…ŒìŠ¤íŠ¸ ì‘ì„±ì´ í•„ìˆ˜ê°€ ì•„ë‹ˆë¼ëŠ” íŠ¹ì§•ì´ ìˆë‹¤.\n- swagger ì´ìš© ì‹œ ì‹¤ì œ APIê°€ í˜¸ì¶œëœë‹¤ëŠ” íŠ¹ì§•ì´ ìˆë‹¤.\n- í…ŒìŠ¤íŠ¸ ì‘ì„±ì„ ì•ˆí•˜ëŠ” ëŒ€ì‹  í”„ë¡œë•ì…˜ ì½”ë“œì— ë¬¸ì„œí™”ì™€ ê´€ë ¨ëœ ì½”ë“œê°€ ì‘ì„±ëœë‹¤. (DTO, Controller ë“±)\n\n### Spring RestDocs\n\ní”¼ì›€ íŒ€ì€ RestDocsë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆê³  ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n- í˜„ì¬ í”¼ì›€íŒ€ì€ ê° ê³„ì¸µë³„ í…ŒìŠ¤íŠ¸ë¥¼ ê¼¼ê¼¼í•˜ê²Œ ì‘ì„±í•˜ê³ ìˆê³  ì¸ìˆ˜í…ŒìŠ¤íŠ¸ê¹Œì§€ ì‘ì„±í•˜ê³  ê´€ë¦¬í•˜ê³ ìˆìœ¼ë¯€ë¡œ í…ŒìŠ¤íŠ¸ê°€ ê°•ì œëœë‹¤ëŠ” ì ì€ í° ë‹¨ì ìœ¼ë¡œ ë‹¤ê°€ì˜¤ì§€ ì•Šì•˜ë‹¤.\n- ì½”ë“œë¦¬ë·°ê°€ í•„ìˆ˜ì ìœ¼ë¡œ ì´ë¤„ì§€ëŠ” í˜„ ìŠ¤í”„ë¦°íŠ¸ ë‹¨ê³„ì—ì„œ í”„ë¡œë•ì…˜ ì½”ë“œì˜ ê°€ë…ì„±ì„ í•´ì¹˜ëŠ” ë°©í–¥ì´ ì˜¤íˆë ¤ í° ë‹¨ì ì´ ë  ìˆ˜ ìˆë‹¤.\n- ì„±ê³µí•˜ëŠ” í…ŒìŠ¤íŠ¸ì— ëŒ€í•´ì„œë§Œ ë¬¸ì„œí™”ê°€ ì´ë¤„ì§€ê¸° ë•Œë¬¸ì— ë¬¸ì œìƒí™©ì—ì„œ í•„ìš”í–ˆë˜ ë¬¸ì„œì˜ ì‹ ë¢°ì„±ì„ ì¶©ì¡±ì‹œí‚¨ë‹¤.\n- (í”„ë¡ íŠ¸ ìµ¸íŒŒê°€ RestDocsë¥¼ ì¢‹ì•„í•œë‹¤ ğŸ¦Œ)\n\n> [í”¼ì›€ğŸŒ± ë¬¸ì„œí™” ë„ì… ê´€ë ¨ discussion](https://github.com/woowacourse-teams/2023-pium/discussions/181)\n\n## ì‹œì‘í•˜ê¸°\n\nRestDocsë¥¼ ì„¤ì •í•˜ëŠ” ê³¼ì •ì„ ì •ë¦¬í•˜ë ¤ê³ í•œë‹¤.\n\n### RestAssured vs MockMvc?\n\nRestDocsë¥¼ ì ìš©í•˜ëŠ” ë°©ë²•ì€ RestAssuredë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¬¸ì„œë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ê³¼ MockMvcë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¬¸ì„œë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ í¬ê²Œ ë‘ê°€ì§€ê°€ ìˆë‹¤.\n\ní”¼ì›€íŒ€ì€ í˜„ì¬ ì¸ìˆ˜í…ŒìŠ¤íŠ¸ë„ ì‘ì„±ë˜ì–´ìˆê¸° ë•Œë¬¸ì— RestAssuredë¥¼ ì‚¬ìš©í•´ë„ ì¶©ë¶„íˆ ë¬¸ì œê°€ ì—†ë‹¤.\n\ní•˜ì§€ë§Œ ì—¬ëŸ¬ ê³„ì¸µì´ í˜‘ì—…í•˜ëŠ” ì¸ìˆ˜í…ŒìŠ¤íŠ¸ í™˜ê²½ì— ë¬¸ì„œí™”ì™€ ê´€ë ¨ëœ ì½”ë“œê°€ ì‘ì„±ëœë‹¤ë©´ ì•ˆê·¸ë˜ë„ ë³µì¡í•œ ì¸ìˆ˜í…ŒìŠ¤íŠ¸ ì½”ë“œì˜ ê°€ë…ì„±ì„ í•´ì¹  ê²ƒì´ë¼ê³  ìš°ë ¤ë˜ì—ˆë‹¤.\n\nìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ì—¬ ë¹„êµì  ì½”ë“œì˜ ë¬´ê²Œê°€ ê°€ë²¼ìš´ Controller í…ŒìŠ¤íŠ¸ê°€ MockMvcë¡œ ì‘ì„±ë˜ì–´ìˆì—ˆê¸° ë•Œë¬¸ì— MockMvcë¥¼ ê¸°ë°˜ìœ¼ë¡œ RestAssuredë¥¼ ì ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤.\n\n### Gradle ì„¤ì •\n\n> TIP : `asciidoctor`ëŠ” adoc íŒŒì¼ì„ html ë“±ìœ¼ë¡œ ë³€í™˜í•´ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤\n\n```gradle\nplugins {\n    ...\n    id \"org.asciidoctor.jvm.convert\" version \"3.3.2\" // asciidoctor í”ŒëŸ¬ê·¸ì¸ ì¶”ê°€\n}\n\nconfigurations {\n    asciidoctorExt // asciidoctorExtì— ëŒ€í•œ ì„ ì–¸\n    ...\n}\n\n\ndependencies {\n    ...\n    asciidoctorExt 'org.springframework.restdocs:spring-restdocs-asciidoctor' // asciidoctorExtì— spring-restdocs-asciidoctor ì˜ì¡´ì„± ì¶”ê°€\n    testImplementation 'org.springframework.restdocs:spring-restdocs-mockmvc' // mockMvc ì‚¬ìš©\n}\n\next {\n    snippetsDir = file('build/generated-snippets') // ìŠ¤ë‹ˆí«ì´ ìƒì„±ë˜ëŠ” ë””ë ‰í„°ë¦¬ ê²½ë¡œë¥¼ ì„¤ì •\n}\n\ntest {\n    outputs.dir snippetsDir // ìŠ¤ë‹ˆí«ì´ ìƒì„±ë˜ëŠ” ë””ë ‰í„°ë¦¬ë¥¼ ì„¤ì •\n}\n\nasciidoctor { // Gradleì´ asciidoctor Taskë¥¼ ìˆ˜í–‰í•˜ëŠ” ì„¤ì • (í•¨ìˆ˜ ì„ ì–¸)\n    configurations 'asciidoctorExt' // asciidoctor í™•ì¥ ì„¤ì •\n    baseDirFollowsSourceFile() // .adoc íŒŒì¼ì„ include í•˜ë©´ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì„¤ì •\n    inputs.dir snippetsDir // ìŠ¤ë‹ˆí«ì„ ë¶ˆëŸ¬ì˜¬ ìœ„ì¹˜ ì„¤ì •\n    dependsOn test // Gradleì˜ test Task ì´í›„ asciidoctorë¥¼ ìˆ˜í–‰\n}\n\nasciidoctor.doFirst { // asciidoctor Taskê°€ ìˆ˜í–‰ë  ë•Œ ê°€ì¥ ë¨¼ì € ìˆ˜í–‰\n    delete file('src/main/resources/static/docs')\n}\n\ntask copyDocument(type: Copy) { // ìƒì„±ëœ html íŒŒì¼ì„ ì˜®ê¸´ë‹¤\n    dependsOn asciidoctor // Gradleì˜ asciidoctor Task ì´í›„ ìˆ˜í–‰\n    from file(\"${asciidoctor.outputDir}\")\n    into file(\"src/main/resources/static/docs\")\n}\n\nbuild {\n    dependsOn copyDocument // build ì´í›„ html íŒŒì¼ ë³µì‚¬\n}\n\nbootJar {\n    dependsOn asciidoctor // asciidoctor ì´í›„ bootJar ìˆ˜í–‰\n    from (\"${asciidoctor.outputDir}\") {\n        into 'static/docs'\n    }\n    ...\n}\n```\n\n### í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•˜ê¸°\n\nìš°ì„  ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.\n\n```java\n@AutoConfigureRestDocs\n@WebMvcTest(controllers = PetPlantController.class)\nclass PetPlantControllerTest {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private PetPlantService petPlantService;\n    \n    @Test\n    void ë°˜ë ¤_ì‹ë¬¼_ë‹¨ê±´_ì¡°íšŒ_ì •ìƒ_ìš”ì²­ì‹œ_200ì„_ë°˜í™˜() throws Exception {\n        PetPlantResponse response = RESPONSE.í”¼ìš°ë¯¸_ì‘ë‹µ;\n        given(petPlantService.read(anyLong(), any(Member.class)))\n                .willReturn(response);\n    \n        mockMvc.perform(get(\"/pet-plants/{id}\", 1L)\n                        .header(\"Authorization\", \"pium@gmail.com\")\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .characterEncoding(StandardCharsets.UTF_8))\n                .andDo(document(\n                            \"petPlant/findById/\",\n                            Preprocessors.preprocessRequest(Preprocessors.prettyPrint()),\n                            Preprocessors.preprocessResponse(Preprocessors.prettyPrint()),\n                            requestHeaders(\n                                    headerWithName(\"Authorization\").description(\"ì‚¬ìš©ì ì¸ì¦ ì •ë³´\")\n                            ),\n                            pathParameters(\n                                    parameterWithName(\"id\").description(\"ë°˜ë ¤ ì‹ë¬¼ ID\")\n                            )\n                        )\n                )\n                .andExpect(status().isOk())\n                .andDo(print());\n    }\n}\n```\n\n`andDo(document(...))` ë¶€ë¶„ì´ ë¬¸ì„œí™”ì™€ ê´€ë ¨ëœ ë‚´ìš©ë“¤ì´ë‹¤.\n\n`document()` ë‚´ë¶€ì˜ íŒŒë¼ë¯¸í„°ë¥¼ í•˜ë‚˜ì”© ì‚´í´ë³´ì\n\n- `\"petPlant/findById/\"`\n\nìŠ¤ë‹ˆí«ì´ ìƒì„±ë˜ëŠ” ëŒ€ìƒ ë””ë ‰í„°ë¦¬ ëª…ì´ë‹¤. \n\ní•´ë‹¹ í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ë©´ ë¬¸ì„œí™” ëŒ€ìƒìœ¼ë¡œ ì§€ì •í•œ ê°’ë“¤ì— ëŒ€í•´ `.adoc` ë¬¸ì„œê°€ ìƒì„±ëœë‹¤.\n\nìƒì„± íë¦„ê³¼ì •ì€ ë’¤ì—ì„œ ì„¤ëª…í•œë‹¤.\n\nìš°ì„  ê° íŒŒë¼ë¯¸í„°ê°€ ì–´ë–¤ ê²°ê³¼ë¬¼ì„ ë„ì¶œí•˜ëŠ”ì§€ í™•ì¸í•´ë³´ì.\n\n![](.index_images/22e5bb11.png)\n\n- `Preprocessors.preprocessRequest(prettyPrint())`\n\nìš”ì²­ê°’ì„ ì½ê¸° ì‰¬ìš´ ì„œì‹ìœ¼ë¡œ ì§€ì •í•œë‹¤.\n\n![](.index_images/f25529d5.png)\n\n- `Preprocessors.preprocessResponse(prettyPrint())` \n\nì‘ë‹µê°’ì„ ì½ê¸° ì‰¬ìš´ ì„œì‹ìœ¼ë¡œ ì§€ì •í•œë‹¤.\n\n![](.index_images/207cbfe0.png)\n\n> [Preprocessors ê´€ë ¨ ê³µì‹ë¬¸ì„œ](https://docs.spring.io/spring-restdocs/docs/current/reference/htmlsingle/#customizing-requests-and-responses-preprocessors)\n\n- `requestHeaders(headerWithName(\"Authorization\").description(\"ì‚¬ìš©ì ì¸ì¦ ì •ë³´\"))` : RequestHeaderì— ëŒ€í•œ ëª…ì„¸ë¥¼ í•œë‹¤.\n\n![](.index_images/4282f935.png)\n\n- `queryParameters(parameterWithName(\"name\").description(\"ì‚¬ì „ ì‹ë¬¼ ê²€ìƒ‰ íŒŒë¼ë¯¸í„°\"))`\n\n![](.index_images/c9dbf6a8.png)\n\n- `pathParameters(parameterWithName(\"id\").description(\"ë°˜ë ¤ ì‹ë¬¼ ID\"))`\n\n![](.index_images/f0d0524b.png)\n\n> `pathParameters`ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´\n> \n> mockMvc.perform(`get`(\"/pet-plants/{id}\", 1L) ì—ì„œ\n> \n> `RestDocumentationRequestBuilders`ì˜ `get()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤ëŠ” ë¶€ë¶„ì„ ì‹ ê²½ì¨ì•¼í•œë‹¤.\n> \n> ìì„¸í•œ ë‚´ìš©ì€ [ê³µì‹ë¬¸ì„œ ì°¸ê³ ](https://docs.spring.io/spring-restdocs/docs/current/api/org/springframework/restdocs/mockmvc/RestDocumentationRequestBuilders.html)\n> \n> ![](.index_images/cc09df18.png)\n> ê³ ë§ˆì›Œìš” ! ë¦¬ë·°ì–´ ê·¸ë ˆì´ ! \n\në¬¸ì„œí™”ë¥¼ ìˆ˜í–‰í•˜ê³ ì í•˜ëŠ” ë‚˜ë¨¸ì§€ í…ŒìŠ¤íŠ¸ë“¤ì—ë„ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ ì‘ì„±í•´ì¤€ë‹¤. \n\n### adoc ìŠ¤ë‹ˆí« ìƒì„±í•˜ê¸°\n\n> Snippet : ë‹¨í¸, ë¶€ë¶„ì , ì‘ì€ ì¡°ê°ì´ë¼ëŠ” ëœ»ìœ¼ë¡œ ì—¬ê¸°ì„œëŠ” `ë¬¸ì„œ ì¡°ê°` ì •ë„ë¡œ ì´í•´í•˜ë©´ ëœë‹¤.\n> \n> ë¬¸ì„œ ì¡°ê°ì„ ëª¨ì•„ì„œ í•˜ë‚˜ì˜ ë¬¸ì„œë¥¼ ë§Œë“¤ê²Œ ëœë‹¤.\n\nì´ë ‡ê²Œ ì‘ì„±í•œ í…ŒìŠ¤íŠ¸ë“¤ì„ ìˆ˜í–‰í•´ë³´ì.\n\n![](.index_images/35bc712c.png)\n\nê·¸ëŸ¬ë©´ `build/generated-snippets/{íŒŒë¼ë¯¸í„°ì—ì„œ ì„¤ì •í•œê²½ë¡œ}`ì— adoc íŒŒì¼ì´ ìƒì„±ëœ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.\n\n![](.index_images/5dd3f00f.png)\n\n```adoc\n// http-request.adoc íŒŒì¼\n[source,http,options=\"nowrap\"]\n----\nGET /pet-plants/1 HTTP/1.1\nContent-Type: application/json;charset=UTF-8\nAuthorization: pium@gmail.com\nHost: localhost:8080\n\n----\n```\n\n### asciidoc ë¬¸ì„œ ìƒì„±í•˜ê¸°\n\nìœ„ì—ì„œ ìƒì„±í•œ adoc ìŠ¤ë‹ˆí«ë“¤ì„ ëª¨ì•„ í•˜ë‚˜ì˜ API ë¬¸ì„œë¥¼ ë§Œë“ ë‹¤.\n\n`src > docs > asciidoc` ë””ë ‰í„°ë¦¬ë¥¼ ìƒì„±í•˜ê³  `.adoc` íŒŒì¼ì„ ìƒì„±í•œë‹¤.\n\n![](.index_images/850cce57.png)\n\nAPIê°€ ì—¬ëŸ¬ê°œì¸ ê²½ìš° ê°ê°ì„ íŒŒì¼ë¡œ ê´€ë¦¬í•œ ë’¤ í•˜ë‚˜ì˜ adoc íŒŒì¼ë¡œ includeí•˜ì—¬ í•©ì¹  ìˆ˜ë„ ìˆë‹¤.\n\n#### index.adoc\n\në‹¤ìŒê³¼ ê°™ì´ adoc íŒŒì¼ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.\n\n```adoc\n// index.adoc\n= Pium Application API Document\n:doctype: book\n:source-highlighter: highlightjs\n:sectlinks:\n:toc: left\n:toclevels: 3\n\ninclude::dictionaryPlant.adoc[]\ninclude::petPlant.adoc[]\ninclude::reminder.adoc[]\ninclude::history.adoc[]\n```\n\n```adoc\n// petPlants.adoc\n== ë°˜ë ¤ ì‹ë¬¼(PetPlants)\n\n=== ë°˜ë ¤ ì‹ë¬¼ ë‹¨ê±´ ì¡°íšŒ\n\n==== Request\n\ninclude::{snippets}/petPlant/findById/http-request.adoc[]\ninclude::{snippets}/petPlant/findById/request-headers.adoc[]\ninclude::{snippets}/petPlant/findById/path-parameters.adoc[]\n\n==== Response\n\ninclude::{snippets}/petPlant/findById/http-response.adoc[]\n...\n```\n\nadoc íŒŒì¼ì˜ ìì„¸í•œ ë¬¸ë²•ì€ [asciidoctor ê³µì‹ë¬¸ì„œ ì°¸ê³ ](https://docs.asciidoctor.org/asciidoc/latest/syntax-quick-reference/)\n\n### HTML ë¬¸ì„œ ìƒì„±í•˜ê¸°\n\nì´ì œ ì›¹ í˜ì´ì§€ê°€ ì½ì„ ìˆ˜ ìˆë„ë¡ HTML ë¬¸ì„œë¥¼ ìƒì„±í•´ë³´ì.\n\nHTML ë¬¸ì„œëŠ” `src > docs > asciidoc`ì— ìƒì„±ëœë‹¤.\n\në‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•´ë³´ì.\n\n```shell\n./gradlew asciidoctor\n```\n\n![](.index_images/3b9772e1.png)\n\nê·¸ëŸ¬ë©´ `build > docs > asciidoc` ê²½ë¡œì— ë¬¸ì„œê°€ ìƒì„±ëœë‹¤.\n\n![](.index_images/5daac1d0.png)\n\n### ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í™•ì¸í•´ë³´ê¸°\n\nhttp://localhost:8080/docs/index.html ìœ¼ë¡œ ì ‘ì†í•´ì„œ ë¬¸ì„œë¥¼ í™•ì¸í•´ë³´ì.\n\nìš°ì„  gradle buildë¥¼ ìˆ˜í–‰í•œë‹¤.\n\n```shell\n./gradlew build\n```\n\n![](.index_images/adb0a6ab.png)\n\nì´ì „ì— Gradleì—ì„œ ì‘ì„±í–ˆë˜ ìŠ¤í¬ë¦½íŠ¸ ë‚´ìš© ì¤‘ copyDocument Taskê°€ buildê°€ ì¼ì–´ë‚œ ë’¤ ìˆ˜í–‰ë˜ê¸° ë•Œë¬¸ì´ë‹¤.\n\n```gradle\ntask copyDocument(type: Copy) { // ìƒì„±ëœ html íŒŒì¼ì„ ì˜®ê¸´ë‹¤\n    dependsOn asciidoctor // Gradleì˜ asciidoctor Task ì´í›„ ìˆ˜í–‰\n    from file(\"${asciidoctor.outputDir}\")\n    into file(\"src/main/resources/static/docs\")\n}\n\nbuild {\n    dependsOn copyDocument // build ì´í›„ html íŒŒì¼ ë³µì‚¬\n}\n```\n\nê·¸ëŸ¬ë©´ `src > main > resources > static > docs` ê²½ë¡œì— HTML ë¬¸ì„œê°€ ìƒì„±ëœë‹¤.\n\n![](.index_images/6b2555b4.png)\n\në¡œì»¬ì—ì„œ êµ¬ë™ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì€ í•´ë‹¹ ê²½ë¡œë¥¼ ì°¸ì¡°í•˜ê¸° ë•Œë¬¸ì— íŒŒì¼ì„ ë³µì‚¬í•´ì¤¬ë‹¤.\n\nì´ì œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™í•˜ê³  http://localhost:8080/docs/index.html ë¡œ ì ‘ì†í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë¬¸ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n![](.index_images/ad2fa30b.png)\n\n## Reference\n\n- https://spring.io/projects/spring-restdocs\n- https://hudi.blog/spring-rest-docs/\n- https://techblog.woowahan.com/2597/\n- https://dallog.github.io/apply-rest-docs/"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'í´ë¦°'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. OAuthë€? í˜„ì¬ ê°œë°œí•˜ê³  ìˆëŠ” ì„œë¹„ìŠ¤ì—ì„œ êµ¬ê¸€ ìº˜ë¦°ë”ì— ì ‘ê·¼ì„ í•œë‹¤ê³  ê°€ì •ì„ í•´ë´…ì‹œë‹¤. í˜„ì¬ ì ‘ê·¼í•˜ëŠ” ì‚¬ìš©ìì˜ êµ¬ê¸€ ìº˜ë¦°ë” ì •ë³´ë¥¼ ì–»ê³ ì í•œë‹¤ë©´ êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ì„ í•´ì•¼í•©ë‹ˆë‹¤. ì§„ì§œ ê°„ë‹¨í•œ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìë¡œë¶€í„° êµ¬ê¸€ idì™€ passwordë¥¼ ë°›ê³  ì €í¬ê°€ ëŒ€ì‹  ë¡œê·¸ì¸ í•´ì„œ í•´ë‹¹ ì‚¬ìš©ìì˜ â€¦","fields":{"slug":"/OAuth2.0/"},"frontmatter":{"date":"August 10, 2023","title":"ë‚´ê°€ ì´í•´í•œ OAuth2.0","tags":["OAuth2.0"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[í´ë¦°](https://github.com/hozzijeong)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n\n## OAuthë€?\n\ní˜„ì¬ ê°œë°œí•˜ê³  ìˆëŠ” ì„œë¹„ìŠ¤ì—ì„œ êµ¬ê¸€ ìº˜ë¦°ë”ì— ì ‘ê·¼ì„ í•œë‹¤ê³  ê°€ì •ì„ í•´ë´…ì‹œë‹¤. í˜„ì¬ ì ‘ê·¼í•˜ëŠ” ì‚¬ìš©ìì˜ êµ¬ê¸€ ìº˜ë¦°ë” ì •ë³´ë¥¼ ì–»ê³ ì í•œë‹¤ë©´ êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ì„ í•´ì•¼í•©ë‹ˆë‹¤. ì§„ì§œ ê°„ë‹¨í•œ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìë¡œë¶€í„° êµ¬ê¸€ idì™€ passwordë¥¼ ë°›ê³  ì €í¬ê°€ ëŒ€ì‹  ë¡œê·¸ì¸ í•´ì„œ í•´ë‹¹ ì‚¬ìš©ìì˜ ê³„ì • ì •ë³´ë¥¼ ë°›ì•„ì˜¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ ì´ ë°©ë²•ì€ ë§¤ìš° ìœ„í—˜í•©ë‹ˆë‹¤. ê³„ì • ì •ë³´ê°€ íƒˆì·¨ë‹¹í•  ìˆ˜ë„ ìˆê³ , ì• ì´ˆì— **ëŒ€ë¦¬ ë¡œê·¸ì¸**ì´ë¼ë‹ˆ ì‹ ê°œë… ë³´ì´ìŠ¤í”¼ì‹±ìœ¼ë¡œ ì˜¤í•´ë°›ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\nì œì¼ ê´œì°®ì€ ë°©ë²•ì€ êµ¬ê¸€ ìì²´ì—ì„œ ë¡œê·¸ì¸ ì„œë¹„ìŠ¤ë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ” ë°©ì‹ì„ ë§Œë“¤ì–´ì„œ ì œê³µì„ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì‹¤ì œë¡œ  ê³¼ê±°ì— AuthSubë¼ëŠ” ìì²´ ê°œë°œí•œ ë°©ë²•ì„ í†µí•´ êµ¬í˜„ì„ í–ˆì§€ë§Œ ì´ ì •í˜•í™” ë˜ì§€ ì•Šì€ ë°©ë²•ì€ ë‹¤ì–‘í•œ ë¬¸ì œë¥¼ ì•¼ê¸°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. í”íˆ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸, êµ¬ê¸€ ë¡œê·¸ì¸, ê¹ƒí—™ ë¡œê·¸ì¸ ë“±ë“± ì—¬ëŸ¬ê°€ì§€ì˜ ë°©ì‹ì´ ì¡´ì¬í•˜ëŠ”ë° í˜•ì‹ì´ í†µì¼ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ ì´ ëª¨ë“  ê²ƒë“¤ì„ ê°ê° êµ¬í˜„í•´ì„œ ì‚¬ìš©ì„ í•´ì•¼í•˜ëŠ” ë¬¸ì œì ì´ ìˆìŠµë‹ˆë‹¤. \n\nì´ëŸ¬í•œ ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë‚˜íƒ€ë‚œ ê°œë…ì´ OAuthì…ë‹ˆë‹¤. ì´ˆê¸° ë²„ì „ì¸ 1.0ì€ ë²”ìœ„ë¬¸ì œ, ë¶ˆí™•ì‹¤í•œ ì—­í• , ë³´ì•ˆ ë¬¸ì œë“±ìœ¼ë¡œ ì¸í•´ì„œ ë§ì´ ì‚¬ìš© ë˜ì§€ ì•Šê³  OAuth 2.0ì´ í†µìƒì ìœ¼ë¡œ ë§ì´ ì‚¬ìš© ë˜ê³  ìˆìŠµë‹ˆë‹¤. \n\n> ğŸ’¡ **ì¸ì¦ê³¼ ì¸ê°€**: ì¸ì¦ì€ ìš”ì²­ìì˜ ì‹ ì›ì„ í™•ì¸í•˜ëŠ” ê²ƒì´ê³ , ì¸ê°€ëŠ” ì‹ ì›ì´ í™•ì¸ëœ ì–´ëŠ ì‚¬ëŒì´ ê¶Œí•œì´ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê°œì¸ì ìœ¼ë¡œ ìƒê°í–ˆì„ë•Œ ì¸ì¦ì€ ì‚¬ëŒì˜ ì§ì—… ê²€ì¦í•˜ëŠ” ê²ƒì´ê³  ì¸ê°€ëŠ” ê·¸ ì‚¬ëŒì˜ ì§ì±…ì„ í†µí•´ ê¶Œí•œì„ ì ‘ê·¼í•œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. (ì§ì±…ì— ë”°ë¥¸ ì •ë³´ ì ‘ê·¼ ê¶Œí•œì´ ë‹¤ë¥´ê¸° ë•Œë¬¸)\n\n\n## OAuth 2.0\n\nOAuth2.0ì„ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” í¬ê²Œ 4ê°€ì§€ ìš©ì–´ë¥¼ ì•Œê³  ìˆìœ¼ë©´ ë©ë‹ˆë‹¤. ë°”ë¡œ Resource Owner, Client, Resource Server, Authorization Serverì…ë‹ˆë‹¤. ê°ê°ì˜ ì—­í• ê³¼ ì„¤ëª…ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n![image](https://github.com/pium-official/pium-official.github.io/assets/50974359/c65c8e80-b04a-4b51-b66a-dbdd6d43b543)\n\n- `Resource Owner`**:** ë¦¬ì†ŒìŠ¤(ì •ë³´)ì˜ ì£¼ì¸. ì¦‰,ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ê³ ì í•˜ëŠ” ì‚¬ìš©ìë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.\n- `Client`: ë¦¬ì†ŒìŠ¤(ì •ë³´)ë¥¼ ê°€ê³µ í˜¹ì€ Resource Ownerì—ê²Œ ì œê³µí•˜ëŠ” ì£¼ì²´. OAuth 2.0ì„ ê°œë°œí•˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜(ì„œë¹„ìŠ¤)ì„ ì˜ë¯¸í•œë‹¤.\n- `Resource Server`: ë¦¬ì†ŒìŠ¤(ì •ë³´)ë¥¼ ê°–ê³  ìˆëŠ” ì£¼ì²´. í”íˆ ì¹´ì¹´ì˜¤, êµ¬ê¸€, Githubë“± ì‚¬ìš©ì ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ì£¼ì²´ë¥¼ ì˜ë¯¸í•œë‹¤.\n- `Authorization Server`: Resource Ownerë¥¼ ì¸ì¦í•˜ê³ , Clientì— ì¸ê°€ë¥¼ í• ë‹¹í•˜ëŠ” ì—­í• ì´ë‹¤.\n\nOAuthë¥¼ ê°€ì¥ ë§ì´ ë„ì…í•œ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ëŠ” ì†Œì…œ ë¡œê·¸ì¸ì…ë‹ˆë‹¤. í•˜ë‚˜ì˜ ì˜ˆì‹œë¥¼ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ Todoì•±ì— ì ‘ê·¼í•˜ë ¤ê³  í•©ë‹ˆë‹¤. ì‚¬ìš©ìì˜ Todoì¸ì§€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” ë¡œê·¸ì¸ ê¸°ëŠ¥ì´ í•„ìš”í•©ë‹ˆë‹¤. ê·¸ëŸ°ë° ì‚¬ìš©ìëŠ” íšŒì›ê°€ì…ì„ í•˜ê¸° ê·€ì°®ìŠµë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ì‚¬ìš©ìì˜ ê¸°ë³¸ ì •ë³´ (ì´ë©”ì¼, ë‹‰ë„¤ì„, í”„ë¡œí•„ ì‚¬ì§„ ë“±)ë¥¼ ê°–ê³  ìˆëŠ” ì†Œì…œ ë„¤íŠ¸ì›Œí¬ê°€ ìˆë‹¤ê³  ìƒê°í•´ ë´…ì‹œë‹¤. ClientëŠ” ì´ ì†Œì…œ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ì„œ ì‚¬ìš©ìì—ê²Œ ê°„ë‹¨í•œ íšŒì›ê°€ì…/ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ ë³¸ì¸ì´ Todoì•±ì— íšŒì›ê°€ì…ì„ í•˜ê³ , ë‚˜ì˜ Todoë¥¼ ì¹´ì¹´ì˜¤ ìŠ¤í† ë¦¬ì— ê³µìœ í•œë‹¤ê³  ìƒìƒí•˜ê³  OAuthì˜ ë™ì‘ê³¼ì •ì— ëŒ€í•´ í•œë²ˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\n\n> ğŸ’¡ OAuthì—ëŠ” í¬ê²Œ 4ê°€ì§€ grant(ìŠ¹ì¸ ë°©ì‹)ê°€ ìˆëŠ”ë°, ì´ë²ˆì— ë‹¤ë£¨ëŠ” ìŠ¹ì¸ ë°©ì‹ì€ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ê³  ìˆëŠ” **Authorization Code Grant(ê¶Œí•œ ë¶€ì—¬ ìŠ¹ì¸ ì½”ë“œ ë°©ì‹)** ì„ í†µí•´ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.\n\n![image](https://github.com/pium-official/pium-official.github.io/assets/50974359/e4f90a4b-6783-4d32-974a-2fdc2c5d3ae3)\n\n- ì²« ë²ˆì§¸ëŠ” ë¡œê·¸ì¸ ìš”ì²­ì…ë‹ˆë‹¤. í”íˆ ìš°ë¦¬ê°€ ì•Œê³ ìˆëŠ” â€œì¹´ì¹´ì˜¤ë¡œ ë¡œê·¸ì¸í•˜ê¸°â€ë¥¼ í´ë¦­ í–ˆì„ ë•Œ ë‚˜ì˜¤ëŠ” ì„¤ì •ë˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ë•Œ Authorization Serverì— 4ê°€ì§€ íŒŒë¼ë¯¸í„°ë¥¼ ë™ë´‰í•´ì„œ ë³´ëƒ…ë‹ˆë‹¤.\n    - client_id(required): Serverì—ì„œ ë°œê¸‰ë°›ì€ ì¸ì¦ idì…ë‹ˆë‹¤.\n    - redirect_uri(optional): Serverì— ë“±ë¡í•  ë•Œ í•¨ê»˜ ì…ë ¥í•œ redirect_uriì…ë‹ˆë‹¤.\n    - response_type(required): ë°˜ë“œì‹œ`code`ë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.\n    - scope(optional): ì œê³µí•˜ëŠ” ì •ë³´ ë²”ìœ„ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\n- Authorization Serverì—ì„œ Resource Ownerì—ê²Œ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ì´ ëœë‹¤ë©´, ë¯¸ë¦¬ ì…ë ¥ë°›ì€ redierct_urië¡œ ì´ë™í•©ë‹ˆë‹¤.\n- í•´ë‹¹ urië¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë˜ë©´ì„œ í•¨ê»˜ ë™ë´‰ë˜ì–´ ì˜¨ Authorization Codeë¥¼ ë°›ê³  ì´ ì½”ë“œë¥¼ Access Tokenìœ¼ë¡œ êµí™˜í•©ë‹ˆë‹¤.\n- êµí™˜í•œ Access Tokenì„ í†µí•´ì„œ Resource Serverì—ì„œ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (Todoì¼ì •ì„ ì¹´ì¹´ì˜¤ ìŠ¤í† ë¦¬ì— ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!!)\n\nìœ„ì™€ ê°™ì€ ê³¼ì •ì„ í†µí•´ì„œ OAuthë¥¼ í†µí•´ì„œ ì œ 3ì˜ ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©ìì˜ ì •ë³´ì— ì¸ê°€ë¥¼ ë°›ì•„ì„œ ê°€ê³µí•˜ê±°ë‚˜ ì§ì ‘ì ìœ¼ë¡œ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì‚¬ìš©ìë¡œë¶€í„° ë¡œê·¸ì¸ ì •ë³´ë¥¼ ë°›ì•„ì„œ ë¡œê·¸ì¸ì„ í•˜ê³  ì‚¬ìš©ìì˜ ê¶Œí•œì„ ë¶€ì—¬ë°›ì€ Access Tokenì„ í†µí•´ì„œ Reource Serverë¡œë¶€í„° ë°ì´í„°ë¥¼ ì–»ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n---\n\n### OAuthê³µë¶€ë¥¼ í•˜ë©´ì„œ ë“¤ì—ˆë˜ ì˜ë¬¸ì \n\nAccess Tokenì„ í†µí•´ì„œ Resourceì— ìˆëŠ” ë°ì´í„°ë¥¼ ì–»ëŠ” ê²ƒì€ ì•Œê² ëŠ”ë°, ê·¸ë˜ì„œ ì´ê²Œ ë¡œê·¸ì¸ì´ë‘ ì–´ë–¤ ê´€ë ¨ì´ ìˆëŠ”ê°€? ê·¸ë¦¬ê³ , Client DBì— ìˆëŠ” ë°ì´í„°ë‚˜ APIë‘ë„ ê´€ë ¨ì´ ìˆë‚˜?\n\nAuthorization Serverë¥¼ í†µí•´ì„œ ë„˜ê²¨ë°›ì€ Access Tokenì„ í™œìš©í•˜ë©´ ì†Œì…œ ë¡œê·¸ì¸ì„ êµ¬í˜„í•  ìˆ˜ ìˆì—ˆê³ , í•´ë‹¹ í† í°ì„ í†µí•´ì„œ ëª¨ë“  ì •ë³´ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê² êµ¬ë‚˜ ìƒê°ì„ í–ˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ Access Tokenì€ Resource Serverì— ìˆëŠ” ë°ì´í„°ë¥¼ ì–»ëŠ”ë° í•„ìš”í•œ Access Tokenì´ê³  **Client ë‚´ë¶€ì—ì„œ ì ‘ê·¼í•˜ëŠ” DBì™€ APIë‘ì€ ê´€ë ¨ì´ ì—†ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.**\n\nClientì—ì„œëŠ” ë„˜ê²¨ë°›ì€ Access Tokenì„ í†µí•´ì„œ ê°œë³„ì ìœ¼ë¡œ êµ¬ì¶•í•œ member DBì—ì„œ í•´ë‹¹ ìœ ì €ë¥¼ ì‹ë³„í•˜ê³ , ê·¸ì— ë§ëŠ” ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.\n\n![image](https://github.com/pium-official/pium-official.github.io/assets/50974359/e6c1a44b-6e6e-4034-bca6-cfe9e2c5d8c0)\n\në¡œê·¸ì¸ ê¸°ëŠ¥ì„ ê°œë³„ì ìœ¼ë¡œ êµ¬í˜„í•´ì•¼ í•œë‹¤ëŠ” ì–˜ê¸°ë¥¼ ë“£ê³ , Clientì˜ ì—­í• ì„ ì–´ë–»ê²Œ ë¶„ë¦¬ê°€ ë˜ëŠ”ì§€ì— ëŒ€í•´ ì˜ë¬¸ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ClientëŠ” ì‚¬ìš©ìê°€ ì´ìš©í•˜ëŠ” ì•± ì„œë¹„ìŠ¤ì¸ë°, ì‚¬ìš©ìì™€ ì§ì ‘ì ì¸ ì¸í„°ë ‰ì…˜ì„ í•˜ëŠ” Client(FE)ì™€ ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” Sever(BE)ë¡œ ë¶„ë¦¬ê°€ ë©ë‹ˆë‹¤. \n\nê·¸ë ‡ë‹¤ë©´ OAuthë¥¼ ì´ìš©í•œ ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í•  ë•Œ Clientì•ˆì—ì„œëŠ” ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚ ê¹Œìš”?\n\n1. ì‚¬ìš©ì ë¡œê·¸ì¸ í˜ì´ì§€ ì œê³µ (FE)\n2. redirect_urië¡œ ì´ë™ì‹œí‚¤ê³ , ë„˜ê²¨ë°›ì€ Autorization Codeë¥¼ BEë¡œ ë„˜ê²¨ì¤Œ (FE)\n3. FEë¡œë¶€í„° ë„˜ê²¨ë°›ì€ Autorization Codeë¥¼ Authorization Serverì— ì „ë‹¬í•˜ê³ , Access Tokenê³¼ Refresh Tokenì„ ë°›ìŒ(BE)\n4. ë„˜ê²¨ ë°›ì€ Access Tokenì„ í†µí•´ Resource Owner ì •ë³´ ì¡°íšŒ(BE)\n5. DB Tableì— í•´ë‹¹ ìœ ì € í™•ì¸ í›„ Client Sessionì´ë‚˜ Client Token ì „ë‹¬(BE)\n6. ì „ë‹¬ ë°›ì€ Sessionì´ë‚˜ Tokenì„ í†µí•´ì„œ ìœ ì € ë¡œê·¸ì¸ ìœ ì§€ (FE)\n7. ì‚¬ìš©ìê°€ Clientì˜ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ê³ ì í•  ë•Œ Client Sessionì„ í†µí•´ ì¸ì¦ì„ í•¨ (FE)\n8. Clientì—ì„œ ì œê³µí•˜ê³ ì í•˜ëŠ” ë°ì´í„°ê°€ Resource Serverì—ì„œ ì–»ì–´ì•¼ í•˜ëŠ” ë°ì´í„°ë¼ë©´, ì €ì¥í•´ ë†“ì•˜ë˜ Access Tokenì„ í†µí•´ Resource Serverë¡œ ë¶€í„° ë°ì´í„°ë¥¼ ë°›ì•„ì˜´. ê·¸ë¦¬ê³  Clientì—ì„œ ì œê³µí•˜ëŠ” APIì™€ ì˜ ì¡°í•©í•´ì„œ ë°ì´í„° ì œê³µ(BE)\n9. ì‚¬ìš©ìê°€ í™•ì¸ ê°€ëŠ¥í•˜ê²Œ UIì œê³µ (FE)\n\n![image](https://github.com/pium-official/pium-official.github.io/assets/50974359/a668a660-8b62-4fbd-8caf-e3998c570a1c)\n\nClientì—ì„œì˜ ì—­í• ì„ ë‚˜ëˆ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n### FE\n\n- ë¡œê·¸ì¸ í˜ì´ì§€ ì œê³µ\n- redirect_urië¥¼ í†µí•´ Authorization Code ì „ë‹¬\n- Resource Serverì— ë§ëŠ” UI ì œê³µ\n\n### BE\n\n- ì „ë‹¬ë°›ì€ Authorization Codeë¥¼ í†µí•´ Access Token êµí™˜\n- Access Tokenì„ í†µí•´ Resource Serverì— ìˆëŠ” ë°ì´í„° ìš”ì²­ ë° ê°€ê³µ\n- Access Tokenë§Œë£Œ ì‹œ Refresh Tokenìœ¼ë¡œ Access Token ê°±ì‹ \n\n---\n\n### ì°¸ì¡°\n\n[OAuthì˜ ì¸ì¦ ì¢…ë¥˜](https://blog.naver.com/mds_datasecurity/222182943542)\n\n[OAuthì˜ ê°œë…ê³¼ ë™ì‘ ì›ë¦¬](https://hudi.blog/oauth-2.0/)\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'í´ë¦°'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. style-lint, huskyë¥¼ í†µí•œ ì»¨ë²¤ì…˜ ìë™í™” í•˜ê¸° í”„ë¡œì íŠ¸ëŠ” í˜¼ì í•  ìˆ˜ ë„ ìˆì§€ë§Œ íŒ€ì›ë“¤ê³¼ í•¨ê»˜ ì§„í–‰í•˜ëŠ” ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤. í”¼ì›€ì˜ ê²½ìš°ì— íŒ€ì›ë“¤ê³¼ í•¨ê»˜ ì§„í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê°œì¸ì ìœ¼ë¡œ ìƒê°í–ˆì„ ë•Œ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤ëŠ” ê²ƒì€ ê·¸ ìì²´ë¡œ í•˜ë‚˜ì˜ ë¬¸ì„œë¥¼ ë§Œë“œëŠ” ê²ƒì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ ë¬¸ì„œì˜ ì–‘â€¦","fields":{"slug":"/stylelint-and-husky/"},"frontmatter":{"date":"August 07, 2023","title":"stylelintì™€ huskyë¥¼ í†µí•´ ì»¨ë²¤ì…˜ í†µì¼í•˜ê¸°","tags":["stylelint","husky","ì»¨ë²¤ì…˜"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[í´ë¦°](https://github.com/hozzijeong)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n# style-lint, huskyë¥¼ í†µí•œ ì»¨ë²¤ì…˜ ìë™í™” í•˜ê¸°\n\ní”„ë¡œì íŠ¸ëŠ” í˜¼ì í•  ìˆ˜ ë„ ìˆì§€ë§Œ íŒ€ì›ë“¤ê³¼ í•¨ê»˜ ì§„í–‰í•˜ëŠ” ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤. í”¼ì›€ì˜ ê²½ìš°ì— íŒ€ì›ë“¤ê³¼ í•¨ê»˜ ì§„í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê°œì¸ì ìœ¼ë¡œ ìƒê°í–ˆì„ ë•Œ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤ëŠ” ê²ƒì€ ê·¸ ìì²´ë¡œ í•˜ë‚˜ì˜ ë¬¸ì„œë¥¼ ë§Œë“œëŠ” ê²ƒì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ ë¬¸ì„œì˜ ì–‘ì‹ì„ í†µì¼í•˜ëŠ” ê²ƒì´ ê°€ë…ì„±ì´ë‚˜ ìœ ì§€ ë³´ìˆ˜ë¥¼ ìˆ˜ì›”í•˜ê²Œ í•œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ê°ê°ì˜ íŒ€ë°”ë‹¤ ì½”ë“œ ì»¨ë²¤ì…˜ì´ ì¡´ì¬í•˜ê³ , ê·¸ ì»¨ë²¤ì…˜ì„ ê°•ì œí•˜ë„ë¡ í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ (`eslint`, `prettier`)ì´ ì¡´ì¬í•©ë‹ˆë‹¤. \n\nì´ë²ˆì— ì†Œê°œí•  ê¸°ëŠ¥ì€ cssì»¨ë²¤ì…˜ì„ ë§ì¶œ ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” style-lintì™€ git ë©”ì„¸ì§€ ì–‘ì‹ì„ ì§€ì •í•´ì£¼ëŠ” huskyì— ëŒ€í•´ ì†Œê°œí•´ ë³´ë ¤ í•©ë‹ˆë‹¤. \n\n### Stylelint\n\n[ë§í¬](https://stylelint.io/)\n\n> A mighty CSS linter that helps you avoid errors and enforce conventions.\n> \n\nstylelintì˜ ì†Œê°œê¸€ ì…ë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ ë§í•´ì„œ css ì—ëŸ¬ë¥¼ í”¼í•˜ê³  ì»¨ë²¤ì…˜ì„ ê°•ìš”í•˜ë„ë¡ í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì„¤ì¹˜ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì €í¬ëŠ” styled-componentë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ìš”ê±´ì— ë§ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤.\n\n```bash\nnpm install --save-dev stylelint stylelint-config-styled-components\n```\n\në¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ê°€ ëë‚˜ë©´ `.stylelintic`ì´ë¼ëŠ” íŒŒì¼ì—ì„œ ì›í•˜ëŠ” cssê·œì¹™ì„ ê²°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \n\n```json\n{\n  \"extends\": [\"stylelint-config-clean-order\", \"stylelint-config-styled-components\"],\n  \"plugins\": [\"stylelint-order\"],\n  \"customSyntax\": \"postcss-styled-syntax\"\n}\n```\n\ní”¼ì›€ì—ì„œëŠ” `stlyelint-order`ë¼ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•œ ë’¤ì— í•´ë‹¹ ê·œì¹™ì— ë”°ë¼ css ì»¨ë²¤ì…˜ì„ ì •í–ˆìŠµë‹ˆë‹¤. ì‹¤í–‰ì‹œí‚¤ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n```json\n\"scripts\": {\n\t\"stylelint\": \"stylelint --ignore-path .gitignore '**/*.(ts|tsx)'\",\n}\n```\n\nìœ„ì™€ê°™ì´ ì„¤ì •í•˜ê³  ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ê²Œ ëœë‹¤ë©´ cssíŒŒì¼ì„ ëŒë©´ì„œ ê·œì¹™ì— ë§ì§€ ì•ŠëŠ” íŒŒì¼ì„ ì°¾ì•„ì¤ë‹ˆë‹¤. \n\n```bash\nnpm run stylelint\n```\n\n![image](https://github.com/pium-official/pium-official.github.io/assets/50974359/ddb7ccf7-48ac-498f-a01b-199966021c93)\n\n\ní•˜ì§€ë§Œ ìš°ë¦° ì¢€ ë” í¸í•œê±¸ ì›í•©ë‹ˆë‹¤. ë§¤ë²ˆ ì‹¤í–‰ì‹œí‚¤ê³  ê²½ê³ ì°½ë“¤ì„ ë³€ê²½í•˜ê¸° ë³´ë‹¤ ì‹¤í–‰ì‹œí‚¬ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ ìˆ˜ì •ì‹œì¼œì£¼ëŠ”ê±¸ ì›í•©ë‹ˆë‹¤. ë§Œì•½ ê·¸ê²ƒì„ ì›í•œë‹¤ë©´ ëª…ë ¹ì–´ì— `â€”fix`ë§Œì„ ì¶”ê°€í•´ì£¼ë©´ ë©ë‹ˆë‹¤.\n\n```json\n\"scripts\": {\n\t\"stylelint\": \"stylelint --ignore-path .gitignore '**/*.(ts|tsx)' --fix\",\n}\n```\n\n\nhttps://github.com/pium-official/pium-official.github.io/assets/50974359/0f9aa05c-a861-4601-a959-58754752294d\n\n\nì—¬ê¸°ì— ë” ê°€ì„œ íŒŒì¼ì„ ì €ì¥í•  ë•Œë§ˆë‹¤ ì‹¤í–‰ì‹œí‚¬ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\nvscì˜ `setting.json`ì— ë“¤ì–´ê°€ì„œ stylelintì— ëŒ€í•œ ì„¤ì •ì„ í•´ì£¼ë©´ ë©ë‹ˆë‹¤. (vsCode extensionì„ ë¨¼ì € ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤)\n\n```json\n//...\n\t\"editor.codeActionsOnSave\": {\n\t\t\"source.fixAll.stylelint\": true,\n\t\t\"source.fixAll.eslint\": true,\n\t\t\"source.fixAll.prettier\": true\n\t},\n\t\"stylelint.validate\": [\n\t\t\"typescript\",\n\t\t\"typescriptreact\",\n\t\t\"css\",\n\t\t\"less\",\n\t\t\"postcss\",\n\t\t\"scss\",\n\t\t\"html\",\n\t\t\"javascript\",\n\t\t\"vue-html\",\n\t\t\"vue-postcss\",\n\t\t\"sass\",\n\t\t\"markdown\",\n\t\t\"vue\"\n\t],\n//...\n```\n\ncodeActionOnSaveëŠ” ì €ì¥í• ë•Œë§ˆë‹¤ stylelintì— ìˆëŠ” ëª¨ë“  ê²ƒì„ fixí•œë‹¤ëŠ” ê²ƒì´ê³  ì•„ë˜ì— ìˆëŠ” stylelint.validateëŠ” í•´ë‹¹ ì˜µì…˜ì„ ì ìš©ì‹œí‚¬ í™•ì¥ìë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ìœ„ì™€ ê°™ì´ ì„¤ì •í•˜ê³  ì €ì¥í•œë‹¤ë©´ ì €ì¥ì„ í•  ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ ì»¨ë²¤ì…˜ ì ìš©ì´ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### Husky\n\n[ë§í¬](https://typicode.github.io/husky/)\n\n> Husky improves your commits and more ğŸ¶Â *woof!*\n> \n> \n> You can use it toÂ **lint your commit messages**,Â **run tests**,Â **lint code**, etc... when you commit or push. Husky supportsÂ **[all Git hooks](https://git-scm.com/docs/githooks)**.\n> \n\nì´ë²ˆì—ëŠ” `git`ì— ëŒ€í•œ ì»¨ë²¤ì…˜ì„ ë§ì¶”ê¸° ìœ„í•´ `husky`ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ `git hook`ì„ ì‹¤í–‰í•˜ë³´ë ¤ í•©ë‹ˆë‹¤. `git`ì—ëŠ” `commit`, `push` ë“±ì˜ ëª…ë ¹ì–´ê°€ ìˆì§€ë§Œ, ê°ê°ì˜ ëª…ë ¹ì–´ê°€ ì‹¤í–‰ë˜ê¸° ì „ì— ì „ë°˜ì ìœ¼ë¡œ ì‹¤í–‰ì‹œí‚¤ê³  ì‹¶ì€ ëª…ë ¹ì–´ê°€ ìˆê±°ë‚˜, ì»¨ë²¤ì…˜ì„ ë§ì¶”ê±°ë‚˜, `commit` ë©”ì„¸ì§€ í˜•ì‹ì„ ê°•ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì¼ë ¨ì˜ ê³¼ì •ì´ í•„ìš”í•œ ì´ìœ ëŠ” íŒ€ ì»¨ë²¤ì…˜ì— ë§ì¶°ì§„ **ì‹ ë¢°ì„± ìˆëŠ” ì½”ë“œ**ë¥¼ ì›ê²© ì €ì¥ì†Œì— ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ì…ë‹ˆë‹¤. ì˜ˆì‹œë¡œ ì•ì„œ ì–˜ê¸°í•œ `stylelint`ê°€ ì ìš©ì´ ë˜ì§€ ì•Šì€ ì½”ë“œê°€ ì›ê²© ì €ì¥ì†Œì— ì˜¬ë¼ê°€ê²Œ ëœë‹¤ë©´, ì»¨ë²¤ì…˜ì´ ë§ì¶°ì§€ì§€ ì•Šì€ê²ƒì´ê³  ê³µí†µëœ ë¬¸ì„œë¡œì¨ì˜ ì—­í• ì„ ìƒì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì— ê°ê°ì˜ ëª…ë ¹ì–´ê¸° ì‹¤í–‰ë˜ê¸° ì „ì— ë‹¨ê³„ë¥¼ `pre`ë¼ëŠ” ì ‘ë‘ì‚¬ë¥¼ ë¶™ì—¬ì„œ `pre-commit` ë˜ëŠ” `pre-push`ë‹¨ê³„ë¼ê³  í•˜ëŠ”ë°, ì´ ê°ê°ì˜ ë‹¨ê³„ì—ì„œ `test`ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜ build`ë¥¼` ì‹¤í–‰í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\në‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```bash\nnpm install husky --save-dev\nnpx husky install // ì´ ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ git hookì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨.\n```\n\n`hooks`ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.Â `husky add <file> [cmd]`Â â†’ ì´ì™€ ê°™ì€ í˜•ì‹ìœ¼ë¡œ `husky` í´ë”ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ë‹¨, í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ê¸° ì „ì— `husky install`ì„ ê¼­ í•´ì•¼í•©ë‹ˆë‹¤!)\n\n```bash\nnpx husky add .husky/pre-commit \"npm test\"\n```\n\nìœ„ì™€ê°™ì´ ì„¤ì •í•˜ê³  ë‚˜ë©´ .huskyí´ë”ì— ë‹¤ìŒê³¼ ê°™ì€ íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.\n\n![image](https://github.com/pium-official/pium-official.github.io/assets/50974359/82a9d271-4748-4871-be3a-220ca36c2de0)\n\nì´ì œ ëª¨ë“  ì»¤ë°‹ì„ í•˜ê¸° ì „ì— `npm test`ëª…ë ¹ì–´ê°€ ì‹¤í–‰ë˜ê²Œ ë©ë‹ˆë‹¤. ì´ì œ, `test`ë¥¼ í†µê³¼í•˜ì§€ ëª»í•œë‹¤ë©´ `commit`ì€ ì¼ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì›ê²© ì €ì¥ì†Œì— ì˜¬ë¼ê°€ëŠ” ì½”ë“œë“¤ì˜ ì‹ ë¢°ì„±ì€ ê¸‰ìƒìŠ¹ í•˜ê²Œ ë©ë‹ˆë‹¤! \n\ní•˜ì§€ë§Œ í•˜ë‚˜ì˜ ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤. í”¼ì›€ í”„ë¡œì íŠ¸ë¥¼ ëª¨ë…¸ë ˆí¬ í˜•ì‹ìœ¼ë¡œ ì§„í–‰í•˜ê³  ìˆëŠ”ë°, `husky`ê°€ `githook`ì´ê¸° ë•Œë¬¸ì— `npm`ì— ì˜ì¡´ì„±ì´ ì—†ëŠ” `backend` í´ë”ì—ì„œë„ ì»¤ë°‹ì´ ë°œìƒí•˜ê¸° ì „ì— í•´ë‹¹ `npm test`ê°€ ì‹¤í–‰ëœë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì´ëŠ” ìƒë‹¹íˆ ì¢‹ì§€ ëª»í•©ë‹ˆë‹¤â€¦ `pre-commit` ë‹¨ê³„ì—ì„œ ëª…ë ¹ì–´ë¥¼ `cd frontend && npm test`ì™€ ê°™ì´ ë³€ê²½í•´ì„œ ì‹¤í–‰í•´ë´ë„ ë°±ì—”ë“œì—ì„œ ì»¤ë°‹ì„ í• ë•Œë§ˆë‹¤ í•´ë‹¹ ëª…ë ¹ì–´ê°€ ì‹¤í–‰ëœë‹¤ëŠ”ê²Œ ìƒë‹¹íˆ ë¹„íš¨ìœ¨ì ì¸ ë°©ì‹ì´ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ í”¼ì›€ í”„ë¡ íŠ¸ì—”ë“œ CIëŠ” huskyë¡œ ì§„í–‰í•˜ì§€ ì•Šê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. ë‹¨, `commit` ë©”ì„¸ì§€ í˜•íƒœëŠ” ê°•ì œí•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. `git` ì»¨ë²¤ì…˜ì¸ ë¶€ë¶„ì´ë¼ FE/BE ëª¨ë‘ ê³µí†µìœ¼ë¡œ í•´ë‹¹ë˜ëŠ” ë‚´ìš©ì´ì—ˆê¸°ì— í•´ë‹¹ ë¶€ë¶„ë§Œ ì¶”ê°€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ `husky`ë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.\n\n```bash\n#!/usr/bin/env sh\n. \"$(dirname -- \"$0\")/_/husky.sh\"\n\n# ì»¤ë°‹ ì»¨ë²¤ì…˜\n# 0. ê²€ì‚¬ ì˜ˆì™¸ ì¡°ê±´ (ìë™ ìƒì„±, ìµœì´ˆ ì»¤ë°‹)\n# - Merge branch*, Merge pull request*, initial*\n# 1. ì ‘ë‘ì‚¬ì˜ ê¸€ìëŠ” ì†Œë¬¸ì\n# 2. ë§¨ ë§ˆì§€ë§‰ ê¸€ì '.' ë§ˆì¹¨í‘œ ê¸ˆì§€\n# 3. ì»¤ë°‹ ì ‘ë‘ì‚¬ (ê·œì¹™: 'ì ‘ë‘ì‚¬' + 'ì½œë¡ ' + ' ')\n# - feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€\n# - fix: ë²„ê·¸ ìˆ˜ì •\n# - docs: ë¬¸ì„œì˜ ìˆ˜ì •\n# - style: (ì½”ë“œì˜ ìˆ˜ì • ì—†ì´) ìŠ¤íƒ€ì¼(style)ë§Œ ë³€ê²½(ë“¤ì—¬ì“°ê¸° ê°™ì€ í¬ë§·ì´ë‚˜ ì„¸ë¯¸ì½œë¡ ì„ ë¹¼ë¨¹ì€ ê²½ìš°)\n# - refactor: ì½”ë“œë¥¼ ë¦¬í™í† ë§\n# - test: Test ê´€ë ¨í•œ ì½”ë“œì˜ ì¶”ê°€, ìˆ˜ì •\n# - chore: (ì½”ë“œì˜ ìˆ˜ì • ì—†ì´) ì„¤ì •ì„ ë³€ê²½\n# - design: css ì½”ë“œ ìˆ˜ì •\n# - build: build ë° ê´€ë ¨ ì„¤ì • ë³€ê²½\n\nCOMMIT_MSG_FILE=$1\nFIRST_LINE=`head -n1 ${COMMIT_MSG_FILE}`\nRES=\"needCheck\" # needCheck, auto, initial, lintError*, clear\n\nif [[ $FIRST_LINE =~ ^(Merge branch) ]] ||\n   [[ $FIRST_LINE =~ ^(Merge pull request) ]]; then\n  RES=\"auto\"\nfi\n\nif [[ $FIRST_LINE =~ ^(initial) ]]; then\n  RES=\"initial\"\nfi\n\nif [ $RES == \"needCheck\" ]; then\n  if [[ $FIRST_LINE =~ (\\.)$ ]]; then\n    RES=\"lintError1\"\n  fi\n\n  if [[ ! $FIRST_LINE =~ ^(feat: ) ]] &&\n     [[ ! $FIRST_LINE =~ ^(fix: ) ]] &&\n     [[ ! $FIRST_LINE =~ ^(docs: ) ]] &&\n     [[ ! $FIRST_LINE =~ ^(style: ) ]] &&\n     [[ ! $FIRST_LINE =~ ^(refactor: ) ]] &&\n     [[ ! $FIRST_LINE =~ ^(test: ) ]] &&\n     [[ ! $FIRST_LINE =~ ^(design: ) ]] &&\n     [[ ! $FIRST_LINE =~ ^(build: ) ]] &&\n     [[ ! $FIRST_LINE =~ ^(chore: ) ]]; then\n    RES=\"lintError2\"\n  fi\n\n  if [[ ! $RES =~ ^(lintError) ]]; then\n    RES=\"clear\"\n  fi\nfi\n\nif [[ $RES =~ ^(lintError) ]]; then\n  if [[ $RES == \"lintError1\" ]]; then\n    echo \"CommitLint#1: ë¬¸ì¥ ë§ˆì§€ë§‰ì˜ ('.') ë§ˆì¹¨í‘œë¥¼ ì œê±°í•´ì£¼ì„¸ìš”.\"\n  fi\n  if [[ $RES == \"lintError2\" ]]; then\n    echo \"CommitLint#2: ì ‘ë‘ì‚¬, ì½œë¡ , ë„ì–´ì“°ê¸° í˜•íƒœë¥¼ í™•ì¸í•˜ì„¸ìš”. (feat: , fix: , docs: , style: , refactor: , test: , chore: )\"\n  fi\n  exit 1\nelif [[ $RES == \"auto\" ]]; then\n  echo \"Automatically generated commit message from git\"\nelif [[ $RES == \"initial\" ]]; then\n  echo \"Initial commit\"\nelif [[ $RES == \"clear\" ]]; then\n  echo \"Pass commit lint!\"\nfi\n\nexit 0\n```\n\ní”„ë¡œì íŠ¸ `git` ì»¨ë²¤ì…˜ì— ë§ì¶°ì„œ ë©”ì„¸ì§€ ì‘ì„±ì„ ê°•ì œ í–ˆê³ , ì´ë¥¼ í†µí•´ `commit` ë©”ì„¸ì§€ í†µì¼ì„ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤!\n\n---\n\n### ë§ºëŠ”ë§\ní”„ë¡œì íŠ¸ëŠ” íŒ€ì›ë“¤ì´ í•˜ë‚˜ì˜ ë¬¸ì„œë¥¼ ë§Œë“œëŠ” ê²ƒì´ë¼ê³  ìƒê°ì„ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  í†µì¼ëœ ë¬¸ì„œë¥¼ ë§Œë“¤ë•Œ ê°€ì¥ í•„ìš”í•œ ê²ƒì€ ê·œì¹™(ì»¨ë²¤ì…˜)ì´ê³  ê·¸ ê·œì¹™ì„ ìë™ìœ¼ë¡œ ê°•ì œí•  ìˆ˜ ìˆê³ , ì½”ë“œì˜ ì‹ ë¢°ì„±ì„ ë†’ì—¬ì¤„ ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•´ì„œ í•œë²ˆ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤.\nìŠ¤íƒ€ì¼ ì»¨ë²¤ì…˜ì„ ë§ì¶”ê¸° ìœ„í•´ì„œëŠ” `stylelint`ë¥¼ `git hook`ì„ í†µí•´ `git`ì»¨ë²¤ì…˜ì„ ë§ì¶”ê³  ì‹¶ì€ ê²½ìš°ì—ëŠ” `husky`ë¥¼ í†µí•´ì„œ ì»¨ë²¤ì…˜ì„ í†µì¼ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'í´ë¦°'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. CRAì—†ì— webpackìœ¼ë¡œ react ì„¸íŒ…í•˜ê¸° í”¼ì›€ ì„œë¹„ìŠ¤ í™˜ê²½ì„ ë§Œë“¤ê¸°ë¡œ í•˜ë©´ì„œ, FEì˜ ê°œë°œ ìŠ¤í™ì€ React + TypeScriptë¡œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤. ReactëŠ” ë‹¹ì—° í˜„ì¡´ ìµœê°• ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ê³ , ì—¬ê¸°ì— JavaScriptì˜ ë™ì  íƒ€ì…ì„ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì¡ì•„ì£¼ëŠ” TypeScriptê¹Œì§€ ë”í•´ì„œ ì•ˆì •â€¦","fields":{"slug":"/react-setting-without-cra/"},"frontmatter":{"date":"August 06, 2023","title":"webpackìœ¼ë¡œë§Œ React ì„¤ì •í•˜ê¸° (without CRA)","tags":["React","Webpack"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[í´ë¦°](https://github.com/hozzijeong)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n\n# CRAì—†ì— webpackìœ¼ë¡œ react ì„¸íŒ…í•˜ê¸°\n\ní”¼ì›€ ì„œë¹„ìŠ¤ í™˜ê²½ì„ ë§Œë“¤ê¸°ë¡œ í•˜ë©´ì„œ, FEì˜ ê°œë°œ ìŠ¤í™ì€ React + TypeScriptë¡œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤. ReactëŠ” ë‹¹ì—° í˜„ì¡´ ìµœê°• ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ê³ , ì—¬ê¸°ì— JavaScriptì˜ ë™ì  íƒ€ì…ì„ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì¡ì•„ì£¼ëŠ” TypeScriptê¹Œì§€ ë”í•´ì„œ ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ë ¤ê³  í•©ë‹ˆë‹¤. \n\ní‰ì†Œê°™ì•˜ìœ¼ë©´ `CRA`ë¥¼ í†µí•´ ì†ì‰½ê²Œ ë¦¬ì•¡íŠ¸ ì„¤ì¹˜ë¥¼ í•˜ê³  ê°œë°œì„ ì‹œì‘í–ˆì„ í…ë°, CRAì˜ ë‹¨ì ì´ ì´ë¯¸ ì •êµí•˜ê²Œ ì„¸íŒ…ëœ babelê³¼ webpack ì„¤ì •ì„ ë”°ë¼ ê°œë°œì„ í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ê³  ê·¸ì— ë”°ë¥¸ íŠ¸ë ˆì´ë“œ ì˜¤í”„ê°€ ìƒë‹¹íˆ ë§ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤. (í•˜ë‚˜ì˜ ì˜ˆì‹œë¡œ CRAë¥¼ í†µí•´ì„œëŠ” ì ˆëŒ€ê²½ë¡œ ì§€ì • í•˜ê¸°ê°€ ì–´ë µìŠµë‹ˆë‹¤.) ë˜í•œ, ì´ì™•ì— ë‚´ ì„œë¹„ìŠ¤ ê°œë°œí•˜ëŠ”ê±° ë‚¨ì´ ì°¨ë ¤ì¤€ ë°¥ìƒ ë³´ë‹¤ ë‚´ê°€ ì§ì ‘ í•œë²ˆ í•´ë³´ê² ë‹¤ëŠ” ìƒê°ìœ¼ë¡œ webpackìœ¼ë¡œë§Œ reactì„¸íŒ…ì„ ì‹œë„í•´ ë³´ë ¤ê³ í•©ë‹ˆë‹¤ (ê°€ì¥ í° ì›ì¸ì€ ìš”êµ¬ì‚¬í•­ì´ CRAì—†ì´ webpackìœ¼ë¡œ react ì„¤ì¹˜í•˜ëŠ” ê±°ì˜€ìŠµë‹ˆë‹¤ ã…)\n\n### package.json ì„¤ì¹˜\n\nìš°ì„  ê°€ì¥ ì²˜ìŒ í•´ì•¼í•  ë‹¨ê³„ì…ë‹ˆë‹¤. react, typescript, webpack ë“± ìš°ë¦¬ê°€ ì„¤ì¹˜í•  ì˜ì¡´ì„± ê´€ë¦¬ì™€ ê¸°íƒ€ í”„ë¡œì íŠ¸ ì •ë³´ë¥¼ ì €ì¥í•´ ì¤„ `package.json`ì„ ì„¤ì¹˜ í•´ì¤ë‹ˆë‹¤.\n\n```bash\nnpm init // ë˜ëŠ”\nyarn init -y\n```\n\n### í™˜ê²½ êµ¬ì¶•ì— í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜\n\n```bash\nnpm install react react-dom // react ì„¤ì¹˜\nnpm install -D typescript @types/react @types/react-dom // typescript ì„¤ì¹˜\nnpm install tsc-init // tsconfig ì„¤ì¹˜\n\nnpm install -D webpack webpack-cli // ì›¹íŒ© ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì›¹íŒ©ì„ ì´ìš©í•  ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜\nnpm install -D html-webpack-plugin webpack-dev-server ts-loader  // ê°ê° ë²ˆë“¤ í›„ htmlíŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸, ê°œë°œí•  ë•Œ ì‚¬ìš©í•  ì›¹ ì„œë²„, typescriptíŒŒì¼ì„ javascriptë¡œ ë³€í™˜í•˜ëŠ” webpack loader ì„¤ì¹˜\n```\n\nìœ„ì— íŒŒì¼ë“¤ì„ ì„¤ì¹˜í•˜ê³  ë‚˜ë©´ ì´ì œë¶€í„° ë³¸ê²©ì ì¸ ì„¸íŒ…ì„ í•©ë‹ˆë‹¤.\n\n### webpack.config.js íŒŒì¼ ì„¤ì •\n\nì›¹íŒ© íŒŒì¼ ì„¤ì •ì…ë‹ˆë‹¤. \n\n```jsx\n// webpack.config.js\nconst { resolve } = require('path'); // path ì„¤ì •ì— ë„ì›€ì„ ì¤ë‹ˆë‹¤.\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst ReactRefreshWebpackPlugin = require('@pmmmwh/react-refresh-webpack-plugin');\nconst ReactRefreshTypeScript = require('react-refresh-typescript');\n\nconst isDevelopment = process.env.NODE_ENV === 'development';\n\nmodule.exports = {\n  entry: resolve(__dirname, 'src', 'index.tsx'), \n  output: {\n    path: resolve(__dirname, 'dist'), // ë²ˆë“¤ íŒŒì¼ì´ ì €ì¥ë  ë””ë ‰í† ë¦¬\n    filename: 'bundle.js', // íŒŒì¼ ì´ë¦„\n    assetModuleFilename: 'assets/[name][ext]', // ì—ì…‹ì˜ íŒŒì¼ ì´ë¦„\n    clean: true, // ë¹Œë“œ ì´ì „ ê²°ê³¼ë¬¼ ì •ë¦¬ ì˜µì…˜\n    publicPath: '/', // ë¹Œë“œëœ íŒŒì¼ ì•ì— ë¶™ì¼ ê²½ë¡œ\n  },\n  resolve: {\n    extensions: ['.ts', '.tsx', '...'], // íŒŒì¼ í™•ì¥ì. TSë° JSXí™•ììã…¡ã„¹ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.\n    alias: { // ì ˆëŒ€ê²½ë¡œ ì„¤ì •\n      types: resolve(__dirname, 'src', 'types'),\n      pages: resolve(__dirname, 'src', 'pages'),\n      components: resolve(__dirname, 'src', 'components'),\n      hooks: resolve(__dirname, 'src', 'hooks'),\n      apis: resolve(__dirname, 'src', 'apis'),\n      utils: resolve(__dirname, 'src', 'utils'),\n      assets: resolve(__dirname, 'src', 'assets'),\n      constants: resolve(__dirname, 'src', 'constants'),\n      contexts: resolve(__dirname, 'src', 'contexts'),\n    },\n  },\n  module: { // ë¡œë” ë° ê·œì¹™ ì„¤ì •\n    rules: [\n      {\n        test: /\\.tsx?$/i, // ts-loaderë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. babel-loaderë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ì´ìœ ëŠ” IEê¹Œì§€ í´ë¦¬í•„ ì§€ì›ì„ í•˜ì§€ ì•Šì•„ë„ ë˜ê¸° ë•Œë¬¸ì…ë‹ˆã…ã„·.\n        exclude: /node_modules/,\n        loader: 'ts-loader',\n        options: {\n          getCustomTransformers: () => ({\n            before: isDevelopment ? [ReactRefreshTypeScript()] : [],\n          }),\n          transpileOnly: isDevelopment,\n        },\n      },\n      {\n        test: /\\.(png|jpg|jpeg|svg|woff|woff2|eot|ttf|otf)$/i,\n        type: 'asset/resource',\n      },\n    ],\n  },\n  plugins: [\n    new HtmlWebpackPlugin({ //ë¹Œë“œëœ ë‹¤ìŒì— í…œí”Œë¦¿ì„ ì§€ì •í•´ì¤ë‹ˆë‹¤.\n      template: resolve(__dirname, 'public', 'index.html'),\n    }),\n    ...(isDevelopment ? [new ReactRefreshWebpackPlugin()] : []),\n  ],\n  devServer: {\n    open: true,\n    port: 8282, // ê¸°ë³¸ì€ 3000ë²ˆì´ì§€ë§Œ ì»¤ìŠ¤í…€ ê¸°ë…ìœ¼ë¡œ ë°”ê¿¨ì”ë‹ˆë‹¤.\n    static: {\n      directory: resolve(__dirname, 'public'),\n    },\n    historyApiFallback: true,\n  },\n};\n```\n\n`entry`: ì›¹íŒ©ì˜ ì§„ì…ì ì„ ì˜ë¯¸. reactì—ì„œëŠ” srcì˜ index.jsì—ì„œ ëª¨ë“ ê²Œ ì‹œì‘ë©ë‹ˆë‹¤.\n\n`output`: ë²ˆë“¤ëœ íŒŒì¼ì˜ ì¶œë ¥ ê²½ë¡œë¥¼ ì •ì˜í•©ë‹ˆë‹¤.\n\n`resolve`: ëª¨ë“ˆ í•´ì„ ì˜µì…˜ì„ ì„¤ì •í•©ë‹ˆë‹¤.\n\n`module`: ë¡œë”ì˜ ê·œì¹™ì„ ì„¤ì •í•©ë‹ˆë‹¤.\n\n- ë³´í†µì€ .css,.scssíŒŒì¼ í™•ì¥ì„ ìœ„í•´ `style-loader`ë¥¼ ì‚¬ìš©í•˜ê¸°ë„ í•˜ì§€ë§Œ, í”¼ì›€ì—ì„œëŠ” CSS-in-JSë¥¼ ì„ íƒí–ˆê¸° ë•Œë¬¸ì— í•´ë‹¹ í™•ì¥ìë“¤ì´ ì¡´ì¬í•˜ì§€ ì•Šì•„ì„œ ë”°ë¡œ ì„¤ì •í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\n\n`plugins`:  ì›¹íŒ© í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì •í•©ë‹ˆë‹¤. í”ŒëŸ¬ê·¸ì¸ì€ ë¹Œë“œ ê³¼ì •ì„ í™•ì¥í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n`devServer`: ê°œë°œ ì„œë²„ ì˜µì…˜(localhost)ì„ ì„¤ì •í•©ë‹ˆë‹¤. \n\n> `ReactRefreshWebpackPlugin`ì€ ë¦¬ì•¡íŠ¸ì—ì„œ ì €ì¥ì„ íŒŒì¼ ì €ì¥ì„ í•  ë•Œë§ˆë‹¤ ìƒíƒœ ì´ˆê¸°í™”ë¥¼ ë§‰ì•„ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ ì…ë‹ˆë‹¤. CRAì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µë˜ì–´ ìˆëŠ” ê¸°ëŠ¥ì´ì§€ë§Œ, customê¸°ëŠ¥ì—ëŠ” ì¡´ì¬í•˜ì§€ ì•Šê¸°ì— ì¶”ê°€í•´ ì¤¬ìŠµë‹ˆë‹¤.\n\n### tsconfigíŒŒì¼ ì„¤ì •\n\ntsconfigíŒŒì¼ì€ typescriptì˜ ë²„ì „ê³¼ ëª¨ë“ˆ ë“± ì»´íŒŒì¼ ê³¼ì •ì—ì„œ ì–´ë–¤ ë²„ì „ìœ¼ë¡œ ì‹¤í–‰í•  ê²ƒì¸ì§€ ë“±ì„ ì„¤ì •í•˜ëŠ” íŒŒì¼ì…ë‹ˆë‹¤.\n\n```json\n{\n  \"compilerOptions\": { // ì»´íŒŒì¼ëŸ¬ ì˜µì…˜ ì„¤ì •\n    \"target\": \"ES2016\", // ì»´íŒŒì¼ í•˜ëŠ” JS ë²„ì „ì„ ES2016ìœ¼ë¡œ ì„¤ì •\n    \"module\": \"CommonJS\", // ì»´íŒŒì¼ëœ ëª¨ë“ˆ ì‹œìŠ¤í…œ ì„¤ì •\n    \"jsx\": \"react-jsx\", // JSXë¬¸ë²•ì„ ì–´ë–»ê²Œ ì»´íŒŒì¼ í• ì§€ ì„¤ì •\n\n    \"strict\": true, // ì—„ê²©í•œ íƒ€ì… ì²´í¬\n    \"exactOptionalPropertyTypes\": true, // ì„ íƒì  í”„ë¡œí¼í‹° íƒ€ì…ì„ ì²´í¬í•¨\n    \"skipLibCheck\": true, // ë¼ì´ë¸ŒëŸ¬ë¦¬ íŒŒì¼ì˜ íƒ€ì… ì²´í¬ë¥¼ ê±´ë„ˆëœ€\n    \"esModuleInterop\": true, // CJS ë° ES ëª¨ë“ˆì„ í•¨ê»˜ ì‚¬ìš©í•  ë•Œ ì˜µì…˜ì„ ì„¤ì • ES6 ëª¨ë“ˆ ì‚¬ì–‘ì„ ì¤€ìˆ˜í•˜ì—¬ CJSì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ í•¨. (ì¦‰ import ê°€ëŠ¥)\n\n    \"baseUrl\": \"src\", // ë£¨íŠ¸ê°€ ë˜ëŠ” url\n    \"paths\": { // ì ˆëŒ€ ê²½ë¡œ\n      \"types/*\": [\"types/*\"],\n      \"pages/*\": [\"pages/*\"],\n      \"components/*\": [\"components/*\"],\n      \"contexts/*\": [\"contexts/*\"],\n      \"hooks/*\": [\"hooks/*\"],\n      \"utils/*\": [\"utils/*\"],\n      \"assets/*\": [\"assets/*\"],\n      \"constants/*\": [\"constants/*\"]\n    },\n\n    \"types\": [\"cypress\"] // íƒ€ì… ì •ì˜ íŒŒì¼ ì§€ì •\n  },\n  \"include\": [\"src/**/*\", \"cypress/**/*\"] // ì»´íŒŒì¼í•  ì†ŒìŠ¤ ì½”ë“œ íŒŒì¼ ì •ì˜\n}\n```\n\ní”¼ì›€ì—ì„œëŠ” IEë¥¼ ì œì™¸í•œ ëª¨ë“  ë¸Œë¼ìš°ì €ë¥¼ íƒ€ê²Ÿìœ¼ë¡œ ì„¤ì •í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ìµœëŒ€í•œ ë‚®ì€ ë²„ì „ì˜ `JavaScript`ë¥¼ íƒ€ê²Ÿìœ¼ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤. ES2016ì„ ì„¤ì •í•˜ê³  ì²˜ìŒ ì½”ë“œë¥¼ ì‘ì„±í•˜ë‹¤ê°€ `import`ê°€ ì œëŒ€ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•ŠëŠ” ê²ƒì„ ë³´ê³  ë¬¸ì œë¥¼ ì°¾ë‹¤ê°€ `esModuleInterop`ì˜µì…˜ì„ trueë¡œ ì„¤ì •í•´ ì¤˜ì•¼ì§€ CJSì—ì„œë„ importê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. \n\në˜í•œ, ìƒëŒ€ ê²½ë¡œê°€ ì•„ë‹Œ ì ˆëŒ€ê²½ë¡œ ì‚¬ìš©ì„ ì„ íƒí–ˆëŠ”ë°, ì´ëŠ” ë³µì¡í•œ íŒŒì¼ êµ¬ì¡°ë¥¼ ë³´ê¸° ì‰½ê²Œ ì•Œì•„ë³´ê¸° ìœ„í•´ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.\n\n> `esModuleInterop`ì„¤ì •ì€ targetìœ¼ë¡œ í•˜ëŠ” ì˜µì…˜ì´ node16ì´ê±°ë‚˜ nodenextì¸ ê²½ìš°ì—ëŠ” trueë¡œ ë˜ì–´ìˆì§€ë§Œ, ê·¸ê²Œ ì•„ë‹Œ ê²½ìš°ì—ëŠ” falseì´ë¯€ë¡œ, import êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ì˜µì…˜ì„ trueë¡œ í•˜ëŠ”ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\n### package.json ì„¤ì •\n\nì´ì œ ì„¤ì •í•œ ì›¹íŒ©ê³¼ tsconfigë¥¼ í™•ì¸í•´ ë³´ê¸° ìœ„í•´ì„œëŠ” ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ë³´í†µ ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ë¡œëŠ” `start`ì™€ `build`ê°€ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‚˜ë¨¸ì§€ ëª…ë ¹ì–´ëŠ” ìŠ¤í† ë¦¬ë¶ì´ë‚˜ cypressì— ëŒ€í•œ ëª…ë ¹ì–´ë“¤ì…ë‹ˆë‹¤.\n```json\n{ //package.json\n//...\n\t\"name\": \"pium-frontend\",\n  \"version\": \"1.0.0\",\n  \"description\": \"í”¼ì›€ í”„ë¡ íŠ¸ì—”ë“œ\",\n  \"main\": \"src/index.tsx\",\n  \"scripts\": {\n    \"test\": \"echo test is not prepared\",\n    \"start\": \"webpack-dev-server --mode=development\",\n    \"build\": \"NODE_ENV=production webpack\",\n    \"storybook\": \"storybook dev -p 6006\",\n    \"build-storybook\": \"storybook build -o ./dist/storybook\",\n    \"cypress\": \"cypress open\"\n  },\n//...\n}\n```\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì£¼ë…¸'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì„œë¡  ì¸ìˆ˜í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë©´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤. RestAssuredë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ê° í…ŒìŠ¤íŠ¸ë³„ë¡œ (DB)ë°ì´í„°ê°€ ê²©ë¦¬ëœ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê³  ì‹¶ë‹¤. ì´ì— ë‹¤ìŒê³¼ ê°™ì€ ì‹œí–‰ì°©ì˜¤ë¥¼ ê±°ì³¤ë‹¤. ìµœì¢…ì ìœ¼ë¡œ ì‘ì„±ëœ ì½”ë“œë¥¼ ë³´ê³ ì‹¶ë‹¤ë©´ ìµœì¢…ì½”ë“œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”. ì‹œí–‰ì°©ì˜¤ JPAë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” í˜„ ì‹œì ì—ì„œâ€¦","fields":{"slug":"/acceptance-test-resolve/"},"frontmatter":{"date":"August 03, 2023","title":"ì¸ìˆ˜í…ŒìŠ¤íŠ¸ ë°ì´í„° ì´ˆê¸°í™”í•˜ê¸°","tags":["ì¸ìˆ˜í…ŒìŠ¤íŠ¸","RestDocs","í…ŒìŠ¤íŠ¸"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì£¼ë…¸](https://github.com/Choi-JJunho)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ì„œë¡ \n\nì¸ìˆ˜í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë©´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.\n\n- RestAssuredë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤.\n- ê° í…ŒìŠ¤íŠ¸ë³„ë¡œ (DB)ë°ì´í„°ê°€ ê²©ë¦¬ëœ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê³  ì‹¶ë‹¤.\n\nì´ì— ë‹¤ìŒê³¼ ê°™ì€ ì‹œí–‰ì°©ì˜¤ë¥¼ ê±°ì³¤ë‹¤.\n\n> ìµœì¢…ì ìœ¼ë¡œ ì‘ì„±ëœ ì½”ë“œë¥¼ ë³´ê³ ì‹¶ë‹¤ë©´ ìµœì¢…ì½”ë“œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.\n\n## ì‹œí–‰ì°©ì˜¤\n\n\n```java\n@Transactional\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\nclass DictionaryPlantApiTest {\n  ...\n}\n```\n\nJPAë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” í˜„ ì‹œì ì—ì„œ`@Transactional`ì„ ì´ìš©í•´ì„œ í•˜ë‚˜ì˜ í…ŒìŠ¤íŠ¸(íŠ¸ëœì­ì…˜)ì´ ëë‚  ë•Œ ë°ì´í„°ê°€ ë¡¤ë°±ë˜ëŠ” í˜„ìƒì„ ê¸°ëŒ€í–ˆë‹¤.\n\n```java\n@Test\nvoid ì‚¬ì „_ì‹ë¬¼_ìƒì„¸ì •ë³´_ì¡°íšŒ_ì‹œ_ì‚¬ì „_ì‹ë¬¼_ì •ë³´_ë°˜í™˜() {\n\n    // dictionaryPlantRepository.save() ì— ëŒ€í•œ Fixture\n    DictionaryPlant REQUEST = dictionaryPlantSupport.builder().build();\n\n    DictionaryPlantResponse RESPONSE = RestAssured\n            .given().log().all()\n            .when()\n            .get(\"/dictionary-plants/{id}\", REQUEST.getId())\n            .then()\n            .log().all()\n            .statusCode(HttpStatus.OK.value())\n            .extract().as(DictionaryPlantResponse.class);\n    );\n    \n    ...\n}\n```\n\n![](.index_images/807f392f.png)\n\ní•˜ì§€ë§Œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ë•Œ JPARepositoryë¡œ saveí•œ ê°’ì„ RestAssuredë¥¼ ì´ìš©í•´ ì¡°íšŒí•˜ë©´ ë°ì´í„°ê°€ ë°˜ì˜ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.\n\n### ë¬¸ì œ ì¸ì‹\n\n[Stack Overflow](https://stackoverflow.com/questions/41763417/api-test-transactional-rollback)ì˜ ë‹¤ìŒ ê¸€ì„ ì½ì–´ë³¸ ë’¤ ë‹¤ìŒê³¼ ê°™ì€ ì§€ì‹ì„ ì–»ì—ˆë‹¤.\n\n> @Transactional only works within the same thread, and as such the rollback provided by Spring will only work on the objects that were persisted on the thread where the transaction was started.\nYour rest-assured test will perform an integration test and will hit your Spring context on another thread. So although your rest-assured test would be able to see the objects persisted in your test setup, Spring will never be able to cleanup resources persisted in your rest-assured test automatically.\nThe only way to tackle this is to delete the entities yourself in your test (Using an Junit Rule, or cleaning up any state in your test setup).\n\nìš”ì•½í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n> íŠ¸ëœì­ì…˜ì€ ë™ì¼í•œ ìŠ¤ë ˆë“œ ë‚´ì—ì„œ ë™ì‘í•œë‹¤.\nSpringì—ì„œ ì œê³µí•˜ëŠ” ë¡¤ë°±ì€ íŠ¸ëœì­ì…˜ì´ ì‹œì‘ëœ ìŠ¤ë ˆë“œ ë‚´ì—ì„œ ìƒê¸´ ê°ì²´ì— ëŒ€í•´ì„œë§Œ ë™ì‘í•œë‹¤.\nRestAssuredëŠ” ë³„ë„ì˜ ìŠ¤ë ˆë“œë¥¼ í†µí•´ Spring ì»¨í…ìŠ¤íŠ¸ë¥¼ ì´ìš©í•œë‹¤.\nì´ ë•Œë¬¸ì— RestAssuredëŠ” ì „ì—­ì ìœ¼ë¡œ ì„¤ì •ëœ ë°ì´í„° (Data.sqlê³¼ ê°™ì€ ì„¤ì •ìœ¼ë¡œ ìƒê¸´ ë°ì´í„°)ì—ëŠ” ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë‚˜ Transactionê³¼ ê°™ì´ ë³„ë„ì˜ ìŠ¤ë ˆë“œì—ì„œë§Œ ì œê³µë˜ëŠ” ê°’ì— ëŒ€í•´ì„œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.\n... (í•´ê²°ë°©ë²• í›„ëµ)\n\nìœ„ì™€ ê°™ì´ ë³„ë„ì˜ RestAssuredì˜ ìš”ì²­ì´ ìŠ¤ë ˆë“œë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì—ì„œ ë³„ê°œë¡œ ì €ì¥í•œ ê°’ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²°ë¡ ì´ ë‚˜ì™”ë‹¤.\n\n> ìì„¸í•œ ë‚´ìš©ì€ [í•˜ë§ˆë“œì˜ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê¸€](https://pium-official.github.io/transactional-not-in-restassured/)ì„ ì°¸ê³ í•´ì£¼ì„¸ìš”~\n\n## í•´ê²°ë°©ë²•\n\nì´ ë¬¸ì œì— ëŒ€í•´ì„œ ë‹¤ì–‘í•œ í•´ê²°ë°©ë²•ì´ ì¡´ì¬í•˜ê³  ê°ê°ì˜ ì¥ë‹¨ì ì„ ë¹„êµí•œ ë’¤ ìµœì¢…ì ìœ¼ë¡œ ì–´ë–¤ ë°©ì‹ì„ ì„ íƒí• ì§€ ê³ ë¯¼í•´ë³´ì.\n\n### 1ï¸âƒ£ DirtiesContext ì‚¬ìš©í•˜ê¸°\n\në§¤ í…ŒìŠ¤íŠ¸ë§ˆë‹¤ Contextë¥¼ ìƒˆë¡­ê²Œ ë„ì›Œì„œ ë°ì´í„°ë¥¼ ë§¤ë²ˆ ì´ˆê¸°í™”í•˜ëŠ” ë°©ë²•ì„ ìƒê°í•´ë³¼ ìˆ˜ ìˆë‹¤.\n\n#### ì¥ì \n\nì»¨í…ìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ë¡œë“œí•˜ë©´ì„œ í…ŒìŠ¤íŠ¸ê°„ ê²©ë¦¬ í™˜ê²½ì„ ëª…í™•í•˜ê²Œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.\n\n#### ë‹¨ì \n\n- ë§¤ í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ë¡œë“œí•˜ê¸° ë•Œë¬¸ì— ì†ë„ê°€ ìƒëŒ€ì ìœ¼ë¡œ ëŠë¦¬ë‹¤.\n- @Nested ë‚´ë¶€ì— ì •ì˜ë˜ì–´ìˆëŠ” í…ŒìŠ¤íŠ¸ì— ëŒ€í•´ DirtiesContextê°€ ì ìš©ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìˆë‹¤.\n  [Spring @Nested ê´€ë ¨ ê³µì‹ ë¬¸ì„œ](https://docs.spring.io/spring-framework/reference/testing/testcontext-framework/support-classes.html#testcontext-junit-jupiter-nested-test-configuration)\n  @Nested ë‚´ë¶€ì— ì •ì˜ëœ í…ŒìŠ¤íŠ¸ì— DirtiesContextë¥¼ ì „íŒŒí•˜ê¸° ìœ„í•´ ì•„ë˜ ì„¤ì •ì„ ì¶”ê°€í•´ì¤˜ì•¼í•œë‹¤.\n\n```java\n// í´ë˜ìŠ¤ë ˆë²¨ì— ë‹¤ìŒ ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì£¼ê±°ë‚˜\n@NestedTestConfiguration(value = NestedTestConfiguration.EnclosingConfiguration.OVERRIDE)\n```\n\ní˜¹ì€ properteis ì„¤ì •ì„ ë³€ê²½í•´ì£¼ëŠ” ë°©ì‹ë„ ì¡´ì¬í•œë‹¤.\n\n```properties\n# properties íŒŒì¼ì— ë‹¤ìŒ ì„¤ì •ì„ ì¶”ê°€í•´ì£¼ì–´ ì „ì—­ì ìœ¼ë¡œ @Nested ê¸°ë³¸ ì „ëµì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.\nspring.test.enclosing.configuration=OVERRIDE\n```\n> ì°¸ê³  ë¬¸ì„œ : [Changing the default enclosing configuration inheritance mode](https://docs.spring.io/spring-framework/reference/testing/annotations/integration-junit-jupiter.html#integration-testing-annotations-nestedtestconfiguration)\n\n### 2ï¸âƒ£ @SQL ì‚¬ìš©í•˜ê¸°\n\n@SQL ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë§¤ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ SQL ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ì—¬ í…Œì´ë¸”ì„ ë‹¤ì‹œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.\n\n```java\n@Sql(\"classpath:init.sql\")\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\nclass DictionaryPlantApiTest {\n  ...\n}\n```\n\n#### ì¥ì \n\n- ì—¬ëŸ¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n- ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™” í›„ í…Œì´í„°ë„ í•¨ê»˜ ë„£ì„ ìˆ˜ ìˆë‹¤.\n\n#### ë‹¨ì \n\n- í…ŒìŠ¤íŠ¸ì— ì‚¬ìš©í•˜ëŠ” DBê°€ ë³€ê²½ë˜ì—ˆì„ ë•Œ í•´ë‹¹ ë²¤ë”ì‚¬ì˜ Dialectì— ë§ê²Œ SQLë¬¸ì„ ê³ ì³ì¤˜ì•¼í•œë‹¤.\n- ì¿¼ë¦¬ë¥¼ í…ìŠ¤íŠ¸ë¡œ ê´€ë¦¬í•˜ë‹¤ë³´ë‹ˆ ì»´íŒŒì¼íƒ€ì„ì— ì˜¤ë¥˜ë¥¼ ì¡ê¸° ì–´ë µë‹¤.\n- í…Œì´ë¸” ì—°ê´€ê´€ê³„ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš° ì¿¼ë¦¬ë¬¸ ì‘ì„± ìˆœì„œì— ì‹ ê²½ì„ ë§ì´ ì¨ì•¼í•œë‹¤.\n\n### 3ï¸âƒ£ InitializingBean ì‚¬ìš©í•˜ê¸°\n\n`InitializingBean`ì„ ì´ìš©í•˜ì—¬ ìŠ¤í”„ë§ Beanì´ ì´ˆê¸°í™”, ì†Œë©¸ ë  ë•Œ í–‰ìœ„ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.\n\n```java\n// InitializingBeanì˜ ìƒê¹€ìƒˆ\npublic interface InitializingBean {\n\tvoid afterPropertiesSet() throws Exception;\n}\n```\n\nì´ë¥¼ ì´ìš©í•´ @Test ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ Beanì´ ë“±ë¡ë  ë•Œ ë§ˆë‹¤ DBì„ ì´ˆê¸°í™”í•˜ëŠ” ìƒí™©ì„ ê¸°ëŒ€í•  ìˆ˜ ìˆë‹¤.\n\n**Entity Managerë¥¼ ì´ìš©í•´ DB ì´ˆê¸°í™”í•˜ê¸°**\n\nJPAë¥¼ ì‚¬ìš©í•˜ëŠ” ì…ì¥ìœ¼ë¡œ SQLë¬¸ì„ ì‘ì„±í•˜ê¸° ë³´ë‹¤ëŠ” EntityManagerë¥¼ ì´ìš©í•´ë³´ëŠ”ê²ƒì´ ì •ì ì¸ ì¿¼ë¦¬ ê´€ë¦¬ì— ë“¤ì´ëŠ” ì†Œìš”ê°€ ì ì„ ê²ƒì´ë¼ê³  ìƒê°ëœë‹¤.\n\nì´ì— EntityManagerë¥¼ ì´ìš©í•˜ì—¬ DBë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì.\n\n> ì•„ë˜ë¶€í„°ëŠ” https://ttl-blog.tistory.com/1407 ë¥¼ ì°¸ê³ í•˜ì—¬ ì§„í–‰ëœ ê¸€ì…ë‹ˆë‹¤.\n\n#### table ì´ë¦„ ì¡°íšŒí•˜ê¸°\n\n```java\n@Component\n@Profile(\"test\")\npublic class DatabaseCleaner implements InitializingBean {\n\n\t// í…Œì´ë¸” ì´ë¦„ë“¤ì„ ì €ì¥í•  List\n    private final List<String> tables = new ArrayList<>();\n\n\t// ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ ì„ ì–¸í•œë‹¤\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @SuppressWarnings(\"unchecked\")\n    @PostConstruct\n    public void findDatabaseTableNames() {\n        List<Object[]> tableInfos = entityManager.createNativeQuery(\"SHOW TABLES\").getResultList();\n        for (Object[] tableInfo : tableInfos) {\n            String tableName = (String) tableInfo[0];\n            tableNames.add(tableName);\n        }\n    }\n}\n```\n\nEntityManagerë¥¼ ì´ìš©í•˜ì—¬ ëª¨ë“  í…Œì´ë¸”ì˜ ì´ë¦„ì„ ê°€ì ¸ì˜¨ë‹¤.\n\n#### í…Œì´ë¸” ì´ˆê¸°í™”í•˜ê¸° & ì‹¤í–‰í•˜ê¸°\n\n```java\n@Component\n@Profile(\"test\")\npublic class DatabaseCleaner implements InitializingBean {\n\n\t// í…Œì´ë¸” ì´ë¦„ë“¤ì„ ì €ì¥í•  List\n    private final List<String> tables = new ArrayList<>();\n\n\t// ì—”í‹°í‹° ë§¤ë‹ˆì €ë¥¼ ì„ ì–¸í•œë‹¤\n    @PersistenceContext\n    private EntityManager entityManager;\n\n\t// í…Œì´ë¸” ì´ë¦„ì„ ì¡°íšŒí•œë‹¤\n    @SuppressWarnings(\"unchecked\")\n    @PostConstruct\n    public void findDatabaseTableNames() {\n        ...\n    }\n    \n    // í…Œì´ë¸”ì„ ì´ˆê¸°í™”í•œë‹¤\n    private void truncate() {\n        entityManager.createNativeQuery(String.format(\"SET FOREIGN_KEY_CHECKS %d\", 0)).executeUpdate();\n        for (String tableName : tableNames) {\n            entityManager.createNativeQuery(String.format(\"TRUNCATE TABLE %s\", tableName)).executeUpdate();\n        }\n        entityManager.createNativeQuery(String.format(\"SET FOREIGN_KEY_CHECKS %d\", 1)).executeUpdate();\n    }\n\n    @Override\n    public void afterPropertiesSet() throws Exception {\n        findDatabaseTableNames();\n    }\n\n    @Transactional\n    public void clear() {\n        entityManager.clear();\n        truncate();\n    }\n}\n```\ntruncateë¥¼ ìˆ˜í–‰í•˜ì—¬ ëª¨ë“  í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ê³  ì‹¤í–‰í•œë‹¤.\n\nê²°ê³¼ì ìœ¼ë¡œ ë´¤ì„ ë•Œ ë‹¤ìŒê³¼ ê°™ì€ íë¦„ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”ê°€ ìˆ˜í–‰ëœë‹¤.\n\n- Beanì´ ìƒì„±ëœ ì´í›„ Table ì´ë¦„ì„ ì°¾ëŠ”ë‹¤.\n- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ 1ì°¨ ìºì‹œë¥¼ ë¹„ìš°ê³  í…Œì´ë¸”ì„ ì´ˆê¸°í™”í•œë‹¤.\n\n#### í…ŒìŠ¤íŠ¸ì½”ë“œì— ì ìš©í•˜ê¸°\n\nì¸ìˆ˜í…ŒìŠ¤íŠ¸ë¥¼ `AcceptanceTest`ë¡œ ë¶„ë¦¬í•˜ê³  ìƒì†ë°›ëŠ” êµ¬ì¡°ë¡œ ë³€ê²½í–ˆë‹¤.\n\n```java\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\npublic class AcceptanceTest {\n\n    @LocalServerPort\n    int port;\n\n    @Autowired\n    private DatabaseCleaner databaseCleaner;\n\n    @BeforeEach\n    void setUp() {\n        RestAssured.port = port;\n        databaseCleaner.clear();\n    }\n}\n```\n\nì‘ì—…í•œ ë‚´ìš©ì„ ì ìš©í•˜ë©´ ìœ„ì™€ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.\n\n#### ì¥ì \n\n- í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì¿¼ë¦¬ì— ì˜ì¡´ì ì´ì§€ ì•Šë‹¤.\n- ì„¤ì •ì„ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.\n\n#### ë‹¨ì \n\n- JPAì— ì¢…ì†ì ì¸ ì„¤ì •ì´ê¸° ë•Œë¬¸ì— JPAë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê±°ë‚˜ ORMì„ ì œì™¸í•˜ëŠ” ìƒí™©ì„ ê³ ë ¤í•œë‹¤ë©´ í•´ë‹¹ ë°©ì‹ì˜ ë„ì…ì„ ìƒê°í•´ë³¼ í•„ìš”ê°€ ìˆë‹¤.\n- AcceptenceTest ì´ì™¸ì— ë‹¤ë¥¸ í†µí•©í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ ì¤‘ë³µëœ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼í•œë‹¤.\n- Bean ìƒì„± ì£¼ê¸°ì— ëŒ€í•œ ì„¤ì •ì´ê¸° ë•Œë¬¸ì— í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ í”„ë¡œë•ì…˜ì— ë‚¨ìš©í•  ìˆ˜ ìˆëŠ” ê°€ëŠ¥ì„±ì´ ì¡´ì¬í•œë‹¤.\n    - í…ŒìŠ¤íŠ¸ ì½”ë“œì§€ë§Œ í”„ë¡œë•ì…˜ì—ë„ ì ìš©ë  ìˆ˜ ìˆëŠ” ì„¤ì •ì´ ê·¸ë‹¥ ë§ˆìŒì— ë“¤ì§„ ì•ŠëŠ”ë‹¤.\n\n### 4ï¸âƒ£ JUnit5 Extension ì‚¬ìš©í•˜ê¸°\n\ní˜„ì¬ ì½”ë“œëŠ” AcceptenceTestë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œì— ëŒ€í•´ì„œë§Œ DB ì´ˆê¸°í™”ë¥¼ ì§„í–‰í•˜ê³ ìˆë‹¤.\n\nRestAssuredê°€ ë³„ë„ì˜ ìŠ¤ë ˆë“œì—ì„œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ìœ„ì™€ê°™ì´ êµ¬ì„±í–ˆì§€ë§Œ ë³„ë„ì˜ í†µí•© í…ŒìŠ¤íŠ¸ì—ì„œë„ DB ì´ˆê¸°í™” ì„¤ì •ì´ í•„ìš”í•  ìˆ˜ ìˆë‹¤.\n\n@BeforeEach ë‚´ë¶€ì— clearë¥¼ ì„ ì–¸í•˜ì§€ ì•Šê³ ë„ ê°„ë‹¨í•œ ì„¤ì •ë§Œìœ¼ë¡œ DB ì´ˆê¸°í™” ë¡œì§ì„ ì ìš©í•˜ë„ë¡ ê°œì„ í•´ë³´ì.\n\nì´ë¥¼ ìœ„í•´ JUnit5ì˜ Extensionì„ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ ì„¤ì •ì„ ë¦¬íŒ©í„°ë§í•´ë³¼ ê²ƒì´ë‹¤.\n\n#### JUnit5 Extensionì´ë€?\n\nJunit5ì—ì„œ ì œê³µí•˜ëŠ” í…ŒìŠ¤íŠ¸ì˜ ìƒëª…ì£¼ê¸°ì— ëŒ€í•´ ê°ê°ì˜ í™˜ê²½ì— ëŒ€í•´ í™•ì¥í•  ìˆ˜ ìˆë„ë¡ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë‹¤.\n\në‹¤ìŒê³¼ ê°™ì€ ìƒì„±ì£¼ê¸°ì— ëŒ€í•œ í™•ì¥ì„ ì œê³µí•œë‹¤.\n\n\n- BeforeAllCallback - @BeforeAll ì‹¤í–‰ ì „ì— ì‹¤í–‰ëœë‹¤.\n- BeforeEachCallback - @BeforeEach ì‹¤í–‰ ì „ì— ì‹¤í–‰ëœë‹¤.\n- BeforeTestExecutionCallback - ê° í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë˜ê¸° ì§ì „ì— ì‹¤í–‰ëœë‹¤.\n- AfterTestExecutionCallback : ê° í…ŒìŠ¤íŠ¸ê°€ ì¢…ë£Œëœ í›„ ì‹¤í–‰ëœë‹¤.\n- AfterEachCallback : @AfterEach ì‹¤í–‰ ì´í›„ì— ì‹¤í–‰ëœë‹¤.\n- AfterAllCallback : @AfterAll ì‹¤í–‰ ì´í›„ì— ì‹¤í–‰ëœë‹¤.\n\n\n> Referenced By https://ttl-blog.tistory.com/1407\n\n#### BeforeEachCallback ì´ìš©í•˜ê¸°\n\ní˜„ì¬ `@BeforeEach`ì—ì„œ DatabaseCleanerê°€ ìˆ˜í–‰ë˜ê³  ìˆìœ¼ë¯€ë¡œ `@BeforeEach` ì´ì „ì— ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ `BeforeEachCallback`ì„ ì´ìš©í•´ë³´ì.\n\nExtensionì„ ì´ìš©í•˜ê¸° ìœ„í•´ ê¸°ì¡´ì— DatabaseCleanerì— ë¶™ì–´ìˆë˜ `implements InitializingBean`ì€ ì œê±°í•´ì¤¬ë‹¤.\n\n```java\n@Component\npublic class DatabaseCleaner {\n\n    private final List<String> tableNames = new ArrayList<>();\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n\t// ë°”ë€ë¶€ë¶„ : ì˜ì¡´ì„± ì£¼ì…ì´í›„ ì´ˆê¸°í™” ìˆ˜í–‰ ì‹œ Tableì„ ì¡°íšŒí•œë‹¤.\n    @PostConstruct\n    @SuppressWarnings(\"unchecked\")\n    private void findDatabaseTableNames() {\n        List<Object[]> tableInfos = entityManager.createNativeQuery(\"SHOW TABLES\").getResultList();\n        for (Object[] tableInfo : tableInfos) {\n            String tableName = (String) tableInfo[0];\n            tableNames.add(tableName);\n        }\n    }\n\n    private void truncate() {\n        entityManager.createNativeQuery(String.format(\"SET FOREIGN_KEY_CHECKS %d\", 0)).executeUpdate();\n        for (String tableName : tableNames) {\n            entityManager.createNativeQuery(String.format(\"TRUNCATE TABLE %s\", tableName)).executeUpdate();\n        }\n        entityManager.createNativeQuery(String.format(\"SET FOREIGN_KEY_CHECKS %d\", 1)).executeUpdate();\n    }\n\n    @Transactional\n    public void clear() {\n        entityManager.clear();\n        truncate();\n    }\n}\n```\n\nì´í›„ `DatabaseClearExtension` í´ë˜ìŠ¤ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìƒì„±í•´ì¤€ë‹¤.\n\n```java\npublic class DatabaseClearExtension implements BeforeEachCallback {\n\n    @Override\n    public void beforeEach(ExtensionContext context) throws Exception {\n        DatabaseCleaner databaseCleaner = getDataCleaner(context);\n        databaseCleaner.clear();\n    }\n\n    private DatabaseCleaner getDataCleaner(ExtensionContext extensionContext) {\n        return SpringExtension.getApplicationContext(extensionContext)\n                .getBean(DatabaseCleaner.class);\n    }\n}\n```\n\n#### ê°„ê²°í•´ì§„ í…ŒìŠ¤íŠ¸ì½”ë“œ\n\n```java\n@ExtendWith(DatabaseClearExtension.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\npublic class AcceptanceTest {\n\n    @LocalServerPort\n    int port;\n\n    @BeforeEach\n    void setUp() {\n        RestAssured.port = port;\n    }\n}\n```\n\nì´ì œ `@ExtendWith(DatabaseClearExtension.class)` ì–´ë…¸í…Œì´ì…˜ë§Œ ë¶™ì—¬ì£¼ë©´ í…ŒìŠ¤íŠ¸ë³„ë¡œ DBë¥¼ ì´ˆê¸°í™”í•  ìˆ˜ ìˆë‹¤.\n\nê° í…ŒìŠ¤íŠ¸ë³„ë¡œ truncate ë¬¸ë„ ì˜ ìˆ˜í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n![](.index_images/086045e1.png)\n\n## ğŸš€ ì •ë¦¬\n\në‹¤ì–‘í•œ ë°©ë²•ì„ ì‹œë„í•´ë³´ë©´ì„œ ê²°ë¡ ì ìœ¼ë¡œ BeforeEachCallbackì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ê¹Œì§€ ì ìš©í•´ë´¤ë‹¤.\nê¹”ë”í•˜ê²Œ ì •ë¦¬ëœ í…ŒìŠ¤íŠ¸ë¥¼ ë³´ë‹ˆ ê¸°ë¶„ì´ ì¢‹ë‹¤. ğŸ‘\n\n### ìµœì¢… ì½”ë“œ\n\n![](.index_images/21f5d279.png)\n\níŒ¨í‚¤ì§€ êµ¬ì¡°ëŠ” ìœ„ì™€ ê°™ì´ êµ¬ì„±ë˜ì—ˆê³  ê°ê°ì˜ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n```java\n// DatabaseCleaner.java\n@Component\npublic class DatabaseCleaner {\n\n    private final List<String> tableNames = new ArrayList<>();\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @SuppressWarnings(\"unchecked\")\n    @PostConstruct\n    private void findDatabaseTableNames() {\n        List<Object[]> tableInfos = entityManager.createNativeQuery(\"SHOW TABLES\").getResultList();\n        for (Object[] tableInfo : tableInfos) {\n            String tableName = (String) tableInfo[0];\n            tableNames.add(tableName);\n        }\n    }\n\n    private void truncate() {\n        entityManager.createNativeQuery(String.format(\"SET FOREIGN_KEY_CHECKS %d\", 0)).executeUpdate();\n        for (String tableName : tableNames) {\n            entityManager.createNativeQuery(String.format(\"TRUNCATE TABLE %s\", tableName)).executeUpdate();\n        }\n        entityManager.createNativeQuery(String.format(\"SET FOREIGN_KEY_CHECKS %d\", 1)).executeUpdate();\n    }\n\n    @Transactional\n    public void clear() {\n        entityManager.clear();\n        truncate();\n    }\n}\n\n// DatabaseClearExtension.java\npublic class DatabaseClearExtension implements BeforeEachCallback {\n\n    @Override\n    public void beforeEach(ExtensionContext context) throws Exception {\n        DatabaseCleaner databaseCleaner = getDataCleaner(context);\n        databaseCleaner.clear();\n    }\n\n    private DatabaseCleaner getDataCleaner(ExtensionContext extensionContext) {\n        return SpringExtension.getApplicationContext(extensionContext)\n                .getBean(DatabaseCleaner.class);\n    }\n}\n\n// AcceptanceTest.java\n@ExtendWith(DatabaseClearExtension.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\npublic class AcceptanceTest {\n\n    @LocalServerPort\n    int port;\n\n    @BeforeEach\n    void setUp() {\n        RestAssured.port = port;\n    }\n}\n\n\n// DictionaryPlantApiTest.java\n\nclass DictionaryPlantApiTest extends AcceptanceTest {\n\t...\n}\n```\n\n## Reference\n\n- https://ttl-blog.tistory.com/1407\n- https://mangkyu.tistory.com/264\n- https://stackoverflow.com/questions/41763417/api-test-transactional-rollback\n- https://stackoverflow.com/questions/62142428/dirtiescontext-does-not-work-with-nested-tests\n- https://unluckyjung.github.io/testcode/2021/05/08/Independent-Test-Mehod/\n- https://www.baeldung.com/junit-5-extensions"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'í•˜ë§ˆë“œ'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ê°œìš” ìš°ì•„í•œí…Œí¬ì½”ìŠ¤ 5ê¸° í”¼ì›€ ì„œë¹„ìŠ¤ì˜ ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë˜ ë„ì¤‘, ì‹¤ì œ í¬íŠ¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™ì‹œì¼œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ëŠ” \ní™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•  ë•Œ, í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œì—ì„œ ë¶„ëª…íˆ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë¥¼ ì €ì¥í–ˆëŠ”ë°ë„ RestAssuredì˜ GET ìš”ì²­ì´ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆì—ˆë‹¤. ì´ ì´ìœ ë¥¼ íŒŒì•…í•˜ê³  í•´ê²° ê³¼ì •ì„ â€¦","fields":{"slug":"/transactional-not-in-restassured/"},"frontmatter":{"date":"July 31, 2023","title":"[íŠ¸ëŸ¬ë¸”ìŠˆíŒ…] @SpringbootTestì˜ RANDOM_PORT í™˜ê²½ì—ì„œ @Transactional ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í–ˆì„ ë•Œ, RestAssured GET ìš”ì²­ì´ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ” ê²½ìš°(íŠ¸ëœì­ì…˜ ê²©ë¦¬ ì´í•´í•˜ê¸°)","tags":["Transaction","SpringbootTest"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[í•˜ë§ˆë“œ](https://github.com/rawfishthelgh)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ê°œìš”\nìš°ì•„í•œí…Œí¬ì½”ìŠ¤ 5ê¸° í”¼ì›€ ì„œë¹„ìŠ¤ì˜ ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë˜ ë„ì¤‘, ì‹¤ì œ í¬íŠ¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ë™ì‹œì¼œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ëŠ” `@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)`\ní™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•  ë•Œ, í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œì—ì„œ ë¶„ëª…íˆ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë¥¼ ì €ì¥í–ˆëŠ”ë°ë„ RestAssuredì˜ GET ìš”ì²­ì´ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆì—ˆë‹¤. ì´ ì´ìœ ë¥¼ íŒŒì•…í•˜ê³  í•´ê²° ê³¼ì •ì„ ì •ë¦¬í•œë‹¤\n## ìƒí™©\n\n![img.png](.index_images/img.png)\n\në‹¹ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê³  ìˆì—ˆë‹¤. ê° í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œê°€ ëë‚œ í›„ íŠ¸ëœì­ì…˜ì„ ë¡¤ë°±ì‹œì¼œ ê²©ë¦¬ë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•´ í´ë˜ìŠ¤ ë ˆë²¨ì— `@Transactional` ì–´ë…¸í…Œì´ì…˜ì„ ì„ ì–¸í–ˆì—ˆë‹¤.\n\n![img_1.png](.index_images/img_1.png)\n\nAcceptanceTest í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ì‚¬ì „ ì‹ë¬¼ì˜ ì¡°íšŒë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì¸ìˆ˜ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í–ˆë‹¤.\n37ë²ˆì§¸ ì¤„ì˜ `DictionaryPlant REQUEST = dictionaryPlantSupport.builder().build();` ëŠ”\n![img_2.png](.index_images/img_2.png)\në‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ repositoryì— í…ŒìŠ¤íŠ¸ìš© ì—”í‹°í‹° ê°ì²´ë¥¼ saveí•˜ëŠ” ê³¼ì •ì„ ê°„í¸í•˜ê²Œ í•˜ê¸° ìœ„í•´ ì‘ì„±ëœ DictionarySupport í´ë˜ìŠ¤ì™€ ì½”ë“œì´ë‹¤. ì¦‰ 37ë²ˆ ë¼ì¸ì„ ì‚¬ìš©í•˜ë©´ ì„ì˜ì˜ ê°ì²´ ì •ë³´ë¥¼ dBì— ì €ì¥í•˜ëŠ” insert ì‘ì—…ì´ ì¼ì–´ë‚œë‹¤.\n\nì¦‰, í˜„ì¬ í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œëŠ” repositoryì— ì‚¬ì „ ì‹ë¬¼ ê°ì²´ë¥¼ ì €ì¥í•˜ê³ , ì´ë¥¼ RestAssuredë¥¼ í™œìš©í•˜ì—¬ ì‹¤ì œ ì„œë²„ì—ì„œ ìš”ì²­ì„ ë³´ë‚´ ì €ì¥ëœ ì‚¬ì „ ì‹ë¬¼ì´ ì¡°íšŒë˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ê³¼ì •ì´ë‹¤.\n\n![img_3.png](.index_images/img_3.png)\n\nê·¸ëŸ°ë°, 200 OKë¥¼ ê¸°ëŒ€í–ˆë˜ í…ŒìŠ¤íŠ¸ì˜ ê²°ê³¼ê°€ 404 not foundê°€ ì‘ë‹µë˜ê³  ì‚¬ì „ ì‹ë¬¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ˆì™¸ ë©”ì„¸ì§€ê°€ ëœ¨ëŠ” ê²ƒì„ í™•ì¸í•˜ê²Œ ë˜ì—ˆë‹¤.\n\në­˜ê¹Œ? insert ì¿¼ë¦¬ê°€ ë‚ ì•„ê°€ì§€ ì•Šì€ ê±¸ê¹Œ? ë¡œê·¸ë¥¼ í™•ì¸í•´ ë³´ì•˜ë‹¤.\n![img_4.png](.index_images/img_4.png)\nê·¸ëŸ¬ë‚˜, ë¡œê·¸ì—ëŠ” ì •í™•íˆ ìš°ë¦¬ê°€ DictionarySupportì—ì„œ ì§€ì •í•œ ì €ì¥ ë©”ì†Œë“œì˜ Insert ì¿¼ë¦¬ê°€ ë‚ ì•„ê°€ëŠ” ê²ƒì„ ë³´ê³  ìˆì—ˆë‹¤. ì‹¬ì§€ì–´ value ê°’ë„ ëª¨ë‘ ì •í™•íˆ ë“¤ì–´ê°”ë‹¤.\n![img_5.png](.index_images/img_5.png)\nselect ì¿¼ë¦¬ê°€ ì˜ëª»ëœê²Œ ì•„ë‹Œê°€? í™•ì¸í•´ë´¤ì§€ë§Œ ì˜ˆìƒí•œëŒ€ë¡œ ë‚˜ê°”ë‹¤.\nì—¬ê¸°ê¹Œì§€ ë´ì„œëŠ” ì´í•´ê°€ ì•ˆ ê°„ë‹¤. insertë¥¼ í•˜ê³  selectë¥¼ í–ˆëŠ”ë° ì¡°íšŒê°€ ì•ˆ ë˜ë‹ˆ ë§ì´ë‹¤.\n## RandomPort í™˜ê²½ì—ì„œì˜ ìŠ¤ë ˆë“œì™€ íŠ¸ëœì­ì…˜\nì´ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” RandomPort í™˜ê²½ì—ì„œì˜ ìš”ì²­ì´ ì–´ë–¤ ìŠ¤ë ˆë“œë¥¼ ê°–ëŠ”ì§€ë¥¼ ì•Œì•„ì•¼ í•œë‹¤. ì´ ë‚´ìš©ì€ ìŠ¤í”„ë§ ê³µì‹ ë¬¸ì„œë¥¼ ë“¤ì—¬ë‹¤ë³¼ í•„ìš”ê°€ ìˆë‹¤.\n> If your test is @Transactional, it rolls back the transaction at the end of each test method by default. However, as using this arrangement with either RANDOM_PORT or DEFINED_PORT implicitly provides a real servlet environment, the HTTP client and server run in separate threads and, thus, in separate transactions. Any transaction initiated on the server does not roll back in this case.\n\n> í…ŒìŠ¤íŠ¸ì— @Transactionalì´ ë¶™ì–´ ìˆìœ¼ë©´ ë¡¤ë°±ì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤. ë‹¨, RANDOM_PORT ë‚˜ DEFINED_PORT í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ë©´, ì‹¤ì œ ì„œë¸”ë¦¿ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•œë‹¤. ì´ ë•Œ http í´ë¼ì´ì–¸íŠ¸(í…ŒìŠ¤íŠ¸)ì™€ ì„œë²„ëŠ” ì„œë¡œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œë¥¼ ê°–ëŠ”ë‹¤. ì¦‰ ë³„ê°œì˜ íŠ¸ëœì­ì…˜ì´ ìˆ˜í–‰ë˜ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì„œë²„ ìª½ì—ì„œì˜ íŠ¸ëœì­ì…˜ì€ ë¡¤ë°±ë˜ì§€ ì•ŠëŠ”ë‹¤.\n\nì‰½ê²Œ ì„¤ëª…í•˜ìë©´, ëœë¤ í¬íŠ¸ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ëŠ” ìˆœê°„, localhost í¬íŠ¸ ì–´ë”˜ê°€ì— ë‚´ì¥ ì„œë²„ë¥¼ ë„ìš´ë‹¤. ê·¸ë¦¬ê³  ê·¸ ì„œë²„ì—ì„œ ìš”ì²­ì„ ë³´ë‚´ë„ë¡ í•˜ëŠ” ê²ƒì´ RestAssured ì´ë‹¤. ë”°ë¼ì„œ RestAssuredì—ì„œ ë³´ë‚´ëŠ” ìš”ì²­ì€, ë‚´ê°€ í•´ë‹¹ í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œì—ì„œ ì‹¤í–‰í•˜ëŠ” ìŠ¤ë ˆë“œì™€ ë³„ê°œì˜ ìŠ¤ë ˆë“œë¥¼ ê°–ëŠ”ë‹¤. ë”°ë¼ì„œ íŠ¸ëœì­ì…˜ë„ ê°ì ë³„ê°œë¡œ ê°–ëŠ”ë‹¤.\n\nì, ì•„ê¹Œ ìš°ë¦¬ê°€ AcceptanceTestì˜ í´ë˜ìŠ¤ ë ˆë²¨ì—ì„œ `@Transactional`ì„ ì„ ì–¸í–ˆìŒì„ ê¸°ì–µí•  ê²ƒì´ë‹¤. í´ë˜ìŠ¤ ë ˆë²¨ì— ì´ ì–´ë…¸í…Œì´ì…˜ì„ ì„ ì–¸í•˜ë©´, ìë™ì ìœ¼ë¡œ í•´ë‹¹ í´ë˜ìŠ¤ì™€ ê·¸ë¥¼ ìƒì†í•œ ë©”ì†Œë“œ ë ˆë²¨ì— ëª¨ë‘ íŠ¸ëœì­ì…˜ì´ ê±¸ë¦°ë‹¤.\n![img_6.png](.index_images/img_6.png)\në”°ë¼ì„œ, í˜„ì¬ í…ŒìŠ¤íŠ¸ ë©”ì†Œë“œì˜ íŠ¸ëœì­ì…˜ ë²”ìœ„ëŠ” ë‹¤ìŒ í™”ì‚´í‘œì™€ ê°™ì´ í…ŒìŠ¤íŠ¸ê°€ ëë‚  ë•Œ ê¹Œì§€ ìœ ì§€ëœë‹¤.\n\nìš°ë¦¬ëŠ” ì—¬ê¸°ì„œ íŠ¸ëœì­ì…˜ì˜ ê°œë…ì— ëŒ€í•´ ë‹¤ì‹œ ì§šì„ í•„ìš”ê°€ ìˆë‹¤.\n\"íŠ¸ëœì­ì…˜ì´ ëë‚˜ì§€ ì•Šì•˜ë‹¤\"ëŠ” ì˜ë¯¸ëŠ” ë¬´ì—‡ì¸ê°€?\në‚´ê°€ ìˆ˜í–‰í•œ insert, update, delete ë¬¸ì´ ì»¤ë°‹, í˜¹ì€ ë¡¤ë°±ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ëœ»ì´ë‹¤.\n\nì»¤ë°‹ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ëœ»ì€ ë¬´ì—‡ì¸ê°€?\në°ì´í„°ë² ì´ìŠ¤ì˜ ê°±ì‹ ì´ ì´ë¤„ì¡Œì–´ë„, ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ í™•ì¸í•  ìˆ˜ ì—†ë‹¤ëŠ” ëœ»ì´ë‹¤.\nì™œ? íŠ¸ëœì­ì…˜ì€ ê°ì ê²©ë¦¬ë˜ì–´ ì„œë¡œì˜ íŠ¸ëœì­ì…˜ì´ ëë‚˜ê¸° ì „ ê¹Œì§€ëŠ” ì—°ì‚° ê³¼ì •ì„ ë³¼ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.(íŠ¸ëœì­ì…˜ì˜ Isolation(ê²©ë¦¬ì„±) íŠ¹ì§•ì„ ê¸°ì–µí•˜ì)\n\në”°ë¼ì„œ, í˜„ì¬ íŠ¸ëœì­ì…˜ì´ ëë‚˜ê¸°ë„ ì „ì—, ì¦‰ ë°˜ì˜ë˜ê¸°ë„ ì „ì— RestAssuredë¥¼ í†µí•´ ë„ìš´ ë³„ê°œì˜ ì„œë²„ ìŠ¤ë ˆë“œì—ì„œ GET ìš”ì²­ì´ ë“¤ì–´ê°€ë‹ˆ í•´ë‹¹ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ëŠ” ê²ƒì´ë‹¤.\nì •í™•íˆ ë§í•˜ë©´ íŠ¸ëœì­ì…˜ì´ ì»¤ë°‹ë˜ì§€ ì•Šì•˜ì„ ë•Œ ê¹Œì§€ì˜ ë°ì´í„°ëŠ”, ë‹¤ë¥¸ ìŠ¤ë ˆë“œ ì…ì¥ì—ì„œ ê·¸ëƒ¥ ì—†ëŠ” ë°ì´í„°ë‹¤. ì—†ëŠ”ê±¸ ì¡°íšŒí•˜ë‹ˆ ë‹¹ì—°íˆ ê°’ì´ ì•ˆ ë‚˜ì˜¨ë‹¤.\n\n![img_7.png](.index_images/img_7.png)\nê·¸ë˜ì„œ `@Transactional` ì–´ë…¸í…Œì´ì…˜ì„ ì œê±°í•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í–ˆë”ë‹ˆ, ë‹¤ìŒê³¼ ê°™ì´ í†µê³¼í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n![img_8.png](.index_images/img_8.png)\nì´í•´ë¥¼ ì‰½ê²Œ í•˜ê¸° ìœ„í•´ ë°”ë€ íŠ¸ëœì­ì…˜ì˜ ë²”ìœ„ë¥¼ í™”ì‚´í‘œë¡œ í‘œí˜„í•˜ë©´, DictionaryPlantë¥¼ ì €ì¥í•˜ëŠ” ê³¼ì •ì—ì„œ íŠ¸ëœì­ì…˜ì´ ëë‚˜ê³  ì»¤ë°‹ì´ ë˜ì–´ dbì— ì˜ì†í™”ê°€ ì™„ë£Œëœë‹¤.\në”°ë¼ì„œ ì´í›„ ëœë¤ í¬íŠ¸ì˜ ìŠ¤ë ˆë“œì—ì„œë„ í•´ë‹¹ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.\n\n\n## íŠ¸ëœì­ì…˜ì˜ ê²©ë¦¬ ì´í•´í•˜ê¸°\n\n![img_9.png](.index_images/img_9.png)\n![img_10.png](.index_images/img_10.png)\ní•´ë‹¹ ë™ì‘ì— ëŒ€í•´ ì¡°ê¸ˆ ë” ì„¤ëª…í•˜ê¸° ìœ„í•´ ë³„ê°œì˜ ìŠ¤ë ˆë“œì— h2 database ì½˜ì†”ì„ ë„ì›Œ í™•ì¸í•´ ë³´ê² ë‹¤. ìœ„ì˜ ë‘ ì½˜ì†” í™”ë©´ì€ ì„¸ì…˜ idê°€ ë‹¤ë¥¸ ë³„ê°œì˜ ìŠ¤ë ˆë“œë¥¼ ê°–ëŠ”ë‹¤. í¸ì˜ìƒ ìœ„ë¥¼ ìŠ¤ë ˆë“œA, ì•„ë˜ë¥¼ Bë¼ í•˜ê² ë‹¤\n\n![img_11.png](.index_images/img_11.png)\nìŠ¤ë ˆë“œ Aì—ì„œ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê¸°ìœ„í•´ Autocommitì„ Falseë¡œ ë³€ê²½í•œ í›„, ë‘ ëª…ì˜ member ë°ì´í„°ë¥¼ insert í–ˆë‹¤.\n![img_12.png](.index_images/img_12.png)\nì´ ë•Œ Aì—ì„œ select ë¬¸ì„ ì‹¤í–‰í•˜ë©´ ë°ì´í„°ê°€ ë“¤ì–´ê°€ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n![img_13.png](.index_images/img_13.png)\nê·¸ëŸ¬ë‚˜, Bì—ì„œ ë™ì¼í•œ selectë¬¸ì„ ì‹¤í–‰í•˜ë©´ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ë‹¤.\nì™œëƒ? ìŠ¤ë ˆë“œ Aì˜ íŠ¸ëœì­ì…˜ì€ ëë‚˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— Aì—ì„œ ë³´ì´ëŠ” ë°ì´í„°ëŠ” \"ì„ì‹œ ë°˜ì˜\"ëœ ë°ì´í„°ì¼ ë¿, \"ì˜ì†í™”\"ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ë‹¤.\n![img_14.png](.index_images/img_14.png)\në§Œì•½ ìœ„ì™€ ê°™ì´ ìŠ¤ë ˆë“œ Aì—ì„œ ì»¤ë°‹ì„ í•˜ê³  ë‚˜ë©´\n![img_15.png](.index_images/img_15.png)\nì´ì œëŠ” ìŠ¤ë ˆë“œ Bì—ì„œë„ ë™ì¼í•œ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n## ê²°ë¡ \nê²°êµ­ ë©”ì†Œë“œ ë ˆë²¨ì— `@Transactional` ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ íƒ“ì— save ë©”ì†Œë“œë¥¼ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰í•´ë„, íŠ¸ëœì­ì…˜ì´ ëë‚˜ì§€ ì•Šì•„(ì •í™•íˆ ë§í•˜ë©´ ì»¤ë°‹ë˜ì§€ ì•Šì•„) ëœë¤ í¬íŠ¸ ì„œë²„ì˜ ìŠ¤ë ˆë“œì—ì„œ í™•ì¸í•  ìˆ˜ ì—†ëŠ” ê²ƒì´ë‹¤.\në”°ë¼ì„œ ëœë¤ í¬íŠ¸ í™˜ê²½ì˜ ê²©ë¦¬ì„±ì„ ë³´ì¥í•˜ê³ ì í•  ë•ŒëŠ” `@Transactional` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ê¸° ë³´ë‹¤ëŠ”, truncateë¥¼ í•˜ëŠ” sql ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ê³ ë ¤í•˜ëŠ”ê²Œ ë” ì ì ˆí•˜ë‹¤ê³  ìƒê°í•œë‹¤.\n\n\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì£¼ë…¸', 'ê·¸ë ˆì´', 'ì¡°ì´', 'í•˜ë§ˆë“œ'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì„œë¡  í˜„ì¬ í”¼ì›€íŒ€ ì„œë²„ëŠ”  ìš”ì²­ìœ¼ë¡œ ì´ë¤„ì ¸ìˆë‹¤.\nëŠ” WWW ìƒì—ì„œ ì •ë³´ë¥¼ ì£¼ê³  ë°›ëŠ” í”„ë¡œí† ì½œì¸ë°, ëˆ„êµ°ê°€ ë„¤íŠ¸ì›Œí¬ì—ì„œ ì‹ í˜¸ë¥¼ ê°€ë¡œì±„ë©´ ë‚´ìš©ì´ ë…¸ì¶œë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.\nì´ë¥¼ í•´ê²°í•´ì£¼ëŠ” í”„ë¡œí† ì½œì´ ë°”ë¡œ ì´ë‹¤. ëŠ” ì •ë³´ë¥¼ ì•”í˜¸í™”í•˜ëŠ” SSLì„ ì´ìš©í•œ í”„ë¡œí† ì½œì´ë‹¤. â€¦","fields":{"slug":"/apply-https/"},"frontmatter":{"date":"July 28, 2023","title":"ë‚´ ì„œë²„ì— HTTPS ì„¤ì •í•˜ê¸°","tags":["HTTPS"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì£¼ë…¸](https://github.com/Choi-JJunho)', '[ê·¸ë ˆì´](https://github.com/kim0914)', '[ì¡°ì´](https://github.com/yeonkkk)', '[í•˜ë§ˆë“œ](https://github.com/rawfishthelgh)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n\n## ì„œë¡ \n\ní˜„ì¬ í”¼ì›€íŒ€ ì„œë²„ëŠ” `HTTP` ìš”ì²­ìœ¼ë¡œ ì´ë¤„ì ¸ìˆë‹¤.\n`HTTP`ëŠ” WWW ìƒì—ì„œ ì •ë³´ë¥¼ ì£¼ê³  ë°›ëŠ” í”„ë¡œí† ì½œì¸ë°, ëˆ„êµ°ê°€ ë„¤íŠ¸ì›Œí¬ì—ì„œ ì‹ í˜¸ë¥¼ ê°€ë¡œì±„ë©´ ë‚´ìš©ì´ ë…¸ì¶œë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.\nì´ë¥¼ í•´ê²°í•´ì£¼ëŠ” í”„ë¡œí† ì½œì´ ë°”ë¡œ `HTTPS`ì´ë‹¤.\n\n`HTTPS`ëŠ” ì •ë³´ë¥¼ ì•”í˜¸í™”í•˜ëŠ” SSLì„ ì´ìš©í•œ í”„ë¡œí† ì½œì´ë‹¤. \ní˜„ì¬ëŠ” TLS ë°©ì‹ë„ ì‚¬ìš©ë˜ëŠ”ë° ì—¬ê¸°ì—ì„œ **í•µì‹¬ì€ ë³´ì•ˆ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì•”í˜¸í™”**ë¥¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n\nëŒ€ì¹­í‚¤ì™€ ê³µê°œí‚¤, ì¸ì¦ì„œì™€ ê°™ì€ ë°©ì‹ì„ ì‚¬ìš©í•´ HTTPSë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤.\nì´ë²ˆ ê¸€ì—ì„œëŠ” `Certbots`ì„ ì´ìš©í•´ `HTTPS`ë¥¼ nginxì— ì‰½ê²Œ ì„¤ì¹˜í•˜ê³  ì ìš©í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë¤„ë³¸ë‹¤.\n\nHTTP, HTTPSì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ ë³„ë„ì˜ ê¸€ì—ì„œ ë‹¤ë£° ì˜ˆì •ì´ë‹¤.\n\n`Let's Encrypt`ì—ì„œëŠ” ì¸ì¦ì„œë¥¼ ë¬´ë£Œë¡œ ë°œê¸‰í•´ì£¼ê³  ìˆê³  `Certbots`ê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ê¸°ë¥¼ ê¶Œì¥í•˜ê¸° ë•Œë¬¸ì— `Certbots`ì„ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤.  \n\nì´ ë‚´ìš©ì€ ì•„ë˜ ì´ë¯¸ì§€ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.  \n![img.png](img.png)\n\n\n\n## Certbot ì„¤ì¹˜\n\nì„œë²„ì— HTTPS ì„¤ì •ì„ í•´ë³´ì\n[Certbot ê³µì‹ë¬¸ì„œ](https://certbot.eff.org/)\n\n> ê³µì‹ë¬¸ì„œì˜ ê°€ì´ë“œë¥¼ ë”°ë¼ ì‘ì„±ëœ ë¬¸ì„œì…ë‹ˆë‹¤.\n> https://certbot.eff.org/instructions\n\n![](.index_images/a8ec6c59.png)\n\n```shell\n# certbotì„ ì„¤ì¹˜í•˜ê¸° ìœ„í•œ snapì„ ì„¤ì¹˜í•œë‹¤.\nsudo apt update\nsudo apt install snapd\n\n# ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ìˆëŠ” certbotì„ ì œê±°í•œë‹¤.\nsudo apt-get remove certbot\n\n# certbotì„ ì„¤ì¹˜í•œë‹¤.\nsudo snap install --classic certbot\n\n# certbotì´ ì˜ ì„¤ì¹˜ë˜ì–´ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.\nsudo ln -s /snap/bin/certbot /usr/bin/certbot\n\n# certbotì„ nginxì— ì—°ê²°í•˜ê¸°\nsudo certbot --nginx\n```\n## HTTPS ì„¤ì •\n\n![](.index_images/5498d43a.png)\n\n```shell\n# certbotì´ SSL ì¸ì¦ì„œë¥¼ ìë™ ê°±ì‹ í•˜ëŠ” cronì„ ë“±ë¡í•œë‹¤\nsudo certbot renew --dry-run\n```\n\n## NGINX ì„¤ì • í™•ì¸\n\nNGINX ì„¤ì •ì— ë‹¤ìŒê³¼ ê°™ì´ certbotì´ HTTPS ì„¤ì •ì„ ì¶”ê°€í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n![](.index_images/3d08df23.png)\n\n## Reference\n\n- https://certbot.eff.org/instructions\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'í´ë¦°'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì‚¬ê±´ì˜ ë°œë‹¨ ì´ë²ˆ Level3 2ì°¨ ë°ëª¨ë°ì´ë•Œ ê¶Œì¥ì‚¬í•­ì„ ë§ì¶”ê¸° ìœ„í•´ì„œ í”„ë¡œë•ì…˜ ë°°í¬ê¹Œì§€ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. ì–´ì°Œ ì €ì°Œ ë°°í¬ëŠ” ì˜ ëì´ ë‚¬ëŠ”ë° ë¬¸ì œëŠ” ì²« í˜ì´ì§€ê°€ ë¡œë“œ ë˜ëŠ”ë° ì•½ 4ì´ˆ ê°€ëŸ‰ì˜ ì‹œê°„ì´ ê±¸ë¦°ë‹¤ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ ë¬¸ì œì¸ê°€? í•˜ê³  ë´¤ëŠ”ë° ì•„ë‹ˆì—ˆê³ , ê²°êµ­  íŒŒì¼ì˜ í¬ê¸°ë¥¼ ë³´ë‹ˆ ë¬´ë ¤ 16mâ€¦","fields":{"slug":"/bundle-analyze/"},"frontmatter":{"date":"July 28, 2023","title":"bundle-analyzeë¥¼ í†µí•œ bundle í¬ê¸° ë¶„ì„","tags":["bundle","ìµœì í™”"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[í´ë¦°](https://github.com/hozzijeong)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ì‚¬ê±´ì˜ ë°œë‹¨\n\nì´ë²ˆ Level3 2ì°¨ ë°ëª¨ë°ì´ë•Œ ê¶Œì¥ì‚¬í•­ì„ ë§ì¶”ê¸° ìœ„í•´ì„œ í”„ë¡œë•ì…˜ ë°°í¬ê¹Œì§€ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. ì–´ì°Œ ì €ì°Œ ë°°í¬ëŠ” ì˜ ëì´ ë‚¬ëŠ”ë° ë¬¸ì œëŠ” ì²« í˜ì´ì§€ê°€ ë¡œë“œ ë˜ëŠ”ë° ì•½ 4ì´ˆ ê°€ëŸ‰ì˜ ì‹œê°„ì´ ê±¸ë¦°ë‹¤ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ ë¬¸ì œì¸ê°€? í•˜ê³  ë´¤ëŠ”ë° ì•„ë‹ˆì—ˆê³ , ê²°êµ­ `bundle.js` íŒŒì¼ì˜ í¬ê¸°ë¥¼ ë³´ë‹ˆ ë¬´ë ¤ 16më‚˜ ë˜ì—ˆë˜ ê²ƒì…ë‹ˆë‹¤.\n\n![image](https://github.com/pium-official/pium-official.github.io/assets/50974359/72ec258f-77e0-41aa-8bcd-c4c3d3b0410e)\n\nì™œ ì´ë ‡ê²Œ í¬ê¸°ê°€ í¬ì§€? ë¼ëŠ” ìƒê°ì„ í•˜ë©° í¬ê²Œ 2ê°€ì§€ì˜ ê²½ìš°ë¥¼ ìƒì°¾ì•„ë´¤ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ë¡œ ì›ì¸ì´ ì•„ë‹˜ì„ ì•Œì•˜ìŠµë‹ˆë‹¤.\n\n1. minifyê°€ ë˜ì§€ ì•Šì•˜ë‹¤ â†’ webpack 4 ì´ìƒì„ ì‚¬ìš©í•˜ë©´ì„œ ìë™ìœ¼ë¡œ `production` ì¼ë•ŒëŠ” ìë™ìœ¼ë¡œ ì„¤ì •\n2. css íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í¼ â†’ `styled-component`ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— .css ê°€ ì—†ìŒ.\n\në”°ë¼ì„œ `bundle.js`ì˜ ì„±ëŠ¥ì„ í™•ì¸í•´ ë³¼ í•„ìš”ê°€ ìˆì—ˆê³  ê²€ìƒ‰í•˜ë˜ ë„ì¤‘ [webpack-bundle-analyzer](https://www.npmjs.com/package/webpack-bundle-analyzer)ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì•Œê²Œë˜ì—ˆìŠµë‹ˆë‹¤.\n\n## Webpack Bundle Analyzer\n\nwebpackì„ í†µí•´ buildí•œ bundleì˜ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ëª¨ë“  ë²ˆë“¤ì— ëŒ€í•œ íŠ¸ë¦¬ë¥¼ ì‹œê°í™” í•´ì„œ ë³´ì—¬ì£¼ëŠ” ì´ì ì„ ê°–ê³  ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ë²•ì€ ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤. ìš°ì„  ì„¤ì¹˜ë¥¼ í•´ì¤ë‹ˆë‹¤.\n\n```jsx\n# NPM\nnpm install --save-dev webpack-bundle-analyzer\n# Yarn\nyarn add -D webpack-bundle-analyzer\n```\n\nì„¤ì¹˜ë¥¼ í•œ ë’¤ `webpack.config.js` íŒŒì¼ ë‚´ë¶€ì—ì„œ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•´ ì¤ë‹ˆë‹¤.\n\n```jsx\nconst BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;\n\nmodule.exports = {\n  plugins: [\n    new BundleAnalyzerPlugin()\n  ]\n}\n```\n\ní”ŒëŸ¬ê·¸ì¸ ì•ˆì— ì˜µì…˜ì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ”ë°, [ì—¬ê¸°](https://github.com/webpack-contrib/webpack-bundle-analyzer#options-for-plugin)ì—ì„œ ì˜µì…˜ì— ëŒ€í•œ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nìœ„ì— í”ŒëŸ¬ê·¸ì¸ ì˜µì…˜ì—ì„œ `generateStatsFile` ì„ `true` ë¡œ ì„¤ì •í•œ ë‹¤ìŒì— `package.json`ì— `scripts` ì—ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```json\n\"scripts\":{\n  ...\n  \"preanalyze\": \"npm run build-dev\",\n  \"analyze\": \"webpack-bundle-analyzer bundle/output/path/stats.json\"\n}\n```\n\n![image](https://github.com/pium-official/pium-official.github.io/assets/50974359/6bc524c4-4866-4ebe-9daa-95035e0c0dd5)\n\nì‹¤í–‰í•œ ë’¤ì— bundleì„ ë¶„ì„í•´ ë´¤ë”ë‹ˆ react-iconsì—ì„œ 15.3më‚˜ ì°¨ì§€í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ë“œë””ì–´ ë¬¸ì œì˜ ì›í‰ì„ ì°¾ì•„ëƒˆìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ react-iconsë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆì„ê¹Œìš”?\n\n### Icons\n\n[ì—¬ê¸°](https://icones.js.org/collection/all?s=material-symbols:cancel)ì— ê°€ì‹œë©´ ë‹¤ì–‘í•œ ì•„ì´ì½˜ë“¤ì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì›í•˜ëŠ” ì•„ì´ì½˜ì„ ì„ íƒí•œ ë‹¤ìŒì— SVG, Component ë“±ìœ¼ë¡œ ì½”ë“œë¥¼ ë°˜í™˜í•´ ì¤ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ react-iconsë¥¼ ì œê±°í•˜ê³  iconsë¥¼ ì‚¬ìš©í•´ì„œ ì•„ì´ì½˜ì„ ëŒ€ì²´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì£¼ë…¸', 'ê·¸ë ˆì´', 'ì¡°ì´', 'í•˜ë§ˆë“œ'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì„œë¡  ë³¸ ì„¤ëª… ê¸€ì€ ë‹¤ìŒê³¼ ê°™ì€ í™˜ê²½ì—ì„œ ì§„í–‰ë©ë‹ˆë‹¤. ë°°í¬ì„œë²„ : Ubuntu 22.04.2 LTS DBì„œë²„ : Ubuntu 22.04.2 LTS ë°°í¬ì„œë²„ì™€ DBì„œë²„ëŠ” ë™ì¼í•œ VPCë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. DB : MySQL 8.0.33 Application : Sprâ€¦","fields":{"slug":"/db-drop-stop/"},"frontmatter":{"date":"July 28, 2023","title":"Table Drop ëª»í•˜ê²Œ ë§‰ì•„ë²„ë¦¬ê¸°","tags":["DB","MySQL"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì£¼ë…¸](https://github.com/Choi-JJunho)', '[ê·¸ë ˆì´](https://github.com/kim0914)', '[ì¡°ì´](https://github.com/yeonkkk)', '[í•˜ë§ˆë“œ](https://github.com/rawfishthelgh)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n\n## ì„œë¡ \n\në³¸ ì„¤ëª… ê¸€ì€ ë‹¤ìŒê³¼ ê°™ì€ í™˜ê²½ì—ì„œ ì§„í–‰ë©ë‹ˆë‹¤.\n> - ë°°í¬ì„œë²„ : Ubuntu 22.04.2 LTS\n> - DBì„œë²„ : Ubuntu 22.04.2 LTS\n> - ë°°í¬ì„œë²„ì™€ DBì„œë²„ëŠ” ë™ì¼í•œ VPCë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n> - DB : MySQL 8.0.33\n> - Application : SpringBoot 3.1.1\n\nê°œë°œ ê³¼ì •ì—ì„œ ì‹¤ìˆ˜ë¡œ Application ë‹¨ì—ì„œ DB í˜¹ì€ í…Œì´ë¸”ì„ Drop í•´ë²„ë¦¬ëŠ” ìƒí™©ì´ ìˆì„ ìˆ˜ ìˆë‹¤.\n\ní…Œì´ë¸”ì˜ ìˆ˜ì •ì´ ì œí•œëœ ìœ ì €ë¥¼ ìƒì„±í•˜ì—¬ í•´ë‹¹ ìœ ì €ë¥¼ Applicationì—ì„œ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±í•´ë³´ì. \n\n> ë„ì›€ì„ ì£¼ì‹  Gì„ ìƒë‹˜ê»˜ ê°ì‚¬ì˜ ì¸ì‚¬ ì˜¬ë¦¬ë©° ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤.\n> \n> ![](.index_images/c34a6c3a.png)\n\n## ìœ ì € ìƒì„±í•˜ê¸°\n\n> ì´í›„ ì§„í–‰í•  ì‘ì—…ì—ì„œ ê¶Œí•œ ë¶€ì—¬ë¥¼ ìœ„í•´ root ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.\n\nìš°ì„  root ê¶Œí•œì„ ê°€ì§„ ê³„ì •ìœ¼ë¡œ MySQLì— ë¡œê·¸ì¸ í•œë‹¤.\n\n```shell\n# MySQLì— ë¡œê·¸ì¸\nsudo mysql -u root -p\n```\n\nApplicationì—ì„œ ì‚¬ìš©í•  ìœ ì €ë¥¼ ìƒì„±í•œë‹¤.\n\n```sql\nCREATE USER 'pium'@'localhost' IDENTIFIED BY 'password';\n```\n\n> ë§Œì•½ ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•´ì•¼í•˜ëŠ” ìœ ì €ì˜ ê²½ìš° ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì°¸ê³ í•˜ì„¸ìš”\n> \n> ```sql\n> # ì™¸ë¶€ ëª¨ë“  IPì— ëŒ€í•œ pium ì´ë¼ëŠ” ìœ ì € ìƒì„± \n> CREATE USER 'pium'@'%' IDENTIFIED BY 'password';\n> \n> # íŠ¹ì • ì¸ìŠ¤í„´ìŠ¤ì—ì„œë§Œ ì ‘ì†ê°€ëŠ¥í•œ pium ì´ë¼ëŠ” ìœ ì € ìƒì„± \n> CREATE USER 'pium'@'ì ‘ì†í•  ì¸ìŠ¤í„´ìŠ¤ì˜ private ip' IDENTIFIED BY 'password';\n> ```\n\n## ê¶Œí•œ ë¶€ì—¬í•˜ê¸°\n\nMySQLì—ì„œ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì€ ì•„ë˜ì™€ ê°™ë‹¤.\n\n| ê¶Œí•œ                | ë‚´ìš©                     |\n|-------------------|------------------------|\n| CREATE, ALTER, DROP | í…Œì´ë¸” ìƒì„±, ë³€ê²½, ì‚­ì œ  |\n| SELECT, INSERT, UPDATE, DELETE | í…Œì´ë¸”ì˜ ë ˆì½”ë“œ ì¡°íšŒ, ì…ë ¥, ìˆ˜ì •, ì‚­ì œ |\n| RELOAD| ê¶Œí•œ ë¶€ì—¬ëœ ë‚´ìš©ì„ ë¦¬ë¡œë“œ |\n| SHUTDOWN| ì„œë²„ ì¢…ë£Œ ì‘ì—… ì‹¤í–‰ |\n| ALL| ëª¨ë“  ê¶Œí•œ í—ˆìš© |\n| USAGE| ê¶Œí•œ ì—†ì´ ê³„ì •ë§Œ ìƒì„± |\n\nìš°ë¦¬ëŠ” `INSERT`, `UPDATE`, `SELECT`, `DELETE`ë§Œ ì‚¬ìš©í•˜ë©´ ë˜ê¸° ë–„ë¬¸ì—, ìƒˆë¡œ ìƒì„±í•œ ìœ ì €ì—ê²Œ í•´ë‹¹ ê¶Œí•œë§Œ ë¶€ì—¬í•œë‹¤.\n\n```sql\nGRANT SELECT, INSERT, UPDATE, DELETE ON pium_db.* TO 'pium'@'localhost';\n```\n\nì„¤ì •í•œ ê¶Œí•œì„ `flush` ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ ì ìš©í•œë‹¤.\n\n```sql\nFLUSH PRIVILEGES;\n```\n\n## í™•ì¸í•˜ê¸°\n\n![](.index_images/bd8e631c.png)\n\nì‹¤ì œë¡œ ìƒì„±ëœ ìœ ì €ë¡œ ì ‘ì†í•˜ì—¬ Drop Table ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í–ˆì„ ë•Œ ê¶Œí•œ ë¶€ì¡±ìœ¼ë¡œ ìˆ˜í–‰ë˜ì§€ ì•ŠìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n## Application properties ì ìš©\n\nApplicationì˜ ì„¤ì •íŒŒì¼ì— ìƒì„±í•œ ìœ ì €ì˜ ì •ë³´ë¥¼ ì‘ì„±í•œë‹¤.\n\n![](.index_images/54161808.png)\n\nì´ë¥¼ í†µí•´ Applicaitonì—ì„œëŠ” Tableì˜ ìƒì„±, ìˆ˜ì •, ì‚­ì œì— ëŒ€í•œ ì¡°ì‘ì„ í•  ìˆ˜ ì—†ê²Œ ë˜ì—ˆë‹¤.\n\në§Œì•½ í…Œì´ë¸”ì˜ ìƒì„±, ìˆ˜ì •, ì‚­ì œì— ëŒ€í•œ ì‘ì—…ì´ í•„ìš”í•  ê²½ìš° DBA í˜¹ì€ DB ë‹´ë‹¹ìì—ê²Œ ìš”ì²­í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ê±°ì³ì•¼ë§Œ í•œë‹¤.\n\n## Reference\n\n- Chat GTP 4\n- í”¼ì›€ ë°±ì—”ë“œ íŒ€ì˜ ì§‘ë‹¨ì§€ì„±\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì£¼ë…¸'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì„œë¡  í˜„ì¬ í”¼ì›€íŒ€ì˜ ì  í‚¨ìŠ¤ì—ì„œ ë¹Œë“œ íŠ¸ë¦¬ê±°ë¡œ ì„ ì‚¬ìš©í•˜ê³ ìˆë‹¤.  í•´ë‹¹ ì„¤ì •ì€ Githubì—ì„œ ìœ ë°œë˜ëŠ” ëª¨ë“  WebHookì— ëŒ€í•´ ë¹Œë“œ íŠ¸ë¦¬ê±°ê°€ ë™ì‘í•˜ëŠ” ì„¤ì •ì´ë‹¤.  ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ìœ„ì²˜ëŸ¼ triggers ì„¤ì •ì„ ë³„ë„ë¡œ ì§€ì •í•  ìˆ˜ ìˆì§€ë§Œ í˜„ì¬ í”„ë¡œì íŠ¸ êµ¬ì¡°ìƒ ë” ì„¸ë¶„í™”ëœ ì„¤ì •ì´ í•„ìš”í•œ ìƒíƒœë‹¤.  í˜„ì¬ â€¦","fields":{"slug":"/jenkins-hook-by-label/"},"frontmatter":{"date":"July 25, 2023","title":"PR ë¼ë²¨ë¡œ ì  í‚¨ìŠ¤ ë¹Œë“œìœ ë°œì„ êµ¬ë¶„í•˜ê¸°","tags":["ì  í‚¨ìŠ¤","CI"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì£¼ë…¸](https://github.com/Choi-JJunho)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ì„œë¡ \n\ní˜„ì¬ í”¼ì›€íŒ€ì˜ ì  í‚¨ìŠ¤ì—ì„œ ë¹Œë“œ íŠ¸ë¦¬ê±°ë¡œ `GitHub hook trigger for GITScm polling`ì„ ì‚¬ìš©í•˜ê³ ìˆë‹¤.\n\n![](.index_images/bc288fb6.png)\n\ní•´ë‹¹ ì„¤ì •ì€ Githubì—ì„œ ìœ ë°œë˜ëŠ” ëª¨ë“  WebHookì— ëŒ€í•´ ë¹Œë“œ íŠ¸ë¦¬ê±°ê°€ ë™ì‘í•˜ëŠ” ì„¤ì •ì´ë‹¤.\n\n![](.index_images/c0a90061.png)\n\në¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ìœ„ì²˜ëŸ¼ triggers ì„¤ì •ì„ ë³„ë„ë¡œ ì§€ì •í•  ìˆ˜ ìˆì§€ë§Œ í˜„ì¬ í”„ë¡œì íŠ¸ êµ¬ì¡°ìƒ ë” ì„¸ë¶„í™”ëœ ì„¤ì •ì´ í•„ìš”í•œ ìƒíƒœë‹¤.\n\n![](.index_images/b47bf110.png)\n\ní˜„ì¬ ë ˆí¬ì§€í† ë¦¬ í•˜ë‚˜ì— í”„ë¡ íŠ¸, ë°±ì—”ë“œ ì½”ë“œê°€ ê°™ì´ ê´€ë¦¬ë˜ê³ ìˆë‹¤.\nPRì´ Merge ë˜ì—ˆì„ ë•Œ ê° íŠ¸ë™ë³„ë¡œ ì½”ë“œê°€ ë¹Œë“œ ë° ë°°í¬ë  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•´ì•¼í•œë‹¤.\n\n## ì–´ë–»ê²Œ í• ê¹Œ?\n\ní˜„ì¬ í•˜ë‚˜ì˜ ë ˆí¬ì§€í† ë¦¬ì—ì„œ ë‘ê°œì˜ ì½”ë“œê°€ ê´€ë¦¬ë˜ê³  ìˆê¸° ë–„ë¬¸ì— ë‹¨ìˆœíˆ develop ë¸Œëœì¹˜ì˜ ë³€ê²½ê°ì§€ë¡œëŠ” ì–´ëŠ íŠ¸ë™ì˜ ì‘ì—…ë‚´ìš©ì¸ì§€ êµ¬ë¶„í•˜ê¸°ê°€ ì–´ë µë‹¤.\n\n![](.index_images/88fd7187.png)\n\ní˜„ì¬ í”¼ì›€ì€ ë¼ë²¨ì„ ì´ìš©í•˜ì—¬ íŠ¸ë™ë³„ ì‘ì—…êµ¬ë¶„ì„ í•˜ê³  ìˆë‹¤.\n\nì´ë¥¼ ì´ìš©í•˜ì—¬ ë¼ë²¨ë³„ë¡œ ë¹Œë“œ, ë°°í¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•´ë³´ì.\n\n## Generic Webhook Trigger ì„¤ì¹˜\n\n![](.index_images/82e40c68.png)\n\nGeneric Webhook TriggerëŠ” ì  í‚¨ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ HTTP ìš”ì²­ì„ ìˆ˜ì‹ í•˜ì—¬ JSON, XML í˜•íƒœì˜ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ì—¬ íŠ¸ë¦¬ê±°ë¥¼ ì§€ì •í•  ìˆ˜ ìˆëŠ” í”ŒëŸ¬ê·¸ì¸ì´ë‹¤.\n\nGeneric Webhook Triggerë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹Œë“œ ìœ ë°œ ìƒí™©ì„ êµ¬ë¶„í•´ë³´ì.\n\n![](.index_images/4ff8e063.png)\n\ní”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í–ˆë‹¤ë©´ íŒŒì´í”„ë¼ì¸ì˜ Build Triggers ì„¤ì •ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ íƒ­ì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.\n\n![](.index_images/7b51b24a.png)\n\ní•´ë‹¹ ì„¤ì •ì„ í´ë¦­í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì„¤ëª…ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n`http://JENKINS_URL/generic-webhook-trigger/invoke` ë¡œ ì˜¤ëŠ” ìš”ì²­ì— ëŒ€í•´ íŠ¸ë¦¬ê±°ê°€ ìˆ˜í–‰ëœë‹¤ëŠ” ë§ì´ ì í˜€ì ¸ìˆë‹¤.\n\nìœ„ ì„¤ëª…ì— ë§ì¶° GitHubì—ì„œ WebHook ì„¤ì •ì„ ë³€ê²½í•´ì£¼ì.\n\n> ìœ„ì—ì„œ ì„¤ëª…í•œ íƒ­ì— ëŒ€í•´ì„œëŠ” ì•„ì§ ì €ì¥í•˜ì§€ì•Šê³  ê¹ƒí—ˆë¸Œë¡œ ë„˜ì–´ì™€ì„œ ì§„í–‰í•©ë‹ˆë‹¤.\n>\n> ì  í‚¨ìŠ¤ ì„¤ì •ì€ ì•„ë˜ì—ì„œ ì„¤ëª…í•˜ëŠ” `Github WebHook ì„¤ì •`ì´í›„ ì´ì–´ì„œ ì§„í–‰í•©ë‹ˆë‹¤.\n\n## Github WebHook ì„¤ì •\n\n![](.index_images/eebe67d7.png)\n\n`í”„ë¡œì íŠ¸ ë ˆí¬ì§€í† ë¦¬` -> `Settings` -> `Webhooks íƒ­`ì— ë“¤ì–´ì™€ì„œ ì›¹í›…ì„ ìƒˆë¡œ ë§Œë“¤ì–´ë³´ì.\n\n![](.index_images/19691acb.png)\n\nPayload URLì„ ìœ„ì—ì„œ í™•ì¸í•œ `Generic Webhook Trigger`ì˜ ì„¤ì •ì— ë§ê²Œ ì‘ì„±í•œë‹¤.\n\nê·¸ë¦¬ê³  íŠ¸ë¦¬ê±°ê°€ ë™ì‘í•˜ëŠ” ì´ë²¤íŠ¸ì— ëŒ€í•´ì„œ `Send me everything` ì˜µì…˜ì„ ì²´í¬í•œë‹¤.\n\n![](.index_images/5e2c402b.png)\n\nAdd webhookì„ í•œ ë’¤ ë‹¤ì‹œ ë“±ë¡í•œ ì›¹ í›…ì„ í´ë¦­í•˜ì—¬ `Recent Deliveries` íƒ­ì„ í™•ì¸í•´ë³¸ë‹¤.\n\n![](.index_images/bb813e21.png)\n\në‚´ìš©ì„ ë³´ë©´ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ Payloadì— ë‹¤ì–‘í•œ ì •ë³´ë“¤ì´ ë‹´ê²¨ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n### (ì´í•´í•˜ê¸°) JSONPath ì‚´í´ë³´ê¸°\n\n> í•´ë‹¹ ê³¼ì •ì€ ì›ë¦¬ë¥¼ ì´í•´í•˜ê¸° ìœ„í•œ ê³¼ì •ìœ¼ë¡œ ìˆ˜í–‰í•˜ì§€ ì•Šì•„ë„ ë¬´ê´€í•©ë‹ˆë‹¤.\n\n![](.index_images/4ff6a8c1.png)\n![](.index_images/f6916224.png)\n\nPRê³¼ ì—°ê´€ëœ ìš”ì²­ì´ ë°œìƒí–ˆì„ ë•ŒëŠ” Payloadì— pull_requestì— ëŒ€í•œ ì •ë³´ê°€ ì¶”ê°€ëœë‹¤.\n\n![](.index_images/c301431e.png)\n\nhttps://jsonpath.com ì— ì ‘ì†í•˜ì—¬ í•´ë‹¹ Payloadë¥¼ ë¶™ì—¬ë„£ì–´ í™•ì¸í•´ë³¸ë‹¤.\n\nJSONPathë¡œ í‘œí˜„í–ˆì„ ë•Œ `$.pull_request.merged`ë¥¼ í™•ì¸í•˜ë©´ í•´ë‹¹ ìš”ì²­ì´ PRì´ mergeëœ ìš”ì²­ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n![](.index_images/0d6d400d.png)\n\n`$.pull_request.base.ref`ëŠ” í•´ë‹¹ PRì˜ base ë¸Œëœì¹˜ë¥¼ ì˜ë¯¸í•œë‹¤.\n\nì˜ˆë¥¼ë“¤ì–´ feature -> develop í˜•íƒœë¼ë©´ developì´ ë‚˜ì˜¨ë‹¤\n\n![](.index_images/47afaad7.png)\n\n`$.pull_request.labels..name`ëŠ” í•´ë‹¹ PRì˜ ë¼ë²¨ë“¤ì˜ ì´ë¦„ì„ ì˜ë¯¸í•œë‹¤.\n\n## Generic Webhook Trigger ì„¤ì •\n\n> ![](.index_images/5b94c679.png)\níŒŒì´í”„ë¼ì¸ ì„¤ì • êµ¬ì„±ì— ë“¤ì–´ì™€ì„œ ì‘ì—…ì„ ì´ì–´ë‚˜ê°‘ë‹ˆë‹¤.\n\n![](.index_images/f9141614.png)\n\nê¸°ì¡´ì— ì„¤ì •í•´ë‘” `GitHub hook trigger for GITScm polling` ì„¤ì •ì„ í•´ì œí•œë‹¤.\n\n![](.index_images/40676eae.png)\n\nê·¸ë¦¬ê³  Generic WebHook Trigger ë¥¼ í™œì„±í™”í•œë‹¤.\n\n### Post content parameters ì„¤ì •\n\n`Post content parameters`ì˜ ì¶”ê°€ ë²„íŠ¼ì„ ëˆŒëŸ¬ íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•œë‹¤.\n\n![](.index_images/f66fbb52.png)\n\n`$.pull_request.merged`ë¥¼ ë“±ë¡í•˜ì—¬ Merge ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ê°€ì ¸ì˜¨ë‹¤.\n\n![](.index_images/2f09a4a8.png)\n\n`$.pull_request.base.ref`ë¥¼ ë“±ë¡í•˜ì—¬ base ë¸Œëœì¹˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤.\n\nì›í•˜ëŠ” ê°’ì€ develop ë¸Œëœì¹˜ê°€ ë  ê²ƒì´ë‹¤.\n\n![](.index_images/d7a4b4fc.png)\n\n`$.pull_request.labels..name`ë¥¼ ë“±ë¡í•˜ì—¬ ë¼ë²¨ë“¤ì˜ ì´ë¦„ì„ ê°€ì ¸ì˜¨ë‹¤.\n\nì›í•˜ëŠ” ê°’ì€ ë“±ë¡ëœ ë¼ë²¨ë“¤ ì¤‘ì— `ë°±ì—”ë“œ`ë¥¼ í¬í•¨í•˜ëŠ” ê°’ì´ ì¡´ì¬í•˜ëŠ” ìƒí™©ì´ ë  ê²ƒì´ë‹¤.\n\n### Optional filter ì„¤ì •\n\nì•„ë˜ë¡œ ë‚´ë¦¬ë‹¤ë³´ë©´ Optional filter íƒ­ì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n![](.index_images/3f3d0f71.png)\n\nExpressionì— ë‹¤ìŒê³¼ ê°™ì€ ì •ê·œí‘œí˜„ì‹ì„ ì‘ì„±í–ˆë‹¤.\n\n`(?=.*true)(?=.*develop)(?=.*ë°±ì—”ë“œ).*`\n\në˜í•œ Text ë¶€ë¶„ì—ëŠ” ìœ„ì—ì„œ íŒŒë¼ë¯¸í„°ë¡œ ì„ ì–¸í•œ ê°’ë“¤ì„ ì‚¬ìš©í–ˆë‹¤.\n\nìœ„ í‘œí˜„ì‹ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ íš¨ê³¼ë¥¼ ê¸°ëŒ€í•  ìˆ˜ ìˆë‹¤.\n\n`mergeê°€ true ì´ê³ `, `ë¸Œëœì¹˜ê°€ develop ì´ê³ `, `ë¼ë²¨ì— ë°±ì—”ë“œê°€ ì¡´ì¬`í•˜ëŠ” ì‘ì—…ì— ëŒ€í•´ íŠ¸ë¦¬ê±°ë¥¼ ìˆ˜í–‰í•˜ëŠ”ê²ƒì„ ê¸°ëŒ€í•  ìˆ˜ ìˆë‹¤.\n\n### Token ì„¤ì •\n\n![](.index_images/b55101b4.png)\n\nToken íƒ­ì— í† í° ì´ë¦„ì„ ì‘ì„±í•œë‹¤.\n\n![](.index_images/8e4baf8e.png)\n\nì´ ë•Œ GitHub WebHook ì„¤ì •ì— ë“¤ì–´ê°€ì„œ Payload URLì— token íŒŒë¼ë¯¸í„°ë¥¼ í¬í•¨í•˜ë„ë¡ ìˆ˜ì •í•œë‹¤.\n\n![](.index_images/675ca490.png)\n\në°”ë¡œ ì•„ë˜ íƒ­ì—ì„œ TokenCredentialì— í† í°ì— ëŒ€í•œ Secret Keyë¥¼ ì¶”ê°€í•´ì¤˜ì•¼í•œë‹¤.\n\nì™¸ë¶€ì—ì„œ ë¹Œë“œë¥¼ ìœ ë°œí•˜ê¸° ìœ„í•´ì„œëŠ” tokenì„ í™•ì¸í•˜ëŠ” ë°©ì‹ì´ ì¡´ì¬í•˜ëŠ”ë° ì´ ë•Œ Jenkinsì˜ Credentialì— ìˆëŠ” ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤.\n\n> tokenì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° ê³„ì •ì •ë³´ë¥¼ ì…ë ¥í•  ìˆ˜ë„ ìˆì§€ë§Œ í•´ë‹¹ ê³¼ì •ì—ì„œëŠ” tokenì„ ë“±ë¡í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n![](.index_images/639919be.png)\n\nìœ„ì™€ ê°™ì€ ì •ë³´ë¡œ Secret textë¥¼ ì‘ì„±í•˜ê³  ë“±ë¡í•˜ê³  ì ìš©í•œë‹¤.\n\n## ì‘ë‹µ í™•ì¸í•˜ê¸°\n\n![](.index_images/8f20f94d.png)\n\nGitHubì˜ WebHook íƒ­ì˜ Recent Deliveries íƒ­ìœ¼ë¡œ ê°€ì„œ í™•ì¸í•´ë³´ë©´ Response Bodyê°’ì— ë‹¤ìŒê³¼ ê°™ì€ ì‘ë‹µì´ ë‹´ê²¨ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n```json\n{\n  \"jobs\": {\n    \"pium-dev\": {\n      \"regexpFilterExpression\": \"(?=.*true)(?=.*develop)(?=.*ë°±ì—”ë“œ).*\",\n      \"triggered\": true,\n      \"resolvedVariables\": {\n        \"BRANCH\": \"develop\",\n        \"LABELS\": \"[\\\"?ï¸ \\\\bë¦¬íŒ©í„°ë§\\\",\\\"? ë°±ì—”ë“œ\\\"]\",\n        \"LABELS_0\": \"?ï¸ \\bë¦¬íŒ©í„°ë§\",\n        \"LABELS_1\": \"? ë°±ì—”ë“œ\",\n        \"MERGED\": \"true\"\n      },\n      \"regexpFilterText\": \"true develop [\\\"?ï¸ \\\\bë¦¬íŒ©í„°ë§\\\",\\\"? ë°±ì—”ë“œ\\\"]\",\n      \"id\": 248,\n      \"url\": \"queue/item/248/\"\n    }\n  },\n  \"message\": \"Triggered jobs.\"\n}\n```\n\n`regexpFilterText`ì— ì›í•˜ëŠ” ê°’ì´ ì˜ ë“¤ì–´ê°„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n## ê²°ë¡ \n\nì  í‚¨ìŠ¤ì˜ `Generic Webhook Trigger` í”ŒëŸ¬ê·¸ì¸ì„ ì´ìš©í•˜ì—¬ Merge ì—¬ë¶€, target branch, label ê°’ì„ ë¹„êµí•˜ê³  ë¹Œë“œë¥¼ ìœ ë°œí•˜ëŠ” ì„¤ì •ì„ í–ˆë‹¤.\n\nê²½ìš°ì— ë”°ë¼ ì„¸ë¶€ì ì¸ ê²€ì¦ì„ ì¶”ê°€í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.\n\n### íŠ¸ëŸ¬ë¸” ìŠˆíŒ…\n\nGeneric Webhook Trigger ì„¤ì • - Token ì„¤ì •ì—ì„œ ë§ì´ í—¤ë§¸ë‹¤.\n\n![](.index_images/1c588600.png)\n\n`{\"jobs\":null,\"message\":\"Did not find any jobs with GenericTrigger configured! If you are using a token, you need to pass it like ...trigger/invoke?token=TOKENHERE. If you are not using a token, you need to authenticate like http://user:passsword@example.org/generic-webhook... \"}`\n\n404 ì—ëŸ¬ì™€ í•¨ê»˜ ìœ„ ë©”ì‹œì§€ê°€ ë°˜í™˜ë˜ì—ˆëŠ”ë° Jenkinsì˜ Tokenì— ëŒ€í•´ ì´í•´ë¥¼ í•˜ì§€ ëª»í•´ ìƒê¸´ ë¬¸ì œì˜€ë‹¤.\n\n> ì™œ ë‹¤ë“¤ Tokenì´ ë­”ì§€ëŠ” ì„¤ëª…ì„ ì•ˆí•´ì£¼ëŠ”ê±°ì§€..?? ã… ã… \n>\n> `ì™¸ë¶€ì—ì„œ ë¹Œë“œë¥¼ ìœ ë°œí•˜ê¸° ìœ„í•´ì„œëŠ” tokenì„ í™•ì¸í•˜ëŠ”ë° ì´ ë•Œ Jenkinsì˜ Credentialì— ìˆëŠ” ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤.`\n>\n> ì´ í•œë§ˆë””ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ í•˜ë£¨ê°€ ê±¸ë ¸ë‹¤... ğŸ˜‡\n\n## Reference\n\n### ì„¤ì • ê³¼ì •ì—ì„œ ì°¸ê³ í•œ ê¸€\n\n- https://bepoz-study-diary.tistory.com/385\n- https://velog.io/@zayson/Jenkins-CICD-4.-WebHook%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%9E%90%EB%8F%99-%EB%B0%B0%ED%8F%AC\n\n\n### íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ê³¼ì •ì—ì„œ ì°¸ê³ í•œ ê¸€\n\n- https://georgik.rocks/jenkins-generic-webhook-plugin-failed-with-did-not-find-any-jobs-with-generictrigger-configured/\n- https://pikachu987.tistory.com/61"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ê·¸ë ˆì´'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì´ë²ˆ í”¼ì›€ ì„œë¹„ìŠ¤ì—ì„œ CI/CDë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ Jekinsì™€ Github Webhookì„ ì´ìš©í–ˆìŠµë‹ˆë‹¤. ë³¸ ê¸€ì—ì„œëŠ” Jenkinsì™€ Github Webhookì„ ì´ìš©í•œ SpringBoot ì„œë²„ ìë™ ë¹Œë“œ, ìë™ ë°°í¬ ê³¼ì •ì„ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤. Jenkins ì„¤ì¹˜ ê³¼ì •ì€ í”¼ì›€ íŒ€ ì  í‚¨ìŠ¤ ì„¤ì¹˜í•˜ê¸° ë¥¼ ì°¸ê³ í•˜â€¦","fields":{"slug":"/ci-cd-setting/"},"frontmatter":{"date":"July 24, 2023","title":"Jenkinsì™€ Github Webhookì„ ì´ìš©í•´ CI/CD êµ¬ì¶•í•˜ê¸°","tags":["CI/CD","ì  í‚¨ìŠ¤","Webhook","ì„¤ì •"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ê·¸ë ˆì´](https://github.com/Kim0914)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\nì´ë²ˆ í”¼ì›€ ì„œë¹„ìŠ¤ì—ì„œ CI/CDë¥¼ ì ìš©í•˜ê¸° ìœ„í•´ Jekinsì™€ Github Webhookì„ ì´ìš©í–ˆìŠµë‹ˆë‹¤.\n\n\n\në³¸ ê¸€ì—ì„œëŠ” Jenkinsì™€ Github Webhookì„ ì´ìš©í•œ SpringBoot ì„œë²„ ìë™ ë¹Œë“œ, ìë™ ë°°í¬ ê³¼ì •ì„ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.\n\n\n\nJenkins ì„¤ì¹˜ ê³¼ì •ì€ [í”¼ì›€ íŒ€ ì  í‚¨ìŠ¤ ì„¤ì¹˜í•˜ê¸°](https://pium-official.github.io/jenkins-setting/) ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ë©ë‹ˆë‹¤ !\n\n\n\nì‘ì—… í™˜ê²½\n\n- ì¸ìŠ¤í„´ìŠ¤: AWS EC2 t4g.small\n- OS: Ubuntu 22.04.2 LTS\n- RAM: 2GB\n\n\n## Jenkins ì ‘ì†\nì  í‚¨ìŠ¤ë¥¼ ì ‘ì†í•˜ëŠ” ë°©ë²•ì€ ê°„ë‹¨í•©ë‹ˆë‹¤. ì  í‚¨ìŠ¤ë¥¼ ì„¤ì¹˜í•œ ì¸ìŠ¤í„´ìŠ¤ public IPì™€ portë¥¼ ì£¼ì†Œì°½ì— ì…ë ¥í•˜ë©´ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\nì •ìƒì ìœ¼ë¡œ ì ‘ì†í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ í™”ë©´ì„ ë§Œë‚˜ê²Œ ë©ë‹ˆë‹¤.\n![](.index_images/img.png)\n\n---\n## Github Webhook ì„¤ì •\në¨¼ì € Webhookì„ ì„¤ì •í•˜ê¸° ìœ„í•´ í˜„ì¬ í”„ë¡œì íŠ¸ì˜ ê¹ƒí—ˆë¸Œ ë ˆí¬ì§€í† ë¦¬ë¡œ ì´ë™í•©ë‹ˆë‹¤.\n\n\n\në ˆí¬ì§€í† ë¦¬ì˜ Settingsë¥¼ ëˆŒëŸ¬ì„œ ì ‘ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´í›„ ì™¼ìª½ ë©”ë‰´ë°”ì— Webhooksë¥¼ ëˆ„ë¥´ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n![](.index_images/img_1.png)\n\nì˜¤ë¥¸ìª½ ìƒë‹¨ì˜ Add Webhook ë²„íŠ¼ì„ ëˆŒëŸ¬ webhookì„ ì¶”ê°€í•˜ëŠ” í™”ë©´ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.\n\n\n\nê·¸ëŸ¬ë©´ ì•„ë˜ì™€ ê°™ì€ Payload URL, Content Type, Secretì„ ì…ë ¥í•˜ëŠ” í¼ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.\n![](.index_images/img_2.png)\n\n**Payload URL**ì€ ì  í‚¨ìŠ¤ê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” ì„œë²„ì˜ `ë„ë©”ì¸ ì£¼ì†Œ:í¬íŠ¸/github-webhook/` ì„ ì…ë ¥í•©ë‹ˆë‹¤.\n\nì  í‚¨ìŠ¤ì˜ ê¸°ë³¸ í¬íŠ¸ëŠ” 8080ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\nì£¼ì†Œ ë§ˆì§€ë§‰ì— / ëŠ” ê¼­ ë„£ì–´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.\n\n/ë¥¼ ë„£ì§€ ì•Šìœ¼ë©´ redirect URLë¡œ ì¸ì‹í•´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n\n\n**Content-type**ì€ `application/json`ì„ ì„ íƒí•©ë‹ˆë‹¤.\n\n\n\nSecretì€ ë¹„ì›Œë‘ë©´ ë©ë‹ˆë‹¤.\n\n\n\në§ˆì§€ë§‰ìœ¼ë¡œ ì–´ë–¤ ë™ì‘ì—ì„œ webhookì„ ë°œìƒì‹œí‚¬ì§€ ì„ íƒí•˜ë©´ ë©ë‹ˆë‹¤.\n\nì €í¬ íŒ€ì˜ ê²½ìš°ì—ëŠ” **Let me select individual events**ë¥¼ ëˆŒëŸ¬ **push**ì™€ **pull request**ê°€ ë°œìƒí–ˆì„ ë•Œ webhookì´ ë™ì‘í•˜ë„ë¡ ì„ íƒí–ˆìŠµë‹ˆë‹¤.\n\n\n\nëª¨ë“  ì„ íƒì„ ë§ˆì¹œ í›„ **Add webhook ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í† í°ì´ ë°œí–‰**ë©ë‹ˆë‹¤.\n\n\n\ní† í°ì„ ìƒì„±í•  ë•Œ í† í° ê¶Œí•œë„ í•¨ê»˜ ì„¤ì •í•  ìˆ˜ ìˆëŠ”ë°, ì´ ë•Œ repoì™€ admin:repo_hookì„ ì„ íƒí•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.\n\n\n\në§Œì•½ CIë¥¼ í†µí•´ PRì— commentë¥¼ ë‚¨ê¸°ëŠ” ë“±ì˜ writeê°€ í•„ìš”ì—†ëŠ” ê²½ìš°ì—ëŠ” wirte ê¶Œí•œì„ ë¹¼ì¤„ ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.\n\n\n\ní•´ë‹¹ í† í°ì€ ìƒì„± í›„ ì¬ë°œí–‰ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë”°ë¡œ ë³´ê´€ì„ í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\n---\n## Credentials ìƒì„±\në‹¤ì‹œ ì  í‚¨ìŠ¤ í™”ë©´ìœ¼ë¡œ ì´ë™í•´ì„œ Credentialsë¥¼ ë“±ë¡í•˜ì—¬ Github webhookì„ ì—°ë™ ì‹œì¼œì•¼ í•©ë‹ˆë‹¤.\n\n\n\nì  í‚¨ìŠ¤ ë©”ì¸ í™”ë©´ì—ì„œ Jenkins ê´€ë¦¬ í˜ì´ì§€ë¡œ ì ‘ì†í•˜ë©´ Security íƒ­ì— Credentialsë¥¼ ëˆŒëŸ¬ ì ‘ì†í•©ë‹ˆë‹¤.\n![](.index_images/img_3.png)\n\nAdd Credentialsë¥¼ ëˆ„ë¦…ë‹ˆë‹¤.\n![](.index_images/img_4.png)\n\nê·¸ëŸ¬ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\nê¹ƒí—ˆë¸Œ webhookì—ì„œ ë°œê¸‰ë°›ì€ í† í°ì„ ì´ìš©í•´ í¬ë¦¬ë´ì…œ ê°’ì„ ìƒì„±í•©ë‹ˆë‹¤.\n![](.index_images/img_5.png)\n\n**kind**ëŠ” `Username with password`ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.\n\n\n\n**username**ì—ëŠ” ê¹ƒí—ˆë¸Œ í† í°ì„ ë°œê¸‰ë°›ì€ `ê¹ƒí—ˆë¸Œ ì•„ì´ë””`ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.\n\n\n\n**password**ì—ëŠ” `í•´ë‹¹ í† í° ê°’`ì„ ë„£ìœ¼ë©´ ë©ë‹ˆë‹¤.\n\n\n\n**ID**ëŠ” ì  í‚¨ìŠ¤ì—ì„œ ì´ **í¬ë¦¬ë´ì…œì„ ì‹ë³„í•˜ê¸° ìœ„í•œ ì´ë¦„ì´ë¯€ë¡œ í¬ê²Œ ì˜ë¯¸ê°€ ì—†ëŠ” ê°’** ì…ë‹ˆë‹¤.\n\n---\n### Gradle ì„¤ì •\ní˜„ì¬ ìš°ë¦¬ íŒ€ì€ ìŠ¤í”„ë§ ë¶€íŠ¸ ì„œë²„ë¥¼ ë¹Œë“œí•˜ê¸° ë•Œë¬¸ì— gradleì´ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.\n\n\n\nì  í‚¨ìŠ¤ ë©”ì¸ í™”ë©´ì—ì„œ ëŒ€ì‹œë³´ë“œ -> ì  í‚¨ìŠ¤ ê´€ë¦¬ -> Toolsë¥¼ ëˆ„ë¥´ë©´ ì•„ë˜ì™€ ê°™ì€ Gradle ì„¤ì • í™”ë©´ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n![](.index_images/img_6.png)\n\nGradle 8.2.1 ë²„ì „ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.\n\nì¶”ê°€ë¥¼ ì™„ë£Œí•˜ê³  ë°”ë¡œ í˜ì´ì§€ë¥¼ ë‚˜ê°€ë©´ ì•ˆë©ë‹ˆë‹¤.\n\nê°€ì¥ ì•„ë˜ì— ìˆëŠ” íŒŒë€ìƒ‰ save ë²„íŠ¼ì„ ëˆŒëŸ¬ì•¼ í•´ë‹¹ ì„¤ì •ì´ ì €ì¥ë©ë‹ˆë‹¤ !!\n\n\n\nGradle ì„¤ì •ê¹Œì§€ ë§ˆì¹˜ë©´ ë¹Œë“œí•  ì¤€ë¹„ë¥¼ ëª¨ë‘ ë§ˆì³¤ìŠµë‹ˆë‹¤.\n\n\n\nì´ì œ CIë¥¼ ìë™ìœ¼ë¡œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” CI ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.\n\n---\n## CI ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±\në“œë””ì–´ CIë¥¼ ë‹´ë‹¹í•˜ëŠ” ì  í‚¨ìŠ¤ ì•„ì´í…œì„ ìƒì„±í•  ì‹œê°„ì…ë‹ˆë‹¤ !\n\n\n\nëŒ€ì‹œë³´ë“œì—ì„œ New Itemì„ ëˆ„ë¥´ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n![](.index_images/img_7.png)\n\nìƒë‹¨ì— ì•„ì´í…œ ì´ë¦„ì„ ì„¤ì •í•˜ê³  Pipelineì„ êµ¬ì¶•í•  ê²ƒì´ê¸° ë•Œë¬¸ì— Pipelineì„ ì„ íƒí•˜ê³  OKë¥¼ ëˆ„ë¦…ë‹ˆë‹¤.\n\n\n\nì´í›„ ì•„ë˜ì™€ ê°™ì´ ì•„ì´í…œì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ” í™”ë©´ì´ ë‚˜ì˜µë‹ˆë‹¤.\n![](.index_images/img_8.png)\n\nì €í¬ëŠ” ê¹ƒí—ˆë¸Œ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— Github Projectë¥¼ ì²´í¬í•œ í›„ ë ˆí¬ì§€í† ë¦¬ì˜ urlì„ ì…ë ¥í•©ë‹ˆë‹¤.\n\n\n\në‹¤ìŒìœ¼ë¡œ Build Triggerë¥¼ ì„ íƒí•´ì•¼í•˜ëŠ”ë°, Github webhookì„ ì‚¬ìš©í•  ê³„íšì´ë¯€ë¡œ Github hook triger for GITScm pollingì„ ì„ íƒí•©ë‹ˆë‹¤. í•´ë‹¹ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì•„ë˜ì— ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ì¹¸ì´ ë‚˜ì˜µë‹ˆë‹¤.\n![](.index_images/img_9.png)\n\n\n\nScriptì¹¸ì— íŒ€ì—ì„œ í•„ìš”ë¡œ í•˜ëŠ” CI Scriptë¥¼ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.\n\n\n\nì—¬ê¸°ì„œ ì €ì¥ ë²„íŠ¼ ìœ„ì— ë³´ì´ëŠ” Pipeline Syntaxë¥¼ ëˆ„ë¥´ë©´ ê¹ƒí—ˆë¸Œë¥¼ ì´ìš©í•´ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” í™”ë©´ì´ ë‚˜ì˜µë‹ˆë‹¤.\n![](.index_images/img_10.png)\n\nSample Stepì„ Gitìœ¼ë¡œ ì„¤ì •í•œ í›„ ì•„ë˜ì— ê°’ì„ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.\n\n\n\nCredentialsì—ëŠ” ì¢€ ì „ì— ìƒì„±í–ˆë˜ í¬ë¦¬ë´ì…œì„ ì„ íƒí•˜ë©´ ë©ë‹ˆë‹¤. í•´ë‹¹ ì •ë³´ì— í† í° ê°’ì´ ìˆê¸° ë•Œë¬¸ì— ì •í™•í•œ í¬ë¦¬ë´ì…œì„ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤.\n\ní¬ë¦¬ë´ì…œì€ ìƒì„±í•  ë•Œ ì…ë ¥í•œ IDì™€ ë™ì¼í•˜ê²Œ ë³´ì—¬ì§‘ë‹ˆë‹¤.\n\n\n\nëª¨ë‘ ì…ë ¥í–ˆë‹¤ë©´ Generate Pipeline Scriptë¥¼ ëˆŒëŸ¬ ì™„ì„±ëœ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n\n\n\ní•´ë‹¹ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“œëŠ” ì´ìœ ëŠ” ë¹Œë“œ ê³¼ì •ì—ì„œ Github ì €ì¥ì†Œì—ì„œ ì €ì¥ì†Œë¥¼ ë³µì œí•´ì•¼í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\nê·¸ëŸ¬ë¯€ë¡œ ì €ì¥ì†Œì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì´ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.\n\n\n\nì „ì²´ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.\n\n```shell\npipeline {\n    agent any\n    tools {\n        gradle 'gradle'\n    }\n    triggers {\n        githubPush()\n    }\n    stages {\n        stage('ì €ì¥ì†Œ ë³µì œ') {\n            steps {\n                // ì—¬ê¸°ì„œ ë°©ê¸ˆ ìƒì„±ëœ ê¹ƒí—ˆë¸Œ ìŠ¤í¬ë¦½íŠ¸ ë„£ê¸°\n        }\n        \n        stage('ë¹Œë“œ') {\n            steps {\n                sh '''\n                cd backend/pium\n                ./gradlew clean build\n                '''\n            }\n            post {\n                failure {\n                    slackSend (\n                        channel: '#ì•Œë¦¼-ì  í‚¨ìŠ¤',\n                        color: '#FF0000',\n                        message: \"ë°±ì—”ë“œ Build ì‹¤íŒ¨...ğŸ˜¢\"\n                    )\n                }\n            }\n        }\n    }\n}\n```\n\n\nstagesì—ì„œ ê¹ƒí—ˆë¸Œ ì €ì¥ì†Œì— ìˆëŠ” í”„ë¡œì íŠ¸ë¥¼ ê°€ì ¸ì˜¨ í›„, ë³¸ì¸ì˜ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•´ buildë¥¼ ì§„í–‰í•˜ë„ë¡ í•˜ë©´ ë©ë‹ˆë‹¤.\n\në””ë ‰í† ë¦¬ë¥¼ ì˜®ê¸°ëŠ” ë¶€ë¶„ì—ì„œ ëª‡ ë²ˆ ì—ëŸ¬ê°€ ìˆì—ˆëŠ”ë°, Jenkins ëŒ€ì‹œë³´ë“œì˜ Console Outputì„ ì´ìš©í•´ ë””ë²„ê¹…í•˜ë©´ì„œ ìˆ˜ì •í•´ë‚˜ê°€ë©´ ì‰½ê²Œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\nì§€ê¸ˆê¹Œì§€ ì˜¬ë°”ë¥´ê²Œ ì ìš©ë˜ì—ˆë‹¤ë©´ CI ì„¤ì •ì€ ëª¨ë‘ ì •ìƒì ìœ¼ë¡œ ë§ˆì³¤ìŠµë‹ˆë‹¤.\n\n\n\në‹¤ìŒìœ¼ë¡œ CD(ìë™ ë°°í¬) ì„¤ì • ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\n\n---\n## SSH Agent ì„¤ì¹˜\ní˜„ì¬ ë¹Œë“œ ì„œë²„ì™€ ìš´ì˜ ì„œë²„ê°€ ì„œë¡œ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, ì  í‚¨ìŠ¤ ë¹Œë“œ ì„œë²„ì—ì„œ ë¹Œë“œí•œ íŒŒì¼ì„ ìš´ì˜ì„œë²„ë¡œ ì „ë‹¬í•´ì•¼\n\ní•©ë‹ˆë‹¤. ì´ë•Œ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ë¡œì˜ ì ‘ì†ì´ í•„ìš”í•˜ë¯€ë¡œ SSH ì—°ê²° ì„¤ì •ì„ í•´ì•¼ í•©ë‹ˆë‹¤.\n\n\n\nê¸°ì¡´ì˜ ë¸”ë¡œê·¸ë‚˜ ì—¬ëŸ¬ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¾ì•„ë³´ë©´ Publish Over SSHë¥¼ ë§ì´ ì‚¬ìš©í•˜ëŠ”ë°, í˜„ì¬ ì ‘ì† ë¶ˆê°€ ì´ìŠˆê°€ ìˆìŠµë‹ˆë‹¤.\n\nê·¸ëŸ¬ë¯€ë¡œ SSH Agentë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.\n\n\n\nJenkins ê´€ë¦¬ì˜ Plugin íƒ­ì„ ë“¤ì–´ê°€ì„œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\nJenkinsë„ í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ ë™ì‘í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ìš´ì˜ì„œë²„ë¡œ ì ‘ì†í•˜ê¸° ìœ„í•œ pem í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.\n\n\n\nëŒ€ì‹œë³´ë“œ -> ì  í‚¨ìŠ¤ ê´€ë¦¬ -> Credentials ë¡œ ì´ë™í•©ë‹ˆë‹¤.\n\n\n\nê¹ƒí—ˆë¸Œ í¬ë¦¬ë´ì…œì„ ìƒì„±í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ pem í‚¤ë¥¼ í¬ë¦¬ë´ì…œë¡œ ì„¤ì •í•©ë‹ˆë‹¤.\n![](.index_images/img_11.png)\n\n**kind**ëŠ” `SSH Username with private key`ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.\n\n\n\n**id**ëŠ” ê¹ƒí—ˆë¸Œ í¬ë¦¬ë´ì…œê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì‹ë³„ìì´ê¸° ë•Œë¬¸ì— `ì›í•˜ëŠ” ê°’ì„` ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.\n\n\n\n**username**ì€ ì¸ìŠ¤í„´ìŠ¤ì˜ HostName ex) ubuntu@123-345-678-23ì˜ `ubuntu` ë¥¼ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.\n\n\n\në§ˆì§€ë§‰ìœ¼ë¡œ **ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ë©´ì„œ ë°›ì•˜ë˜ pem í‚¤ë¥¼ Add ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¶”ê°€**í•©ë‹ˆë‹¤.\n\npem í‚¤ì— ìˆëŠ” ëª¨ë“  ë‚´ìš©(Begin, End í¬í•¨)ì„ ë‹¤ ë³µì‚¬í•´ì„œ ë„£ì–´ì•¼í•©ë‹ˆë‹¤.\n\n---\n## CD ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±\nì´ì œ ì  í‚¨ìŠ¤ê°€ ì„¤ì¹˜ëœ ì„œë²„ì—ì„œ ë¹Œë“œëœ ê²°ê³¼ë¬¼ì„ ìš´ì˜ ì„œë²„ë¡œ ì „ë‹¬í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì´ë•Œ scp ë¼ëŠ” í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ì„ ì „ë‹¬í•©ë‹ˆë‹¤.\n\n\n\nì €í¬ íŒ€ì´ ì‚¬ìš©í•œ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.\n\në¹Œë“œ ì„±ê³µ ìœ ë®¤, ë°°í¬ ì„±ê³µ ìœ ë¬´ë¥¼ ìŠ¬ë™ê³¼ ì—°ë™í•´ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤ !\n\n```shell\npipeline {\n    agent any\n    tools {\n        gradle 'gradle'\n    }\n    triggers {\n        githubPush()\n    }\n    stages {\n        stage('ì €ì¥ì†Œ ë³µì œ') {\n            steps {\n                // ê¹ƒí—ˆë¸Œ í¬ë¦¬ë´ì…œ\n            }\n        }\n        \n        stage('ë¹Œë“œ') {\n            steps {\n                sh '''\n                cd //í”„ë¡œì íŠ¸ ìœ„ì¹˜\n                ./gradlew clean build\n                '''\n            }\n            post {\n                failure {\n                    slackSend (\n                        channel: '#ì•Œë¦¼-ì  í‚¨ìŠ¤',\n                        color: '#FF0000',\n                        message: \"ë°±ì—”ë“œ Build ì‹¤íŒ¨...ğŸ˜¢\"\n                    )\n                }\n            }\n        }\n        stage('ë°°í¬') {\n            steps {\n                sshagent(credentials: ['pem í‚¤ë¡œ ìƒì„±í•œ í¬ë¦¬ë´ì…œ ID']) {\n                    sh '''\n                        cd //í”„ë¡œì íŠ¸ ìœ„ì¹˜\n                        \n                        ssh -o StrictHostKeyChecking=no {HostName}@{Private IP} uptime\n                        cd build/libs\n                        \n                        scp {ë¹Œë“œëœ Jar íŒŒì¼ëª…} {HostName}@{Private IP}:/home/ubuntu\n                        ssh -t {HostName}@{Private IP} {ìš´ì˜ì„œë²„ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼}\n                    '''\n                }\n            }\n            post {\n                success {\n                    slackSend (\n                        channel: '#ì•Œë¦¼-ì  í‚¨ìŠ¤',\n                        color: '#00FF00',\n                        message: \"ë°±ì—”ë“œ ë°°í¬ ì„±ê³µ! ğŸš€\"\n                    )\n                }\n                failure {\n                    slackSend (\n                        channel: '#ì•Œë¦¼-ì  í‚¨ìŠ¤',\n                        color: '#FF0000',\n                        message: \"ë°±ì—”ë“œ ë°°í¬ ì‹¤íŒ¨ ğŸ¥²\"\n                    )\n                }\n            }\n        }\n    }\n}\n```\n\n\nCI/CD ì„¤ì •ì„ ëª¨ë‘ ë§ˆì¹œ í›„ ê¹ƒí—ˆë¸Œ í”„ë¡œì íŠ¸ì— push, pull requestì™€ ê°™ì€ triggerê°€ ë°œìƒí•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ë¹Œë“œ ê²°ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n![](.index_images/img_12.png)\n\n### Reference\n- [ë² ë² ì˜ CI/CD ê¸€](https://developer-nyong.tistory.com/47#article-7-1--ssh-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98)\n"},{"excerpt":"ì´ ê¸€ì€ ìš°ì•„í•œí…Œí¬ì½”ìŠ¤ 5ê¸°, í”¼ì›€íŒ€ í¬ë£¨ 'ì°¸ìƒˆ'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì„œë¡   í”¼ì›€ì˜ í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” ì„œë²„ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•´ Tanstack Queryë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ í•˜ì˜€ë‹¤. ì´ ê¸€ì—ì„œëŠ” ë§ê³  ë§ì€ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¤‘ Tanstack Queryë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í•œ ì´ìœ ë¥¼ ì†Œê°œí•˜ê³ ì í•œë‹¤. ì„¤ì¹˜í•œ ë²„ì „: 5.0.0-alpha.86 Tanstack queryâ€¦","fields":{"slug":"/fe-tanstack-query/"},"frontmatter":{"date":"July 23, 2023","title":"í”„ë¡ íŠ¸ì—”ë“œ: Tanstack Query ì‚¬ìš©ì— ëŒ€í•˜ì—¬","tags":["Tanstack Query","React Query","ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°ì•„í•œí…Œí¬ì½”ìŠ¤ 5ê¸°, í”¼ì›€íŒ€ í¬ë£¨ '[ì°¸ìƒˆ](https://github.com/WaiNaat)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n \n\n## ì„œë¡ \n\n![Tanstack: High-quality open-source software for web developers. Headless, type-safe, and powerful utilities for state management, routing, data visualization, charts, tables, and more.](.index_images/tanstack.png)\n\ní”¼ì›€ì˜ í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” ì„œë²„ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•´ [Tanstack Query](https://tanstack.com/query/v5/docs/react/overview)ë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ í•˜ì˜€ë‹¤.\n\nì´ ê¸€ì—ì„œëŠ” ë§ê³  ë§ì€ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¤‘ Tanstack Queryë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í•œ ì´ìœ ë¥¼ ì†Œê°œí•˜ê³ ì í•œë‹¤.\n\n> ì„¤ì¹˜í•œ ë²„ì „: 5.0.0-alpha.86\n\n## Tanstack queryë¡œ ì–»ì„ ìˆ˜ ìˆëŠ” ê°œë°œì ì¸ ì´ì \n\n### ì½”ë“œ ê°„ì†Œí™”ì™€ ì»´í¬ë„ŒíŠ¸ì˜ ê´€ì‹¬ì‚¬ ë¶„ë¦¬\n\nTanstack queryì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ í•¨ìˆ˜ë“¤ì„ í™œìš©í•˜ë©´ ë¹„ë™ê¸° í†µì‹ ì˜ ì²˜ë¦¬ ì½”ë“œë¥¼ ì„ ì–¸í˜•ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ë˜í•œ Tanstack queryê°€ ì„œë²„ì™€ì˜ í†µì‹ ì„ ëŒ€ì‹ í•´ì£¼ê¸° ë•Œë¬¸ì— ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ í•¨ìˆ˜ëŠ” UI/UXì˜ êµ¬í˜„ì´ë¼ëŠ” ë³´ë‹¤ ê·¼ë³¸ì ì¸ ë‚´ìš©ì— ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤. ì¡°ê¸ˆ ë” í’€ì–´ì„œ ì„¤ëª…í•˜ë©´ ë„¤ ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.\n\nìš°ì„  `<Suspense>`ì™€ `<ErrorBoundary>`ì˜ í¸í•œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. ì´ ë‘˜ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ê°ê° promise ë˜ëŠ” errorë¥¼ throwí•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ë‹¤. íŠ¹íˆ errorê°€ ì•„ë‹Œ ê²ƒì„ ë˜ì§„ë‹¤ëŠ” ìƒê°ì€ ê¸°ì¡´ì˜ í‹€ì„ ê¹¨ëŠ” ê²ƒìœ¼ë¡œ (eslintì— [ê´€ë ¨ ì„¤ì •](https://eslint.org/docs/latest/rules/no-throw-literal)ì´ ìˆë‹¤ëŠ” ì ìœ¼ë¡œ ë¯¸ë£¨ì–´ ë³¼ ë•Œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ê¸°ë²•ì´ ì•„ë‹ˆì—ˆì„ ê²ƒì´ë‹¤) ìƒˆë¡œìš´ ì½”ë“œë¥¼ ì§œì•¼ í•œë‹¤. [Suspenseë¥¼ ì„¤ëª…í•˜ëŠ” ë¦¬ì•¡íŠ¸ ê³µì‹ ë¬¸ì„œ](https://react.dev/reference/react/Suspense#displaying-a-fallback-while-content-is-loading)ì˜ ì²« ë²ˆì§¸ ì˜ˆì œì—ì„œ Forkë¥¼ ëˆŒëŸ¬ `Albums.js`ì•ˆì˜ `use()`í•¨ìˆ˜ë¥¼ ë³´ë©´ promiseë¥¼ ë˜ì§€ê¸° ìœ„í•´ êµ‰ì¥íˆ ì¬ë¯¸ìˆëŠ” ê¸°ë²•ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ì¼ë ¨ì˜ ê³¼ì •ì„ tanstack queryê°€ ëŒ€ì‹ í•˜ê¸° ë•Œë¬¸ì— í¸ë¦¬í•œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.\n\në‹¤ìŒìœ¼ë¡œ ë‚™ê´€ì  ì—…ë°ì´íŠ¸ë¥¼ ì ìš©í•˜ê¸°ì— ìœ ë¦¬í•˜ë‹¤. `useMutation`ì˜ `onSuccess`, `onError`, `onSettled`ì™€ ê°™ì€ ì„¤ì •ì„ ì´ìš©í•˜ë©´ ëœë‹¤.\n\nì„¸ ë²ˆì§¸ë¡œëŠ” ë¹„ë™ê¸° í†µì‹ ì˜ ê²°ê³¼ íƒ€ì…ì„ ìë™ìœ¼ë¡œ ì¶”ë¡ í•´ì¤€ë‹¤ëŠ” ì ì´ë‹¤. ë”°ë¼ì„œ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë¶ˆí•„ìš”í•œ íƒ€ì… ê°€ë“œ ë° ì¶”ë¡ , ê°•ì œ íƒ€ì… ì§€ì •ê³¼ ê°™ì€ í–‰ë™ì„ í•˜ì§€ ì•Šì•„ë„ ë˜ë¯€ë¡œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë” ê¹”ë”í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\në§ˆì§€ë§‰ìœ¼ë¡œ ì„œë²„ ìƒíƒœ ì²˜ë¦¬ë¥¼ ìœ„í•œ ì „ì—­ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë„ì…í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. ë¬¼ë¡  ì´ê±´ ë¹„ë‹¨ tanstack queryë§Œì˜ ì¥ì ì€ ì•„ë‹ˆë‹¤. í•˜ì§€ë§Œ ìºì‹±ì„ ì´ìš©í•´ì„œ ì „ì—­ ìƒíƒœë¥¼ ì´ìš©í•˜ì§€ ì•Šê³ ë„ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°™ì€ ì¿¼ë¦¬ë¥¼ ìš”ì²­í–ˆì„ ê²½ìš° ì¶”ê°€ì ì¸ í†µì‹  ì—†ì´ë„ ì •ë³´ë¥¼ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆë‹¤ëŠ” ì ì€ ë§¤ë ¥ì ì´ë‹¤.\n\n### ë¹„ë™ê¸° í†µì‹ \n\n1. ìºì‹±ì„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ì„œë²„ì™€ì˜ ë¶ˆí•„ìš”í•œ í†µì‹ ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.\n2. ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ ìë™ refetchê°€ ê°€ëŠ¥í•´ì„œ ì›í•œë‹¤ë©´ í•­ìƒ ìµœì‹  ê°’ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.\n3. ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ ê°™ì€ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•  ë•Œ, í•´ë‹¹ ì¿¼ë¦¬ë¡œë¶€í„° ë°˜í™˜ë˜ëŠ” ë°ì´í„°ê°€ ë°”ë€Œì—ˆë‹¤ë©´ ê·¸ ì»´í¬ë„ŒíŠ¸ë“¤ì„ í•œ ë²ˆì— ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë‹¤.\n4. ì¿¼ë¦¬ê°€ ì˜¤ë«ë™ì•ˆ ì‚¬ìš©ë˜ì§€ ì•Šìœ¼ë©´ ê°€ë¹„ì§€ ì»¬ë ‰í„°ë¥¼ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì„œ ì •ë¦¬í•œë‹¤.\n\n## ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ì˜ ë¹„êµ\n\nìš°ë¦¬ íŒ€ì—ì„œëŠ” Recoil ì´ì™¸ì˜ ë‹¤ë¥¸ ì „ì—­ ìƒíƒœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ ì„œë²„ ìƒíƒœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ë³¸ ê²½í—˜ì´ ë§ì€ í¬ë£¨ê°€ ì—†ì–´ì„œ ê°„ë‹¨í•˜ê²Œë§Œ ë¹„êµí•˜ì˜€ë‹¤.\n\n### [SWR](https://github.com/vercel/swr)\n\nNext.js íŒ€ì—ì„œ ë§Œë“  ì„œë²„ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬. ë°ì´í„° ìºì‹±ì´ë¼ëŠ” ì¸¡ë©´ì— ì§‘ì¤‘í–ˆë‹¤. ë”°ë¼ì„œ ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ë¹„êµí–ˆì„ ë•Œ êµ‰ì¥íˆ ê°€ë²¼ìš´ í¸ì— ì†í•œë‹¤.\n\n### [Tanstack Query](https://tanstack.com/query/v5/docs/react)\n\në°ì´í„° ìºì‹±ë¿ë§Œì´ ì•„ë‹ˆë¼ ì—ëŸ¬ ì²˜ë¦¬ë‚˜ ë¬´í•œ ìŠ¤í¬ë¡¤ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤. ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì˜ [`useQuery`](https://tanstack.com/query/v5/docs/react/reference/useQuery)ì™€ SWRì˜ [`useSWR`](https://swr.vercel.app/docs/data-fetching)ì˜ ë°˜í™˜ê°’ì„ í™•ì¸í•´ë³´ì•˜ì„ ë•Œ ë°›ì„ ìˆ˜ ìˆëŠ” ì •ë³´ì˜ ì–‘ì´ ì°¨ì´ê°€ ë§ì´ ë‚œë‹¤. ë‹¤ì–‘í•œ ìƒí™©ì„ ê³ ë ¤í•œ UIë¥¼ ë³´ì—¬ì¤€ë‹¤ë©´ Tanstack queryë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ ì¢‹ê² ë‹¤ëŠ” ìƒê°ì„ í–ˆë‹¤. ì¶”ê°€ì ìœ¼ë¡œ ë°›ì•„ì˜¨ ë°ì´í„°ì˜ ì¼ì°¨ ê°€ê³µì´ í•„ìš”í•˜ë‹¤ë©´ `useQuery`ì—ì„œ `selector`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì ë„ ìƒëŒ€ì ì¸ ì¥ì ì´ë¼ê³  ìƒê°í•œë‹¤.\n\n### Redux, Recoil ë“± ë‹¤ë¥¸ ì „ì—­ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬\n\ní˜„ì¬ í”¼ì›€ ì„œë¹„ìŠ¤ ë‚´ì—ì„œ ì „ì—­ì ìœ¼ë¡œ ê´€ë¦¬í•  ê°’ì´ ë§ì§€ ì•Šë‹¤ê³  íŒë‹¨í•˜ì˜€ë‹¤.\n\në˜í•œ ì¼ë°˜ì ì¸ ì „ì—­ ìƒíƒœ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ê²½ìš° ì„œë²„ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚˜ê¸°ì—ëŠ” ë¶€ì ì ˆí•œ ê²ƒ ê°™ë‹¤. íŠ¹íˆ Recoilì€ selectorì˜ ìºì‹œ ë¬¸ì œë¡œ ì¸í•´ ì‚¬ìš©ìì˜ ì¥ë°”êµ¬ë‹ˆ ëª©ë¡ì²˜ëŸ¼ ìì£¼ ë³€í•˜ëŠ” ê°’ì„ ë°›ì•„ì˜¤ê¸° êµ‰ì¥íˆ í˜ë“¤ì—ˆë˜ ê¸°ì–µì´ ìˆë‹¤.\n\n## Tanstack Queryë¡œ ì‚¬ìš©ìì—ê²Œ ì–´ë–¤ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê³ ì í•˜ëŠ”ì§€\n\nìš°ë¦¬ê°€ ì¶”êµ¬í•´ì•¼ í•˜ëŠ” ê²ƒì€ ê¸°ìˆ ì  ê³ ì ì´ ì•„ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë„ì…í•´ì„œ ì‚¬ìš©ìì—ê²Œ ì–´ë–¤ ê²½í—˜ì„ ì„ ì‚¬í•  ìˆ˜ ìˆì„ì§€ ê³ ë¯¼í•˜ì˜€ë‹¤.\n\n1. Suspense\n    - SuspenseëŠ” ì‚¬ìš©ìì—ê²Œ 'ì§€ê¸ˆ ë¬´ìŠ¨ ì¼ì„ í•˜ëŠ” ì¤‘ì´ë‹¤'ë¼ëŠ” ì•”ì‹œë¥¼ ì¤€ë‹¤. ë”°ë¼ì„œ ì‚¬ìš©ìì˜ ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„ì„ í¸í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.\n    - í”¼ì›€ ì„œë¹„ìŠ¤ì˜ 'ì‹ë¬¼ ì‚¬ì „' ê¸°ëŠ¥ì€ ê³µê³µë°ì´í„°ë¥¼ í™œìš©í•œë‹¤. í˜„ì¬ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê³µê³µë°ì´í„°ì˜ ê²½ìš° ì´ìš©ì— ì œì•½ì´ ì—†ì–´ì„œ DBì— ì €ì¥í•  ìˆ˜ ìˆë‹¤. ë§Œì•½ ê·¸ë ‡ì§€ ì•Šì•„ì„œ í•­ìƒ ë°±ì—”ë“œ ì„œë²„ì—ì„œ ê³µê³µë°ì´í„° APIì™€ì˜ í†µì‹ ì„ ì¶”ê°€ì ìœ¼ë¡œ ì§„í–‰í•´ì•¼ í•  ê²½ìš° ì •ë³´ë¥¼ ë°›ì•„ì˜¤ëŠ” ë° ì‹œê°„ì´ ê±¸ë¦°ë‹¤. ì´ ë•Œ Suspenseë¥¼ ì˜ í™œìš©í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.\n2. Refetch\n    - í”¼ì›€ ì„œë¹„ìŠ¤ëŠ” ëª¨ë°”ì¼ í™˜ê²½ì„ ìš°ì„ ì ìœ¼ë¡œ ê³ ë ¤í•˜ê³  ìˆë‹¤.\n    - ì§€í•˜ì²  ì™€ì´íŒŒì´ì²˜ëŸ¼ ì¸í„°ë„·ì´ ë¶ˆì•ˆì •í•œ ê³³ì—ì„œëŠ” ìš”ì²­ì´ ì˜ ê°€ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. ì´ ë•Œ ì‚¬ìš©ìê°€ ê°™ì€ í–‰ë™ì„ ë‘ ë²ˆ í•˜ì§€ ì•Šë”ë¼ë„ tanstack queryê°€ ìë™ì ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ì„œ UX ì¸¡ë©´ì˜ ê°œì„ ì´ ê°€ëŠ¥í•˜ë‹¤.\n3. caching\n    - 'ì‹ë¬¼ ì‚¬ì „ ì •ë³´'ëŠ” ë³€í•˜ì§€ ì•ŠëŠ” ìë£Œì´ë‹¤. ë”°ë¼ì„œ ì‚¬ìš©ìê°€ ì—¬ëŸ¬ ë²ˆ ìš”ì²­ì„ í•˜ë”ë¼ë„ ë§¤ë²ˆ ê°™ì€ ì •ë³´ë¥¼ ë³´ê²Œ ëœë‹¤. ì´ëŸ¬í•œ ìš”ì²­ì— ëŒ€í•´ì„œëŠ” `staletime`ì„ ê¸¸ê²Œ ì¡ì•„ ìºì‹œë¥¼ ì˜¤ë˜ ìœ ì§€í•œë‹¤ë©´ ë¶ˆí•„ìš”í•œ ì„œë²„ì™€ì˜ í†µì‹ ì„ ì¤„ì´ê³  ì‚¬ìš©ì ê²½í—˜ë„ ê°œì„ í•  ìˆ˜ ìˆë‹¤.\n    - 'ë‚´ê°€ í‚¤ìš°ëŠ” ì‹ë¬¼ ëª©ë¡'ì´ë‚˜ 'ë‚´ê°€ í‚¤ìš°ëŠ” ì‹ë¬¼ì˜ ìƒì„¸ ì •ë³´'ë„ ì‚¬ìš©ìê°€ ê°’ì„ ì¶”ê°€í•˜ê±°ë‚˜ ë°”ê¾¸ì§€ ì•ŠëŠ” ì´ìƒ ë³€í•˜ì§€ ì•ŠëŠ” ê°’ì´ë‹¤. ì´ ì¹œêµ¬ë“¤ë„ ì ì ˆí•œ ìºì‹±ì„ ì‚¬ìš©í•˜ë©´ ì„œë²„ì™€ì˜ í†µì‹ ì„ ì¤„ì—¬ ì‚¬ìš©ìì˜ ëŒ€ê¸°ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.\n4. ë¬´í•œ ìŠ¤í¬ë¡¤\n    - í”¼ì›€ì—ì„œëŠ” ìì‹ ì˜ ì‹ë¬¼ì—ê²Œ ë¬¼ì„ ì¤€ ë‚ ì§œë“¤ì„ ê¸°ì–µí•´ì„œ íƒ€ì„ë¼ì¸ í˜•íƒœë¡œ ë³¼ ìˆ˜ ìˆë„ë¡ ì œê³µí•  ê³„íšì´ë‹¤. íƒ€ì„ë¼ì¸ì€ ì‹œê°„ì˜ íë¦„ì„ ë‚˜íƒ€ë‚´ê¸° ìœ„í•œ ë„êµ¬ì´ë‹¤. 'ì‹œê°„'ê³¼ 'íë¦„' ëª¨ë‘ ì—°ì†ì„±ì„ ë ëŠ” í‘œí˜„ì¸ ë§Œí¼ ë¬´í•œ ìŠ¤í¬ë¡¤ì„ ì´ìš©í•´ ìœ ì˜ë¯¸í•œ ê²½í—˜ì„ ì œê³µí•  ê²ƒì´ë‹¤.\n\n\n### Tanstack Query v5ë¥¼ ì‚¬ìš©í•˜ê²Œ ëœ ì´ìœ \n\në§ˆì§€ë§‰ìœ¼ë¡œ í”¼ì›€ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ Tanstack queryì˜ ë‹¤ì„¯ ë²ˆì§¸ ë©”ì´ì € ë²„ì „ì„ ì‚¬ìš©í•˜ê¸°ë¡œ í•œ ì´ìœ ë¥¼ ì§§ê²Œ ë‚¨ê¸´ë‹¤. Tanstack query v5ëŠ” [íšê¸°ì ì¸ ë³€í™”](https://tanstack.com/query/v5/docs/react/guides/migrating-to-v5)ê°€ ìˆê³ , alpha ë‹¨ê³„ì´ë‹¤.\n\n1. ì–´ì°¨í”¼ ë²„ì „ì€ 5ë¡œ í˜ëŸ¬ê°„ë‹¤. í”¼ì›€ í”„ë¡ íŠ¸ì—”ë“œì˜ ì„¸ í¬ë£¨ ëª¨ë‘ Tanstack queryë¥¼ ì²˜ìŒ ë°°ìš°ëŠ” ë‹¨ê³„ë¼ë©´ êµ³ì´ ì—­ì‚¬ì˜ ë’¤ì•ˆê¸¸ë¡œ í˜ëŸ¬ê°ˆ v4ë¶€í„° ë°°ìš¸ í•„ìš”ëŠ” ì—†ë‹¤ê³  ìƒê°í•œë‹¤.\n2. ë¬¸ì„œë¥¼ ì‚´í´ë³¸ ê²°ê³¼ v5ì˜ 'íšê¸°ì ì¸ ë³€í™”'ëŠ” ëŒ€ë¶€ë¶„ ê¸°ì¡´ì˜ ë¶ˆí•„ìš”í•˜ê±°ë‚˜ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¤ê¸° ì‰¬ìš´ ê¸°ëŠ¥ì„ ì œê±°í•˜ëŠ” ê²ƒì´ì—ˆë‹¤. ë”°ë¼ì„œ ë§Œì•½ v4ë¥¼ í•™ìŠµí•´ì•¼ í•œë‹¤ë©´ ê¸°ì¡´ì˜ v5 ê³µë¶€ ë‚´ìš©ì—ì„œ ë§ë¶™ì´ëŠ” ë°©ë²•ìœ¼ë¡œ ê°€ëŠ¥í•  ê²ƒì´ë‹¤.\n3. í˜„ì¬ í”¼ì›€ ì„œë¹„ìŠ¤ì—ì„œëŠ” ë³µì¡í•œ ì„œë²„ì™€ì˜ ë°ì´í„° í†µì‹ ì€ ì—†ì„ ê²ƒ ê°™ë‹¤. ë”°ë¼ì„œ alpha ë‹¨ê³„ì´ê¸° ë•Œë¬¸ì— ë¬´ì–¸ê°€ê°€ ì•ˆ ë˜ëŠ” ìƒí™©ì€ ì—†ì„ ê²ƒìœ¼ë¡œ ì˜ˆìƒëœë‹¤.\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì£¼ë…¸'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì„œë¡   http://pium.life ë¡œ ì ‘ì†í•˜ë©´ í”¼ì›€ì˜ í™ˆí˜ì´ì§€ê°€ ë‚˜ì˜¤ê¸°ê¹Œì§€ì˜ ê³¼ì •ì„ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê²¨ë³´ë ¤ê³  í•œë‹¤. ë³¸ ê³¼ì •ì€ ì„œë²„ êµ¬ì¶•ì„ ì²˜ìŒ í•˜ë©´ì„œ ê³¼ì •ì„ ì´í•´í•˜ê¸°ìœ„í•´ ì‘ì„±ëœ ê¸€ì…ë‹ˆë‹¤. ë¹ ë¥´ê²Œ ë”°ë¼í•  ìˆ˜ ìˆëŠ” ì„¤ì • ê¸°ë°˜ ê¸€ì„ ì›í•œë‹¤ë©´ ë§ˆì§€ë§‰ ëª©ì°¨ì¸ ì •ë¦¬ë¥¼ í™•ì¸í•´ë³´ì‹œê¸¸ ë°”ëë‹ˆë‹¤. ë³¸ ê³¼ì •ì—ì„œëŠ” ì†ŒëŸ‰ì˜ â€¦","fields":{"slug":"/pium-deploy-step/"},"frontmatter":{"date":"July 18, 2023","title":"í”¼ì›€ì˜ ë°°í¬ê³¼ì •","tags":["ë°°í¬","ì¸í”„ë¼"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì£¼ë…¸](https://github.com/Choi-JJunho)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n \n\n## ì„œë¡ \n\n![](.index_images/3162b98e.png)\n\nhttp://pium.life ë¡œ ì ‘ì†í•˜ë©´ í”¼ì›€ì˜ í™ˆí˜ì´ì§€ê°€ ë‚˜ì˜¤ê¸°ê¹Œì§€ì˜ ê³¼ì •ì„ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê²¨ë³´ë ¤ê³  í•œë‹¤.\n\n> ë³¸ ê³¼ì •ì€ ì„œë²„ êµ¬ì¶•ì„ ì²˜ìŒ í•˜ë©´ì„œ ê³¼ì •ì„ ì´í•´í•˜ê¸°ìœ„í•´ ì‘ì„±ëœ ê¸€ì…ë‹ˆë‹¤.\n> \n> ë¹ ë¥´ê²Œ ë”°ë¼í•  ìˆ˜ ìˆëŠ” ì„¤ì • ê¸°ë°˜ ê¸€ì„ ì›í•œë‹¤ë©´ ë§ˆì§€ë§‰ ëª©ì°¨ì¸ ì •ë¦¬ë¥¼ í™•ì¸í•´ë³´ì‹œê¸¸ ë°”ëë‹ˆë‹¤.\n\n> ë³¸ ê³¼ì •ì—ì„œëŠ” ì†ŒëŸ‰ì˜ ê³¼ê¸ˆ(?)ì´ ì¡´ì¬í•©ë‹ˆë‹¤.\n> (ë„ë©”ì¸ êµ¬ì…ë¹„ìš© : ì•½ 4000ì›)\n\n## ë„ë©”ì¸ ì •í•˜ê¸°\n\n![](.index_images/8e211be2.png)\n\n> ë„ë©”ì¸ì„ êµ¬ì…í•˜ê¸° ìœ„í•´ ë„ë©”ì¸ í˜¸ìŠ¤íŒ… ì‚¬ì´íŠ¸ [ê°€ë¹„ì•„](https://www.gabia.com/)ë¥¼ ì´ìš©í–ˆë‹¤.\n\n`pium.com` `pium.co.kr` `pium.net` ë“±ë“±.\nì„œë¹„ìŠ¤ì˜ ì´ë¦„ìœ¼ë¡œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë„ë©”ì¸ì„ ìƒì„±í•˜ê³ ì‹¶ì—ˆìœ¼ë‚˜ ì´ë¯¸ ì¡´ì¬í•˜ê±°ë‚˜ ê°€ê²©ì´ ë„ˆë¬´ ë¹„ì‹¸ë‹¤ëŠ” ë¬¸ì œê°€ ìˆì—ˆë‹¤.\n\nì ë‹¹í•œ ê°€ê²©ì— ì„œë¹„ìŠ¤ì˜ ì´ë¦„ì„ ê°€ì§„ ë„ë©”ì¸ì¸ `pium.life`ë¥¼ ì„ íƒí–ˆë‹¤. (1ë…„ 4000ì›)\n\n## ë„ë©”ì¸ ì„¤ì •í•˜ê¸°\n\n> ê°€ë¹„ì•„ ì„œë¹„ìŠ¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê³¼ì •ì´ ì§„í–‰ë©ë‹ˆë‹¤.\n\n`3.123.123.123`ê³¼ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ public ip ì£¼ì†Œë¥¼ `pium.life`ë¡œ ë³„ì¹­ì„ ì§€ì •í•´ì£¼ì.\n\n![](.index_images/ce5d100b.png)\n\nìš°ì¸¡ ìƒë‹¨ì˜ `My ê°€ë¹„ì•„` íƒ­ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤.\n\n![](.index_images/48a0d2d6.png)\n\nìš°ì¸¡ì˜ `DNS ê´€ë¦¬íˆ´` íƒ­ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤.\n\n![](.index_images/dbaa42b0.png)\n\në„ë©”ì¸ì˜ `ì„¤ì •` íƒ­ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤.\n\n![](.index_images/0b4d4be0.png)\n\nDNS ê´€ë¦¬ íƒ­ì˜ `ì„¤ì •` í˜¹ì€ `ë ˆì½”ë“œ ìˆ˜ì •`ì— ë“¤ì–´ê°„ë‹¤.\n\n![](.index_images/d830ba27.png)\n\nìœ„ì™€ ê°™ì´ ë ˆì½”ë“œë¥¼ ì¶”ê°€í•˜ê³  ì €ì¥í•œë‹¤.\n\n> CNAME ì„¤ì •ì€ í–¥í›„ ì„œë¸Œë„ë©”ì¸ ì„¤ì •ì„ ìœ„í•œ ì„¤ì •ì…ë‹ˆë‹¤.\n\nì´ì œ http://pium.life ë¡œ ì ‘ì†í•˜ë©´ ì„œë²„ë¡œ ë°”ë¡œ ì ‘ì†í•  ìˆ˜ ìˆê²Œëœë‹¤. (SSH ì ‘ì†ì´ ì•„ë‹Œ HTTP ì ‘ì†ì„ ì˜ë¯¸í•œë‹¤.)\n\n## í™˜ê²½ ì‚´í´ë³´ê¸°\n\ní”¼ì›€ì€ í•˜ë‚˜ì˜ EC2ì— í”„ë¡ íŠ¸ì—”ë“œ, ë°±ì—”ë“œì˜ ë°°í¬ë¥¼ ëª¨ë‘ ì§„í–‰í•˜ë ¤ê³ í•œë‹¤.\n\nì´ë¥¼ ìœ„í•´ì„œë¼ë©´ ì„œë¡œ ë‹¤ë¥¸ í¬íŠ¸ì— ì„œë¹„ìŠ¤ë¥¼ ë„ì›Œë‘” ë’¤ ê° ìš”ì²­ë³„ë¡œ í¬íŠ¸ë¥¼ ë¶„ì‚°ì‹œí‚¬ í•„ìš”ê°€ ìˆë‹¤.\n\n![](.index_images/ee357fa5.png)\n\në•Œë¬¸ì— ìœ„ì™€ ê°™ì€ íë¦„ìœ¼ë¡œ ìš”ì²­ì´ ì§„í–‰ë˜ëŠ” ê²ƒì´ ìµœì¢… ëª©í‘œë‹¤!\n\n### EC2 ë³´ì•ˆê·œì¹™\n\nìš°ì•„í•œí…Œí¬ì½”ìŠ¤ ê³¼ì •ì—ì„œ ì œê³µë˜ëŠ” EC2ì˜ ë³´ì•ˆê·œì¹™ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n- ì‚¬ë‚´ì—ì„œë§Œ 22ë²ˆ í¬íŠ¸ ì ‘ì† ê°€ëŠ¥\n- 80, 443ì€ ì—´ë ¤ìˆìŒ\n- ì´ì™¸ì˜ í¬íŠ¸ëŠ” ì—´ë ¤ìˆì§€ ì•ŠìŒ.\n\nìš°ë¦¬ê°€ í”íˆ ê°œë°œì„ í•˜ë©´ì„œ ì‚¬ìš©í•˜ëŠ” 3000ë²ˆ í¬íŠ¸ í˜¹ì€ 8080ë²ˆ í¬íŠ¸ë¥¼ í†µí•´ í•´ë‹¹ ì„œë²„ì— ì ‘ê·¼í•˜ì§€ ëª»í•œë‹¤ëŠ” ì´ì•¼ê¸°ë‹¤.\n\nì¦‰, ë‹¤ì‹œë§í•´ pium.life:8080ê³¼ ê°™ì€ ì ‘ê·¼ì´ ì•ˆëœë‹¤ëŠ” ì´ì•¼ê¸°ë‹¤.\n\nì¸ë°”ìš´ë“œ ê·œì¹™ì—ì„œ 8080 í˜¹ì€ 3000ë²ˆ í¬íŠ¸ë¥¼ ì—´ì–´ë²„ë¦¬ëŠ” ë°©ë²•ë„ ìˆê² ì§€ë§Œ ë³´ì•ˆ ê·œì¹™ì— ì†ëŒ€ì§€ ì•Šìœ¼ë©´ì„œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ì•„ë³´ì.\n\n## nginxë¡œ í¬íŠ¸í¬ì›Œë”©í•˜ê¸°\n\nlinuxì— ì¡´ì¬í•˜ëŠ” `iptables` ëª…ë ¹ì–´ë¥¼ í†µí•´ ì„œë²„ ìì²´ì ìœ¼ë¡œ í¬íŠ¸í¬ì›Œë”© í™˜ê²½ì„ êµ¬ì„±í•  ìˆ˜ë„ ìˆì§€ë§Œ í˜„ì¬ í”¼ì›€ì€ í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ ë‘ê°œì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ìˆê³ , ë„ë©”ì¸ë„ í•˜ë‚˜ë‹¤.\n\në”°ë¼ì„œ í›„ì— ì„¤ëª…í•  ì„œë¸Œë„ë©”ì¸ì„ ì ìš©í•˜ê¸° ìœ„í•´ì„œë¼ë„ nginxë¥¼ ì´ìš©í•˜ê¸°ë¡œ í•œë‹¤.\n\n### nginx ì„¤ì¹˜í•˜ê¸°\n\n```shell\nsudo apt install nginx\n```\n\n```shell\nsystemctl status nginx\n```\n\n![](.index_images/28e0139a.png)\n\nì´ì œ ì£¼ì†Œì°½ì— ì¸ìŠ¤í„´ìŠ¤ ip ë¥¼ ì¹˜ê³  ì ‘ì†í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ nginx default í˜ì´ì§€ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. \n\n![](.index_images/9345764b.png)\n\n### 80 í¬íŠ¸ ì ‘ì†ì„ 8080 í¬íŠ¸ë¡œ\n\n> í•´ë‹¹ ê³¼ì •ì€ 8080í¬íŠ¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì´ êµ¬ë™ì¤‘ì¸ ìƒíƒœì—ì„œ ì§„í–‰ë©ë‹ˆë‹¤. \n> ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ 8080í¬íŠ¸ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ êµ¬ë™ì¤‘ì¸ì§€ í™•ì¸í•œë‹¤.\n>\n> ```shell\n> lsof -i tcp:8080\n> ```\n> ![](.index_images/1573063d.png)\n\nì´ì œ nginx ì„¤ì •íŒŒì¼ì„ ì‘ì„±í•˜ì—¬ 80í¬íŠ¸ë¡œ ì˜¤ëŠ” ìš”ì²­ì„ 8080í¬íŠ¸ë¡œ ì „í™˜ì‹œì¼œë³¸ë‹¤.\n\n```shell\ncd /etc/nginx/sites-available/\n\nsudo vi default\n```\n\n> ì£¼ì„ì²˜ë¦¬ ë˜ì–´ìˆëŠ” ë¶€ë¶„ì€ ì œì™¸í•˜ê³  ì½”ë“œë¡œ í‘œí˜„í•©ë‹ˆë‹¤.\n\n```shell\n# ë³€ê²½ ì „ íŒŒì¼ë‚´ìš©\nserver {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n\n        root /var/www/html;\n\n        index index.html index.htm index.nginx-debian.html;\n\n        server_name _;\n\n        location / {\n                try_files $uri $uri/ =404;\n        }\n}\n```\n\nì²˜ìŒ íŒŒì¼ì„ ì—´ì–´ë³´ë©´ ìœ„ì™€ê°™ì´ ì„¤ì •ë˜ì–´ìˆì„ ê²ƒì´ë‹¤.\n\nìµœëŒ€í•œ ê°„ëµí•˜ê²Œ í¬íŠ¸ë¥¼ ë³€ê²½í•œë‹¤ëŠ” ëª©ì ë§Œ ë‹¬ì„±í•´ë³´ê¸° ìœ„í•´ ë‹¤ìŒ ë‚´ìš©ë“¤ì„ ìˆ˜ì •í•´ë³´ì.\n\n- `root /var/www/html;` ì£¼ì„ì²˜ë¦¬\n- `index index.html index.htm index.nginx-debian.html;` ì£¼ì„ì²˜ë¦¬\n- `location / { ... }` ë‚´ë¶€ ë‚´ìš©ì— ë‹¤ìŒ ë‚´ìš© ì¶”ê°€\n  - `proxy_set_header Host $host:$server_port;`\n  - `proxy_set_header X-Real-IP $remote_addr;`\n  - `proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;`\n  - `proxy_pass http://127.0.0.1:8080;`\n\n```shell\n# ë³€ê²½ëœ íŒŒì¼ë‚´ìš©\nserver {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n\n        # root /var/www/html;\n\n        # index index.html index.htm index.nginx-debian.html;\n\n        server_name _;\n\n        location / {\n                proxy_set_header Host $host:$server_port;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n                proxy_pass http://127.0.0.1:8080;\n        }\n}\n```\n\nìœ„ì™€ê°™ì´ ì„¤ì •íŒŒì¼ì„ ìˆ˜ì •í–ˆë‹¤ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•´ nginxë¥¼ ë‹¤ì‹œ ì‹œì‘í•œë‹¤.\n\n```shell\nsudo systemctl restart nginx\n```\n\n![](.index_images/232c6d5d.png)\n\nìŠ¤í”„ë§ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰ì¤‘ì´ì˜€ë‹¤ë©´ ìœ„ì™€ê°™ì€ Whitelabel Error Pageë¥¼ í™•ì¸í•  ìˆ˜ ìˆì„ê²ƒì´ë‹¤.\n\n## ì„œë¸Œë„ë©”ì¸ êµ¬ì„±í•˜ê¸°\n\nì´ì œ 80í¬íŠ¸ì—ì„œ 8080í¬íŠ¸ë¡œ ìš”ì²­ì„ ë³€í™˜í•˜ëŠ” ê³¼ì •ì€ ì„±ê³µí–ˆë‹¤.\n\ní•˜ë‚˜ì˜ ì„œë²„ì— í”„ë¡ íŠ¸ì—”ë“œ, ë°±ì—”ë“œ ì½”ë“œê°€ ê°™ì´ ë„ì›Œì ¸ì•¼í•˜ë¯€ë¡œ ì„œë¸Œë„ë©”ì¸ì„ í†µí•´ í˜ì´ì§€ì™€ APIë¥¼ êµ¬ë¶„í•´ì¤˜ì•¼í•œë‹¤.\n\n### index íŒŒì¼ ì§€ì •í•˜ê¸° - default íŒŒì¼ ìˆ˜ì •\n\ní”„ë¡ íŠ¸ì—ì„œ ë¹Œë“œ ì‚°ì¶œë¬¼ë¡œ ë‚˜ì˜¨ index.htmlì„ ê¸°ë³¸ í˜ì´ì§€ë¡œ ì°¸ê³ í•˜ë„ë¡ ì„¤ì •í•˜ì.\n\n```shell\ncd /etc/nginx/sites-available/\n\nsudo vi default\n```\n\n```shell\n# ë³€ê²½ ì „ ì„¤ì •ë‚´ìš©\nserver {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n\n        # root /var/www/html;\n\n        # index index.html index.htm index.nginx-debian.html;\n\n        server_name _;\n\n        location / {\n                proxy_set_header Host $host:$server_port;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n                proxy_pass http://127.0.0.1:8080;\n        }\n}\n```\n\nê¸°ì¡´ì— 80í¬íŠ¸ë¥¼ 8080í¬íŠ¸ë¡œ í¬ì›Œë”©ì‹œì¼œì£¼ëŠ” ì„¤ì •ì„ ë°”ê¿”ì¤€ë‹¤.\n\n```shell\n# ë³€ê²½ í›„ ì„¤ì •ë‚´ìš©\nserver {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n\n        root /var/www/html;\n\n        index index.html;\n\n        server_name pium.life;\n\n        location / {\n        }\n}\n```\n\nì´ì œ pium.lifeë¡œ ì ‘ì†í•˜ë©´ `/var/www/html` ê²½ë¡œì— ìˆëŠ” `index.html`ì„ ì°¸ì¡°í•˜ë„ë¡ ì„¤ì •ë˜ì—ˆë‹¤.\n\nìœ„ ì„¤ì •ì— ë”°ë¥´ë©´ `index.html` ë° `bundle.js`, `assets` ë“±ì˜ í”„ë¡ íŠ¸ ë¦¬ì†ŒìŠ¤ë“¤ì€ ì„œë²„ì˜ `/var/www/html`ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìœ„ì¹˜ì‹œí‚¤ë©´ ëœë‹¤.\n\n> ë¹Œë“œ ì‚°ì¶œë¬¼ ë° CDì™€ ê´€ë ¨ëœ ë‚´ìš©ì€ ë³¸ ê²Œì‹œê¸€ì—ì„œ ë‹¤ë£¨ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n### API ì„œë²„ ì§€ì •í•˜ê¸° - api_config íŒŒì¼ ë§Œë“¤ê¸°\n\nhttp://api.pium.life ë¡œ APIë¥¼ í˜¸ì¶œí•˜ë„ë¡ êµ¬ì„±í•´ë³´ì.\n\nnginxëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `/etc/nginx/sites-enabled` ê²½ë¡œì— ìˆëŠ” íŒŒì¼ë“¤ì„ ì°¸ê³ í•˜ì—¬ ì„¤ì •íŒŒì¼ì— ì ìš©í•œë‹¤.\n\n> `/etc/nginx/nginx.conf` íŒŒì¼ì˜ 60ë²ˆì§¸ ì¤„ ì°¸ê³ \n> \n> ![](.index_images/f4ceb33e.png)\n\në‹¤ìŒ ê³¼ì •ì„ í†µí•´ ì„œë¸Œë„ë©”ì¸ ì„¤ì •ì„ í•´ë³´ì.\n\n```shell\ncd /etc/nginx/sites-available\n\nsudo vi api_config\n```\n\n```shell\n# api_config íŒŒì¼ ë‚´ìš©\nserver {\n        listen 80;\n        listen [::]:80;\n\n        server_name api.pium.life;\n        \n        location / {\n                proxy_set_header Host $host:$server_port;\n                proxy_set_header X-Real-IP $remote_addr;\n                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n                proxy_pass http://127.0.0.1:8080;\n        }\n}\n```\n\n`server_name` ì˜µì…˜ì„ í†µí•´ api.pium.life ë¼ëŠ” ë„ë©”ì¸ìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ” ìš”ì²­ì„ í™•ì¸í•˜ê³ , ë§ë‹¤ë©´ 8080 í¬íŠ¸ë¡œ ë³€ê²½í•œë‹¤.\n\nìœ„ì™€ ê°™ì´ íŒŒì¼ì„ ì‘ì„±í–ˆìœ¼ë©´ `sites-enabled` ê²½ë¡œì— soft link(ë°”ë¡œê°€ê¸°)ë¥¼ ìƒì„±í•œë‹¤.\n\n```shell\nln -s /etc/nginx/sites-available/api_config /etc/nginx/sites-enabled/api_config\n```\n\nì´ì œ nginxë¥¼ ì¬ì‹œì‘í•˜ì—¬ ì„¤ì •ì„ ì ìš©í•´ë³´ì.\n\n> ğŸ’¡ Tip : `nginx -t` ëª…ë ¹ì–´ë¥¼ í†µí•´ í˜„ì¬ ì„¤ì •íŒŒì¼ì´ ì •ìƒì ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ìˆë‹¤.\n> \n> ![](.index_images/10d7627b.png)\n\n![](.index_images/04601361.png)\n\nhttp://api.pium.life ë¡œ ì ‘ì†í•˜ë©´ APIë¡œ ì—°ê²°ë˜ëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n## ì •ë¦¬\n\n- 8080 í¬íŠ¸ì— API ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•œë‹¤.\n- ë„ë©”ì¸ êµ¬ì… ë° A ë ˆì½”ë“œ, CNAMEì„ ì„¤ì •í•œë‹¤.\n- nginxë¥¼ ì„¤ì¹˜í•œë‹¤.\n- í”„ë¡ íŠ¸ ë¹Œë“œ ì‚°ì¶œë¬¼ì„ `/var/www/html` ê²½ë¡œì— ì¤€ë¹„í•œë‹¤. (index.html, bundle.js, assets ë“±)\n- ì„œë¸Œë„ë©”ì¸ ë° í¬íŠ¸í¬ì›Œë”© ì„¤ì •í•œë‹¤.\n\n### nginx ì„¤ì • ëª…ë ¹ì–´ ë”°ë¼ê°€ê¸°\n\n```shell\n# nginx ì„¤ì¹˜\nsudo apt install nginx\n\n# default íŒŒì¼ ìˆ˜ì •\nsudo vi /etc/nginx/sites-available/default\n```\n\n```shell\n# /etc/nginx/sites-available/default íŒŒì¼ ë‚´ìš©\nserver {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n\n        root /var/www/html;\n\n        index index.html;\n\n        server_name pium.life;\n\n        location / {\n        }\n}\n```\n\n```shell\n# api_config íŒŒì¼ ì‘ì„±\nsudo vi /etc/nginx/sites-available/api_config\n```\n\n```shell\n# api_config íŒŒì¼ ë‚´ìš©\nserver {\n        listen 80 default_server;\n        listen [::]:80 default_server;\n\n        root /var/www/html;\n\n        index index.html;\n\n        server_name pium.life;\n\n        location / {\n        }\n}\n```\n\n```shell\n# nginx ì¬ì‹œì‘ ë° ì„¤ì •ì ìš©\nsudo systemctl restart nginx\n```\n\n## Reference\n\n- https://jminie.tistory.com/110\n- https://customer.gabia.com/manual/domain/287/1201"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì£¼ë…¸'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì„œë¡  í”¼ì›€íŒ€ì—ì„œ Jenkinsë¥¼ ë„ì…í•˜ê³  ì ìš©í•˜ëŠ” ê³¼ì •ì„ ê±°ì³¤ë‹¤. ì •í™•í•œ ë™ì‘ê³¼ì •ì„ ëª°ëê¸° ë•Œë¬¸ì— í—¤ë§¤ëŠ” ìƒí™©ì´ ë¹ˆë²ˆí•˜ê²Œ ìˆì—ˆë‹¤.\nì´ì— Jenkinsë¥¼ ì„¤ì¹˜í•˜ê³  í™˜ê²½ì„¤ì •ì„ ë¹Œë“œì„œë²„ í™˜ê²½ì„ êµ¬ì¶•í•œ ì¼ë ¨ì˜ ê³¼ì •ì„ ê¸°ë¡í•´ë‘ë ¤ê³ í•œë‹¤. ì‘ì—… í™˜ê²½ : Ubuntu 22.04.2 LTS ê³µì‹ë¬¸ì„œ ì‚´í´ë³´ê¸° ì  í‚¨ìŠ¤ ê³µâ€¦","fields":{"slug":"/jenkins-setting/"},"frontmatter":{"date":"July 16, 2023","title":"ì  í‚¨ìŠ¤ ì„¤ì¹˜í•˜ê¸°","tags":["CI/CD","ì  í‚¨ìŠ¤","ì„¤ì •"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì£¼ë…¸](https://github.com/Choi-JJunho)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n \n\n## ì„œë¡ \n\ní”¼ì›€íŒ€ì—ì„œ Jenkinsë¥¼ ë„ì…í•˜ê³  ì ìš©í•˜ëŠ” ê³¼ì •ì„ ê±°ì³¤ë‹¤.\n\nì •í™•í•œ ë™ì‘ê³¼ì •ì„ ëª°ëê¸° ë•Œë¬¸ì— í—¤ë§¤ëŠ” ìƒí™©ì´ ë¹ˆë²ˆí•˜ê²Œ ìˆì—ˆë‹¤.\nì´ì— Jenkinsë¥¼ ì„¤ì¹˜í•˜ê³  í™˜ê²½ì„¤ì •ì„ ë¹Œë“œì„œë²„ í™˜ê²½ì„ êµ¬ì¶•í•œ ì¼ë ¨ì˜ ê³¼ì •ì„ ê¸°ë¡í•´ë‘ë ¤ê³ í•œë‹¤.\n\n> ì‘ì—… í™˜ê²½ : Ubuntu 22.04.2 LTS\n\n## ê³µì‹ë¬¸ì„œ ì‚´í´ë³´ê¸°\n\n[ì  í‚¨ìŠ¤ ê³µì‹ë¬¸ì„œ](https://www.jenkins.io/doc/book/installing/linux/)ë¥¼ í™•ì¸í•˜ë©´ ì„¤ì¹˜ ë°©ë²•ì´ ì¹œì ˆí•˜ê²Œ ë‚˜ì™€ìˆë‹¤.\n\nì•„ë¬´ê²ƒë„ ì—†ëŠ” EC2 í™˜ê²½ì—ì„œ Jenkinsë¥¼ ì„¤ì¹˜í•˜ê³  êµ¬ë™í•˜ëŠ” ê³¼ì •ì„ ë”°ë¼ê°€ë³´ì.\n\n## (Optional) Swap ë©”ëª¨ë¦¬ ì„¤ì •í•˜ê¸°\n\ní”„ë¦¬í‹°ì–´í™˜ê²½ì—ì„œ Jenkinsë¥¼ ì‚¬ìš©í•˜ë©´ ìì¹« ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•œ ìƒí™©ì´ ë°œìƒí•  ìˆ˜ë„ ìˆë‹¤.\n2GBì˜ ë©”ëª¨ë¦¬ëŠ” ì  í‚¨ìŠ¤ì™€ ë¹Œë“œë¥¼ ëª¨ë‘ ê²¬ë””ê¸° ì–´ë ¤ìš¸ ìˆ˜ë„ ìˆë‹¤.\n\në‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì„œë²„ì— Swap ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ì.\n\n```shell\nsudo fallocate -l 2G /swapfile\nsudo chmod 600 /swapfile\nsudo mkswap /swapfile\nsudo swapon /swapfile\n\nfree -h # í™•ì¸ëª…ë ¹ì–´\n```\n\n> [Swap ë©”ëª¨ë¦¬ í• ë‹¹í•˜ê¸°](https://velog.io/@junho5336/Swap-%EB%A9%94%EB%AA%A8%EB%A6%AC-%ED%95%A0%EB%8B%B9%ED%95%98%EA%B8%B0)ë¥¼ ì°¸ê³ \n\n## java ì„¤ì¹˜í•˜ê¸°\n\n> ì„¤ì¹˜ ë°©ë²•ì€ [ê³µì‹ë¬¸ì„œ](https://www.jenkins.io/doc/book/installing/linux/)ë¥¼ í™•ì¸í•˜ë©´ì„œ ì§„í–‰í•˜ê³ ìˆìŠµë‹ˆë‹¤.\n\ní˜„ì¬ ì‚¬ìš©í•  jenkinsì˜ ë²„ì „ì€ java 17ì„ ì‚¬ìš©í•œë‹¤.\njava 17ë²„ì „ì„ ì„¤ì¹˜í•˜ì\n\n```shell\nsudo apt update\nsudo apt install openjdk-17-jre\njava -version\n```\n\n![](.index_images/93d56503.png)\n\n## jenkins ì„¤ì¹˜í•˜ê¸°\n\në‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ì—¬ jenkinsë¥¼ ì„¤ì¹˜í•œë‹¤.\n\n```shell\ncurl -fsSL https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key | sudo tee \\\n  /usr/share/keyrings/jenkins-keyring.asc > /dev/null\necho deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] \\\n  https://pkg.jenkins.io/debian-stable binary/ | sudo tee \\\n  /etc/apt/sources.list.d/jenkins.list > /dev/null\nsudo apt-get update\nsudo apt-get install jenkins\n\nsudo systemctl status jenkins # ì‹¤í–‰ìƒíƒœ í™•ì¸\n```\n\n![](.index_images/99b45540.png)\n\n\n## jenkins ì ‘ì†í•˜ê¸° & ì´ˆê¸°ì„¤ì •\n\n> jenkinsëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 8080í¬íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤.\n> jenkinsì˜ í¬íŠ¸ë¥¼ ë³€ê²½í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œëŠ” ë³¸ ê¸€ì—ì„œ ë‹¤ë£¨ì§€ëŠ” ì•ŠëŠ”ë‹¤.\n\n`{ì¸ìŠ¤í„´ìŠ¤-public-ip}:8080` ìœ¼ë¡œ ì ‘ì†í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n![](.index_images/4492665d.png)\n\në‹¤ì‹œ EC2 í™”ë©´ìœ¼ë¡œ ë„˜ì–´ì™€ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ì—¬ `initialAdminPassword`ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.\n\n```shell\nsudo cat /var/lib/jenkins/secrets/initialAdminPassword\n```\n\n![](.index_images/f55b94c9.png)\n\ní™•ì¸í•œ ì•”í˜¸ë¥¼ í™”ë©´ì— ì…ë ¥í•œ ë’¤ Continue ë²„íŠ¼ì„ ëˆŒëŸ¬ ê³„ì† ì§„í–‰í•œë‹¤.\n\n![](.index_images/28fea7e9.png)\n\nì´ˆê¸° í”ŒëŸ¬ê·¸ì¸ ì„¸íŒ… í™”ë©´ì´ ë‚˜ì˜¤ëŠ”ë° `Install suggested plugins` ë¥¼ ëˆŒëŸ¬ ì´ˆê¸° í”ŒëŸ¬ê·¸ì¸ ì„¤ì •ì„ ì§„í–‰í•œë‹¤. \n\n![](.index_images/c78a9517.png)\n\n![](.index_images/82bae04f.png)\n\nì´ˆê¸° Admin ìœ ì €ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.\n\n![](.index_images/a8f14e43.png)\n\njenkinsì˜ ê¸°ë³¸ URLì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. ê¸°ë³¸ê°’ì„ ê¶Œì¥í•œë‹¤. \n\n![](.index_images/84efb2c8.png)\n\nì—¬ê¸°ê¹Œì§€ í–ˆìœ¼ë©´ ì´ˆê¸° ì„¤ì •ì€ ì™„ë£Œí–ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.\n\në§Œì•½ ìœ„ ê³¼ì •ì—ì„œ admin ìœ ì €ë¥¼ ìƒì„±í•˜ì§€ ì•Šì•˜ë‹¤ë©´ `admin` ì´ë¼ëŠ” ê¸°ë³¸ ìœ ì €ë¡œ ë¡œê·¸ì¸ í•  ìˆ˜ ìˆë‹¤ê³  ì„¤ëª…í•˜ê³  ìˆë‹¤.\në¹„ë°€ë²ˆí˜¸ëŠ” `initialAdminPassword` ê³¼ì •ì—ì„œ ì…ë ¥í–ˆë˜ ê°’ìœ¼ë¡œ ì„¤ì •ë˜ì–´ìˆë‹¤.\n\n![](.index_images/60ba97ad.png)\n\nì´ë ‡ê²Œ Jenkinsë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.\n\n## Reference\n\n- https://www.jenkins.io/doc/book/installing/linux/\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ê·¸ë ˆì´'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì„œë¡  JPAë¥¼ ì´ìš©í•´ ì—”í‹°í‹°ë¥¼ ì„¤ê³„í•˜ë‹¤ê°€  ì–´ë…¸í…Œì´ì…˜ê³¼ @Columnì˜ ì˜ ì°¨ì´ì ì´ ê¶ê¸ˆí•´ì ¸ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. nullable = false ?? JPAëŠ” ì—”í‹°í‹°ë¥¼ ë§¤í•‘í•˜ê³  ì„¤ê³„í•˜ë©´ ìë™ìœ¼ë¡œ DDLì„ ìƒì„±í•´ ì£¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. \në˜í•œ ì—”í‹°í‹°ì˜ ê° ì»¬ëŸ¼ë“¤ì— ëŒ€í•´ NOT NULL, UNIQUE ë“±ê³¼ â€¦","fields":{"slug":"/jpa-notnull-nullable/"},"frontmatter":{"date":"July 16, 2023","title":"@NotNullê³¼ nullable = falseëŠ” ì–´ë–¤ ì°¨ì´ê°€ ìˆì„ê¹Œ?","tags":["JPA","Validation","nullable"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ê·¸ë ˆì´](https://github.com/Kim0914)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n\n## ì„œë¡ \n\nJPAë¥¼ ì´ìš©í•´ ì—”í‹°í‹°ë¥¼ ì„¤ê³„í•˜ë‹¤ê°€ `@NotNull` ì–´ë…¸í…Œì´ì…˜ê³¼ @Columnì˜ `nullable=false`ì˜ ì°¨ì´ì ì´ ê¶ê¸ˆí•´ì ¸ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.\n\n\n## nullable = false ??\n\nJPAëŠ” ì—”í‹°í‹°ë¥¼ ë§¤í•‘í•˜ê³  ì„¤ê³„í•˜ë©´ ìë™ìœ¼ë¡œ DDLì„ ìƒì„±í•´ ì£¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. \në˜í•œ ì—”í‹°í‹°ì˜ ê° ì»¬ëŸ¼ë“¤ì— ëŒ€í•´ NOT NULL, UNIQUE ë“±ê³¼ ê°™ì€ ì œì•½ ì¡°ê±´ì´ í¬í•¨ë˜ëŠ” ê²½ìš°ì—ë„ ìë™ìœ¼ë¡œ DDLì„ ìƒì„±í•´ ì¤ë‹ˆë‹¤.\n\n\n\nì—”í‹°í‹°ë¥¼ ì„¤ê³„í•  ë•Œ ì¼ë°˜ì ìœ¼ë¡œ @Column ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©í•©ë‹ˆë‹¤. \n@Column ì–´ë…¸í…Œì´ì…˜ì—ì„œ í•´ë‹¹ ì»¬ëŸ¼ì˜ NOT NULL ì œì•½ì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ”ë° `@Column(name = \"email\", nullable = false)`ì™€ ê°™ì´ nullable=false ì„¤ì •ì„ ê±¸ì–´ì£¼ë©´, í•´ë‹¹ ì œì•½ ì¡°ê±´ì„ ëª…ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \në”°ë¡œ ëª…ì‹œí•˜ì§€ ì•Šìœ¼ë©´ nullableì˜ ê¸°ë³¸ ê°’ì€ trueì…ë‹ˆë‹¤.\n\n\n\nê°„ë‹¨í•œ User ì—”í‹°í‹°ë¥¼ ìƒì„±í•´ ë³´ê² ìŠµë‹ˆë‹¤.\n\n```java\n@Entity\n@Table(name = \"user\")\npublic class User extends AuditingEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"id\", updatable = false)\n    private Long id;\n\n    @Column(name = \"user_id\", length = 20)\n    private String userId;\n\n    @Column(name = \"password\", length = 20)\n    private String password;\n\n    @Column(name = \"name\", length = 20)\n    private String name;\n\n    @Column(name = \"email\", nullable = false, length = 50)\n    private String email;\n}\n```\n\nUser í…Œì´ë¸”ì˜ email í•„ë“œëŠ” ë°˜ë“œì‹œ ê°’ì´ ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. \nì¦‰, **NOT NULL ì œì•½ ì¡°ê±´ì´ í•„ìš”**í•©ë‹ˆë‹¤. \nì—¬ê¸°ì„œ JPAê°€ ìë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” DDLì„ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.\n\n![](./.index_images/img.png)\n\n`email varchar(50) not null` ê³¼ ê°™ì´ not null ì œì•½ ì¡°ê±´ì´ ìë™ìœ¼ë¡œ ëª…ì‹œë¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\ní•˜ì§€ë§Œ DDLì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ë¶€ê°€ ì•„ë‹Œ ë°ì´í„°ë² ì´ìŠ¤ ì»¬ëŸ¼ì˜ ì†ì„±ì— ëŒ€í•œ ì¡°ê±´ì´ë¯€ë¡œ, ìŠ¤í”„ë§(ìë°”) ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ User ì—”í‹°í‹°ì˜ email í•„ë“œëŠ” nullì´ í—ˆìš©ë©ë‹ˆë‹¤.\n\n\n\ní…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.\n\n```java\n@TestConstructor(autowireMode = TestConstructor.AutowireMode.ALL)\n@DataJpaTest\nclass UserRepositoryTest {\n\n    private final UserRepository userRepository;\n\n    public UserRepositoryTest(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @Test\n    void save() {\n        User user = new User(\"gray1234\", \"password\", \"gray\", null);\n\n        User savedUser = userRepository.save(user);\n\n        assertThat(savedUser).isEqualTo(user);\n    }\n}\n```\n\n![](./.index_images/img2.png)\n\ní…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\ní•˜ì§€ë§Œ ì—¬ê¸°ì„œ ì£¼ì˜ ê¹Šê²Œ ì‚´í´ë³¼ ì ì´ ìˆìŠµë‹ˆë‹¤. ì˜ˆì™¸ ë©”ì‹œì§€ë¥¼ ë”°ë¼ ì˜¬ë¼ê°€ ë³´ë©´ insert ì¿¼ë¦¬ê°€ í•œ ë²ˆ ë°œìƒí•œ ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ë°œìƒí•œ ì˜ˆì™¸ íƒ€ì…ì´ JdbcSQL.... Exceptionì…ë‹ˆë‹¤.\n\n\n\nì¦‰ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ë¶€ê°€ ì•„ë‹Œ, ë°ì´í„°ë² ì´ìŠ¤ ë‚´ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí–ˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n![](./.index_images/img3.png)\n\nì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œëŠ” email ì»¬ëŸ¼ì˜ nullì„ ì²´í¬í•˜ì§€ ëª»í•˜ê³ , ë°ì´í„°ë² ì´ìŠ¤ì— ì¿¼ë¦¬ê°€ ì‹¤í–‰ë  ë•Œ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ë˜í•œ insert ì¿¼ë¦¬ê°€ ë°ì´ë² ì´ìŠ¤ì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ Auto Incrementì¸ PKê°€ ì¦ê°€í•©ë‹ˆë‹¤.\n\n![](./.index_images/img4.png)\n\nì²« ë²ˆì§¸ ìœ ì €ë¥¼ ì €ì¥í•  ë•ŒëŠ” email ê°’ì„ nullë¡œ í• ë‹¹í•œ í›„ try - catchë¥¼ ì´ìš©í•´ ì˜ˆì™¸ë¥¼ ì‚¼í‚¤ê³ , ë‘ ë²ˆì§¸ ìœ ì €ëŠ” ì •ìƒì ìœ¼ë¡œ ì €ì¥í•œ í›„ PKë¥¼ ì¶œë ¥í•´ ë´¤ìŠµë‹ˆë‹¤. ì˜ˆìƒí•œ ê²ƒì²˜ëŸ¼, ë‘ ë²ˆì§¸ ìœ ì €ì˜ PKëŠ” 2 ì„ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\n**ê·¸ë ‡ë‹¤ë©´, ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ ì—”í‹°í‹°ì—ì„œëŠ” nullì„ ì–´ë–»ê²Œ ë§‰ì„ ìˆ˜ ìˆì„ê¹Œìš”?**\n\n\n## @NotNullê³¼ í•¨ê»˜ë¼ë©´?\n\n`@NotNull`ì€ java validationì— ì†í•˜ë©° `@Valid`ë¥¼ ì´ìš©í•œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë‹¨ê³„ì—ì„œ ì˜ˆì™¸ë¥¼ ì¡ì„ ìˆ˜ë„ ìˆê³ , bean validationì„ í†µí•´ ì˜ˆì™¸ë¥¼ ê²€ì¦í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\n\n\nìš°ë¦¬ê°€ DTOì™€ ê°™ì´ í´ë˜ìŠ¤ì˜ í•„ë“œë¥¼ ê²€ì¦í•˜ëŠ” ë°©ë²•ê³¼ ë™ì¼í•˜ê²Œ ì—”í‹°í‹°ì˜ í•„ë“œë„ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¹ì—°íˆ ê°™ì€ ìë°” ê°ì²´ì´ê³  ë„ë©”ì¸ì´ê¸° ë•Œë¬¸ì— ë™ì¼í•˜ê²Œ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\n@Valid ì–´ë…¸í…Œì´ì…˜ë„ ì—†ì´ ì–´ë–»ê²Œ?ë¼ê³  ìƒê°í•  ìˆ˜ ìˆëŠ”ë°ìš”, HibernateëŠ” ì—”í‹°í‹°ì— ì ìš©ëœ Bean Validation ì–´ë…¸í…Œì´ì…˜ ì—­ì‹œ DDLë¡œ ë³€í™˜í•©ë‹ˆë‹¤. \n@NotNullì€ nullable=falseì™€ ë§ˆì°¬ê°€ì§€ë¡œ DDL ìƒì—ì„œ í•´ë‹¹ ì»¬ëŸ¼ì´ NOT NULL ì œì•½ì¡°ê±´ì„ ê°€ì§ì„ ëª…ì‹œí•©ë‹ˆë‹¤.\n\n\n\nìŠ¤í”„ë§ ê³µì‹ë¬¸ì„œì¸ ë°¸ë©ì—ì„œë„ ì´ë¥¼ ëª…í™•íˆ ì–¸ê¸‰í•˜ê³  ìˆìŠµë‹ˆë‹¤. [ë°¸ë© ë°”ë¡œê°€ê¸°](https://www.baeldung.com/hibernate-notnull-vs-nullable)\n\n\n\nì´ì „ User í…Œì´ë¸”ì— nullable=falseë¥¼ ì œê±°í•œ í›„ @NotNull ì–´ë…¸í…Œì´ì…˜ë§Œ ë¶™ì—¬ì¤€ í›„ ìƒì„±ë˜ëŠ” DDLì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n```java\n@Entity\n@Table(name = \"user\")\npublic class User extends AuditingEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"id\", updatable = false)\n    private Long id;\n\n    @Column(name = \"user_id\", length = 20)\n    private String userId;\n\n    @Column(name = \"password\", length = 20)\n    private String password;\n\n    @Column(name = \"name\", length = 20)\n    private String name;\n\n    @NotNull\n    @Column(name = \"email\", length = 50)\n    private String email;\n}\n```\n\n![](./.index_images/img5.png)\n\në™ì¼í•˜ê²Œ **email varchar(50) not null** ê³¼ ê°™ì´ not null ì œì•½ ì¡°ê±´ì´ ìë™ìœ¼ë¡œ ëª…ì‹œë¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nHibernateì— ì˜í•´ DDLì´ ìë™ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ê¸°ëŠ¥ì„ ë„ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.\n\n```properties\nspring.jpa.properties.hibernate.validator.apply_to_ddl=false\n```\n\nê·¸ë ‡ë‹¤ë©´ nullable = falseì™€ ì–´ë–¤ ì°¨ì´ê°€ ìˆì„ê¹Œìš”?\n\nì°¨ì´ì ì„ ì•Œì•„ë³´ê¸° ìœ„í•´ ì´ì „ì— Userì˜ email í•„ë“œì— nullì„ ì„¸íŒ…í•œ í›„ ì €ì¥í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.\n\n![](./.index_images/img6.png)\n\në‹¤ìŒê³¼ ê°™ì´ `javax.validation.ConstraintViolationException` ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ nullable=false ë°©ì‹ ë•Œ ë°œìƒí•˜ë˜ **insert ì¿¼ë¦¬ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤**ëŠ” ì ë„ í•¨ê»˜ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\n`javax.validation.ConstraintViolationException` ì˜ˆì™¸ê°€ ë°œìƒí–ˆë‹¤ëŠ” ê²ƒì€ ìŠ¤í”„ë§(ìë°”) ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ì˜ˆì™¸ë¥¼ ì¡ì•˜ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì¿¼ë¦¬ê°€ ì‹¤í–‰ë  ì¼ì´ ì—†ìŠµë‹ˆë‹¤.\n\n\n\nì¢€ ë” ì •í™•í•˜ê²Œ ë§í•˜ë©´ ê°ì²´ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì´ ì•„ë‹Œ **ì—”í‹°í‹°ê°€ ì˜ì†í™”ë˜ëŠ” ì‹œì ì— ì˜ˆì™¸ê°€ ë°œìƒ**í•©ë‹ˆë‹¤.\n\n\n\ní™•ì‹¤í•˜ê²Œ ì•Œì•„ë³´ê¸° ìœ„í•´ ë™ì¼í•œ User1, User2 ì €ì¥ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ ë³´ë©´ 2ë²ˆì§¸ë¡œ ì €ì¥í•œ ìœ ì €ì˜ PKê°€ 1 ì„ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![](./.index_images/img7.png)\n\në˜í•œ @NotNullì„ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì˜ˆì™¸ ë©”ì‹œì§€ë¥¼ ì§ì ‘ ì‘ì„±í•  ìˆ˜ ìˆëŠ” ì¥ì ë„ ì¡´ì¬í•©ë‹ˆë‹¤.\n\n---\n\nì—¬ë‹´ìœ¼ë¡œ, @NotNull ì—†ì´ nullable=false ë§Œ ì„¤ì •í•œ ê²½ìš°ì—ë„ NULL ê²€ì¦ì„ ì§„í–‰í•˜ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.\n```properties\nspring.jpa.properties.hibernate.check_nullability=true\n```\n![](./.index_images/img8.png)\n\n\bìŠ¤í”„ë§(ìë°”) ì• í”Œë¦¬ì¼€ì´ì…˜ ë‹¨ì—ì„œ ì˜ˆì™¸ê°€ ì¡íˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì˜ˆì™¸ íƒ€ì…ì´ hibernate.PropertyValueExceptionìœ¼ë¡œ ë‹¤ë¦…ë‹ˆë‹¤.\n\n\n\nêµ³ì´ ì¶”ì²œí•˜ëŠ” ë°©ë²•ì€ ì•„ë‹Œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.\n\n\n\në˜í•œ `@NotBlank`ë‚˜ `@NotEmpty`ëŠ” ìë™ìœ¼ë¡œ DDLì„ ìƒì„±í•´ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\nê·¸ëŸ¬ë¯€ë¡œ @NotBlankë‚˜ @NotEmptyë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” `@Column(nullable=false)`ë¥¼ ë°˜ë“œì‹œ ì¶”ê°€í•´ì•¼ DDLì— NOT NULL ì œì•½ì¡°ê±´ì´ ë°˜ì˜ë©ë‹ˆë‹¤.\n\n---\n\n## ì •ë¦¬\n**@Column(nullable = false)**\nDDLì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ì§€ë§Œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì—”í‹°í‹° í•„ë“œì— nullì´ ë“¤ì–´ê°€ëŠ” ê²ƒì„ ë§‰ì§€ ëª»í•œë‹¤.\n\në˜í•œ ë°ì´í„°ë² ì´ìŠ¤ì— ì¿¼ë¦¬ê°€ ì‹¤í–‰ëœ í›„ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.\n\n\n\n**@NotNull**\nDDLì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì—”í‹°í‹° í•„ë“œì— nullì´ ë“¤ì–´ê°€ëŠ” ê²ƒì„ ë§‰ëŠ”ë‹¤.\n\nì˜ëª»ëœ ì œì•½ ì¡°ê±´ì¸ ê²½ìš° ë°ì´í„°ë² ì´ìŠ¤ì— ë¶ˆí•„ìš”í•œ ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ì§€ ì•ŠëŠ”ë‹¤.\n\nì¶”ê°€ì ìœ¼ë¡œ Bean Validation ë°©ì‹ì€ ì˜ˆì™¸ ë©”ì„¸ì§€ë¥¼ ì§ì ‘ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.\n\në˜í•œ @Sizeì™€ ê°™ì´ ë‹¤ë¥¸ validationì„ í†µí•´ ì—”í‹°í‹° í•„ë“œ ê°’ì„ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.\n\n\në‹¨ì ìœ¼ë¡œëŠ” ì½”ë“œê°€ ì§€ì €ë¶„í•´ì§€ê³ , JPAë¥¼ ì´ìš©í•œ ì—”í‹°í‹°í™” ì‹œí‚¨ ê²ƒì´ ì•„ë‹Œ ê°ì²´ë¼ë©´ @NotNull ì–´ë…¸í…Œì´ì…˜ì„ í•´ì„í•˜ì§€ ëª»í•œë‹¤.\n\n\ní•˜ì´ë²„ë„¤ì´íŠ¸ì—ì„œëŠ” nullable=falseë³´ë‹¤ @NotNull ì‚¬ìš©ì„ ì¡°ê¸ˆ ë” ê¶Œì¥í•˜ê³  ìˆë‹¤.\n\n\n## ë ˆí¼ëŸ°ìŠ¤\nhttps://www.baeldung.com/hibernate-notnull-vs-nullable\n\nhttps://kafcamus.tistory.com/15\n\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì£¼ë…¸'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì„œë¡  í”¼ì›€íŒ€ì˜ ê¸°ìˆ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê¸°ê¹Œì§€ì˜ í—˜ë‚œí•œ ê³¼ì •ì„ ì •ë¦¬í•´ë³´ë ¤ê³  í•œë‹¤. í”Œë«í¼ ì„ ì • íŒ€ ë¸”ë¡œê·¸ë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ í”Œë«í¼ë“¤ì„ ê³ ë ¤í•´ë´¤ë‹¤. í‹°ìŠ¤í† ë¦¬ í‹°ìŠ¤í† ë¦¬ëŠ” íŒ€ ë¸”ë¡œê·¸ ê¸°ëŠ¥ì„ í†µí•´ ë‹¤ì–‘í•œ ì‘ì„±ì ë° ê´€ë¦¬ìë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ UIë¥¼ ì§ì ‘ ìˆ˜ì •í•  ìˆ˜ ì—†ì„ ë¿ë”ëŸ¬ ì œê³µë˜ì–´ìˆëŠ” ìŠ¤í‚¨ë“¤ì´ ëŒ€ë¶€ë¶„ â€¦","fields":{"slug":"/blog-starter/"},"frontmatter":{"date":"July 09, 2023","title":"í”¼ì›€ ë¸”ë¡œê·¸ ìƒì„±ê³¼ì •","tags":["ë¸”ë¡œê·¸","ì„¸íŒ…"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì£¼ë…¸](https://github.com/Choi-JJunho)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n \n\n## ì„œë¡ \n\ní”¼ì›€íŒ€ì˜ ê¸°ìˆ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê¸°ê¹Œì§€ì˜ í—˜ë‚œí•œ ê³¼ì •ì„ ì •ë¦¬í•´ë³´ë ¤ê³  í•œë‹¤.\n\n## í”Œë«í¼ ì„ ì •\n\níŒ€ ë¸”ë¡œê·¸ë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ ë‹¤ì–‘í•œ í”Œë«í¼ë“¤ì„ ê³ ë ¤í•´ë´¤ë‹¤.\n\n### í‹°ìŠ¤í† ë¦¬\n\ní‹°ìŠ¤í† ë¦¬ëŠ” íŒ€ ë¸”ë¡œê·¸ ê¸°ëŠ¥ì„ í†µí•´ ë‹¤ì–‘í•œ ì‘ì„±ì ë° ê´€ë¦¬ìë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.\n\ní•˜ì§€ë§Œ UIë¥¼ ì§ì ‘ ìˆ˜ì •í•  ìˆ˜ ì—†ì„ ë¿ë”ëŸ¬ ì œê³µë˜ì–´ìˆëŠ” ìŠ¤í‚¨ë“¤ì´ ëŒ€ë¶€ë¶„ ë§ˆìŒì— ë“¤ì§€ ì•Šì•˜ë‹¤.\n\nUI ì„ ì •ê³¼ì •ì— ë„ˆë¬´ë§ì€ í˜ì„ ë“¤ì¼ ê²ƒ ê°™ì•„ì„œ í‹°ìŠ¤í† ë¦¬ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë‹¤.\n\n### Notion\n\ní˜„ì¬ íŒ€ ë¬¸ì„œ ì •ë¦¬ë¥¼ Notionìœ¼ë¡œ ê´€ë¦¬í•˜ê³ ìˆë‹¤.\n\nììœ ë¡­ê²Œ í…œí”Œë¦¿ì„ ê´€ë¦¬í•  ìˆ˜ ìˆì–´ì„œ ê°€ì¥ ë§¤ë ¥ì ìœ¼ë¡œ ë‹¤ê°€ì˜¨ íˆ´ì´ì˜€ì§€ë§Œ SEOë¥¼ ì ìš©í•˜ì§€ ëª»í•˜ê³ , ë„ë©”ì¸ì„ ë³„ë„ë¡œ ì§€ì •í•´ì•¼í•œë‹¤ëŠ” ë‹¨ì ì´ ìˆì–´ ì„ íƒí•˜ì§€ ì•Šì•˜ë‹¤.\n\n> ì¤‘ê°„ì— vercelì—ì„œ ì œê³µí•˜ëŠ” notion ë°°í¬ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ ìˆì—ˆì§€ë§Œ Organizaitonìœ¼ë¡œ ë ˆí¬ì§€í† ë¦¬ë¥¼ ê´€ë¦¬í•˜ê³  ìˆëŠ” í˜„ì¬ ìƒí™©ì—ì„œ í•´ë‹¹ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë ¤ë©´ ìœ ë£Œì˜€ê¸° ë•Œë¬¸ì— í•´ë‹¹ ë¶€ë¶„ë„ ì‚¬ìš©í•˜ì§€ ëª»í–ˆë‹¤.\n[Notion-backed Next.js Blog](https://vercel.com/templates/next.js/notion-blog)\n\n\n### Velog\n\níŒ€ ê³„ì •ì„ ìƒì„±í•´ì„œ Velogì— ê¸€ì„ ê²Œì‹œí•˜ëŠ” ë°©ë²•ì„ ìƒê°í•´ë´¤ë‹¤.\n\níŒ€ ê³„ì •ì„ ìƒì„±í•œë‹¤ëŠ” ë¶€ë¶„ì—ì„œ íŒ€ í”„ë¡œì íŠ¸ê°€ ê³„ì† ì§„í–‰ë˜ë©´ì„œ ê³„ì •ì„ ê´€ë¦¬í•˜ëŠ” ë¦¬ì†ŒìŠ¤ê°€ ì¶”ê°€ë˜ëŠ”ê²ƒì´ ìš°ë ¤ë˜ì—ˆê¸° ë•Œë¬¸ì— ì„ íƒí•˜ì§€ ì•Šì•˜ë‹¤.\n\n\n### GitBook\n\nGitBookì„ ì´ìš©í•´ì„œ íŒ€ ë¸”ë¡œê·¸ë¥¼ ìš´ì˜í•  ìˆ˜ë„ ìˆê² ì§€ë§Œ UI êµ¬ì„±ì ì¸ ì¸¡ë©´ì—ì„œ ê¸°ìˆ ë¸”ë¡œê·¸ì™€ëŠ” ê±°ë¦¬ê°€ ë©€ì—ˆê¸° ë•Œë¬¸ì— ì„ íƒí•˜ì§€ ì•Šì•˜ë‹¤.\n\n\n### GitHub Pages\n\nì •ì ì¸ í˜ì´ì§€ë¥¼ ë¬´ë£Œë¡œ í˜¸ìŠ¤íŒ…í•  ìˆ˜ ìˆê³ , ë§ˆìŒë§Œ ë¨¹ìœ¼ë©´ ììœ ë¡­ê²Œ ì»¤ìŠ¤í„°ë§ˆì´ì§• í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì´ë¼ëŠ” ë¶€ë¶„ì´ ë§¤ë ¥ìˆê²Œ ë‹¤ê°€ì™€ GitHub Pagesë¥¼ ì„ íƒí–ˆë‹¤.\n\n## GitHub Pagesë¡œ íŒ€ ë¸”ë¡œê·¸ ë§Œë“¤ê¸°\n\nì´ì œ ë³¸ê²©ì ìœ¼ë¡œ GitHub Pagesë¥¼ ì´ìš©í•˜ì—¬ íŒ€ ë¸”ë¡œê·¸ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì„ ì°¨ê·¼ì°¨ê·¼ ë”°ë¼ê°€ë³´ì.\n\ngatsbyë¥¼ ì´ìš©í•˜ì—¬ ë¸”ë¡œê·¸ ë°°í¬ë¥¼ ì§„í–‰í–ˆë‹¤. ì‚¬ìš©í•œ í…œí”Œë¦¿ì€ gatsby-starter-hoodieì´ë©° ë¸”ë¡œê·¸ì— ì¹œì ˆí•˜ê²Œ ì‚¬ìš©ë²•ì´ ê²Œì‹œë˜ì–´ìˆë‹¤.\n\n[ğŸ™ gatsby-starter-hoodie](https://github.com/devHudi/gatsby-starter-hoodie)\n[ğŸš€ gatsby-starter-hoodie ì‚¬ìš© ë°©ë²• ë³´ëŸ¬ê°€ê¸°](https://hoodie.gatsbyjs.io/about-hoodie-kr/)\n\n> í•„ìëŠ” gatsbyì— ëŒ€í•´ ì•„ë¬´ê²ƒë„ ëª¨ë¥´ëŠ” ìƒíƒœë¡œ í•´ë‹¹ ì‘ì—…ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. ğŸ˜µâ€ğŸ’«\nìµœëŒ€í•œ ì•Œê¸° ì‰½ê²Œ ì •ë¦¬í•˜ë ¤ê³  ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤ë§Œ... ì˜ëª»ëœ ë¶€ë¶„ì´ ìˆë‹¤ë©´ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.\n\n### gatsbyë€?\n\nìš°ì„  ì‚¬ìš©í•˜ê³ ìí•˜ëŠ” gatsbyê°€ ë¬´ì—‡ì¸ì§€ë¶€í„° ì•Œê³  ì§„í–‰í•´ë³´ì.\n\n[ìœ„í‚¤ë°±ê³¼](https://en.wikipedia.org/wiki/Gatsby_(JavaScript_framework))ì— ë”°ë¥´ë©´\n\n**ê°œì¸ ë¹„ëŠ” Reactì™€ GraphQLì„ ì‚¬ìš©í•˜ì—¬ Node.js ìœ„ì— êµ¬ì¶•ëœ ì˜¤í”ˆì†ŒìŠ¤ ì •ì  ì‚¬ì´íŠ¸ ìƒì„±ê¸°ì…ë‹ˆë‹¤.**\n\në¼ê³  ì„¤ëª…ë˜ì–´ìˆë‹¤.\n\n`Node.js ìœ„ì— êµ¬ì¶•ëœ` í•´ë‹¹ ë¬¸êµ¬ë¡œë¶€í„° ë¡œì»¬ í™˜ê²½ì— Node.jsê°€ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\n### node ì„¤ì¹˜í•˜ê¸°\n\n```shell\nbrew install node\n```\n\n![](.index_images/dd266184.png)\n\n`node -v` ëª…ë ¹ì–´ë¥¼ í†µí•´ ì˜ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³¸ë‹¤.\n\n### npx ì„¤ì¹˜í•˜ê¸°\n\në¦¬ì•¡íŠ¸ë¥¼ ê³µë¶€í•˜ìëŠ” ê¸€ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ê°„ë‹¨íˆë§Œ ì•Œê³  ë„˜ì–´ê°€ì\n\nnpxëŠ” npm ì‚¬ìš©ì‹œì— ë°œìƒí•˜ëŠ” ë°œìƒí•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆë‹¤ê³ í•œë‹¤.\nì§„í–‰í•˜ëŠ” ê³¼ì •ì—ì„œ npxë¥¼ ì‚¬ìš©í•  ê²ƒì´ê¸° ë•Œë¬¸ì— npxë„ ì„¤ì¹˜í•˜ê³  ë„˜ì–´ê°€ì.\n\n```shell\nnpm install npx -g\n```\n\n![](.index_images/ff1c3736.png)\n\n`npx -v` ëª…ë ¹ì–´ë¥¼ í†µí•´ ì˜ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³¸ë‹¤.\n\n### gatsby-cli ì„¤ì¹˜í•˜ê¸°\n\ngatsby ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ gatsby-clië¥¼ ì„¤ì¹˜í•œë‹¤.\n\n```shell\nnpm install -g gatsby-cli\n```\n\n![](.index_images/6494ac93.png)\n\n`gatsby -v` ëª…ë ¹ì–´ë¥¼ í†µí•´ ì˜ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³¸ë‹¤.\n\n### Gatsby ì‚¬ì´íŠ¸ ìƒì„±\n\n> ì—¬ê¸°ì„œë¶€í„°ëŠ” [Hudiì˜ Gatsby í™˜ê²½ êµ¬ì„±í•˜ê¸°](https://hoodie.gatsbyjs.io/quick-start-kr/)ë¥¼ ë”°ë¼ê°€ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤.\n\n> í™˜ê²½ì€ Piumì˜ í”„ë¡œì íŠ¸ í™˜ê²½ì— ë§ê²Œ ì§„í–‰ë©ë‹ˆë‹¤.\n\ngatsbyë¥¼ ì´ìš©í•˜ì—¬ ìƒˆë¡œìš´ ì‚¬ì´íŠ¸ë¥¼ ìƒì„±í•œë‹¤.\nì´ë•Œ `gatsby-starter-hoodie`ë¥¼ ì°¸ê³ í•˜ì—¬ êµ¬ì„±í•œë‹¤.\n\n```node\nnpx gatsby new pium-official.github.io https://github.com/devHudi/gatsby-starter-hoodie\n```\n\n### í”„ë¡œì íŠ¸ ì‹œì‘í•´ë³´ê¸°\n\n``` shell\ncd pium-official.github.io\n\nnpm run start\n```\n\n![](.index_images/19f5a8e2.png)\n\n`localhost:8000`ìœ¼ë¡œ í”„ë¡œì íŠ¸ê°€ ì—´ë¦¬ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n![](.index_images/7810b698.png)\n\n### ë¸”ë¡œê·¸ ì»¤ìŠ¤í…€í•˜ê¸°\n\ní•´ë‹¹ ë¶€ë¶„ì€ ì›ì‘ìì˜ [ğŸš€ 2.ë¹ ë¥´ê²Œ ì‹œì‘í•˜ê¸°](https://hoodie.gatsbyjs.io/quick-start-kr/)ë¥¼ ì°¸ê³ í•˜ì—¬ ì§„í–‰í•˜ë©´ ëœë‹¤.\n\n### GitHub Pagesë¡œ ë°°í¬í•˜ê¸°\n\nì´ì œ ë°°í¬í•  í˜ì´ì§€ë¥¼ ë‹¤ ë§Œë“¤ì—ˆë‹¤!\nGitHub Pagesë¥¼ ì´ìš©í•´ ë°°í¬ë¥¼ ì§„í–‰í•´ë³´ì.\n\nìš°ì„  GitHub Repositoryë¥¼ ìƒì„±í•œë‹¤.\n\n> pium-official Organizationì—ì„œ `pium-official.github.io` ë ˆí¬ì§€í† ë¦¬ë¥¼ ìƒì„±í–ˆë‹¤.\n\n![](.index_images/b084df05.png)\n\n```shell\ngit remote add origin https://github.com/pium-official/pium-official.github.io\n```\n\n```node\nnpm run deploy-gh\n```\n\nìœ„ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ë©´ íŒ€ ë ˆí¬ì§€í† ë¦¬ì— gh-pages ë¸Œëœì¹˜ê°€ ìƒì„±ë˜ê³  buildëœ ê²°ê³¼ë¬¼ì´ ì˜¬ë¼ì˜¨ë‹¤. í•´ë‹¹ íŒŒì¼ì„ ê¸°ì¤€ìœ¼ë¡œ GitHub Pagesì—ì„œ ë°°í¬ë¥¼ ì§„í–‰í•œë‹¤.\n\n![](.index_images/3db58ec3.png)\n\n> GitHub Pagesì—ì„œ ë°°í¬ ê¸°ì¤€ìœ¼ë¡œ ì¡ëŠ” ë¸Œëœì¹˜ë¥¼ í™•ì¸ & ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´ Settings - Pages ì—ì„œ ë‹¤ìŒ í•­ëª©ì„ í™•ì¸í•˜ë©´ ëœë‹¤.\n> ![](.index_images/b9a5c99c.png)\n\n![](.index_images/1877666d.png)\n\nGitHub Actions íƒ­ì—ì„œ `pages build and deployment` ì‘ì—…ì´ ì™„ë£Œëœê²ƒì„ í™•ì¸í•˜ê³  https://pium-official.github.io/ ë¡œ ì ‘ì†í•´ë³´ë©´ í˜ì´ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ë°°í¬ëœê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤!!\n\n> https:://{íŒ€ ë ˆí¬ëª…}.github.io\n\n![](.index_images/f35d015e.png)\n\n### ê¸€ ì‘ì„±í•˜ê¸°\n\ní•´ë‹¹ í…œí”Œë¦¿ì— ê¸€ì„ ì‘ì„±í•˜ëŠ” ë°©ì‹ì€ ì›ì‘ìì˜ [ğŸ¤” 3. ì‘ì„± ê°€ì´ë“œ](https://hoodie.gatsbyjs.io/writing-guide-kr/)ë¥¼ ì°¸ê³ í•˜ë©´ ëœë‹¤.\n\n### GitHub Actions workflow\n\ní˜„ì¬ê¹Œì§€ ì§„í–‰í•œ ì‘ì—…ìœ¼ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì€ íë¦„ìœ¼ë¡œ ë°°í¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë‹¤.\n\n1. ë¡œì»¬ì—ì„œ ê¸€ì„ ì‘ì„±í•œë‹¤.\n2. ê¸€ì„ ì‘ì„±í•œ ë’¤ `npm run deploy-gh` ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•´ì„œ ë°°í¬ë¥¼ ì§„í–‰í•œë‹¤.\n\nìœ„ ë°©ì‹ì€ í˜¼ìì„œ ì‘ì—…í•  ë•ŒëŠ” ë¬¸ì œê°€ ì—†ìœ¼ë‚˜ ì—¬ëŸ¬ëª…ì´ í•¨ê»˜ ê¸€ì„ ì‘ì„±í•˜ê¸°ì—ëŠ” ë§ì´ ë²ˆê±°ë¡­ë‹¤.\n\nìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë°°í¬ë¥¼ í•˜ëŠ” ë°©í–¥ì„ ê¸°ëŒ€í•˜ê³  ìˆë‹¤.\n\n1. ë¡œì»¬ì—ì„œ ê¸€ì„ ì‘ì„±í•œë‹¤.\n2. ê¸€ì„ ì‘ì„±í•œ ë’¤ main ë¸Œëœì¹˜ë¡œ pushí•œë‹¤.\n3. main ë¸Œëœì¹˜ì— ì‘ì—…ë‚´ìš©ì´ push ë˜ì—ˆì„ ë•Œ ë¹Œë“œ ë° ë°°í¬ê°€ ìë™ì ìœ¼ë¡œ ì´ë¤„ì§„ë‹¤.\n\nìœ„ì—ì„œ 3ë²ˆ ì‘ì—…ë‚´ìš©ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ GitHub Actionsì˜ workflow ê¸°ëŠ¥ì„ ì´ìš©í•  ìˆ˜ ìˆë‹¤.\n\n### workflow ì‘ì„±í•˜ê¸°\n\n`gatsby-starter-hoodie`ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ê³  ìˆëŠ” workflowëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë˜ì–´ìˆë‹¤.\n\n```yml\nname: CI\n\non:\n  pull_request:\n    branches:\n      - main\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n      - uses: actions/setup-node@v2\n        with:\n          node-version: 20.3.1\n\n      - name: Install node packages\n        run: yarn\n        \n      - name: Check lint\n        run: yarn check:lint\n        \n      - name: Check prettier\n        run: yarn check:prettier\n      \n      - name: Build\n        run: yarn build\n```\n\n> ìì„¸í•œ êµ¬ë¬¸ì— ëŒ€í•œ ì„¤ëª… ë° ë‚´ìš©ì€ [ê³µì‹ë¬¸ì„œ](https://docs.github.com/ko/actions/using-workflows/workflow-syntax-for-github-actions)ë¥¼ ì°¸ê³ í•´ë³´ë©´ ì¢‹ë‹¤.\n\nê¸°ì¡´ì— ì¡´ì¬í•˜ëŠ” ci.yml íŒŒì¼ì€ ì‚­ì œí•˜ê³  ì•„ë˜ì™€ ê°™ì€ deploy.ymlì„ ì‘ì„±í•´ë³´ì.\n\n> workflowì— ëŒ€í•œ ymlíŒŒì¼ì˜ ê²½ë¡œëŠ” ë°˜ë“œì‹œ `.github/workflows` í´ë” ë‚´ë¶€ì— ì¡´ì¬í•´ì•¼í•œë‹¤.\n> ![](.index_images/d9fc2f50.png)\n \n\n```yml\nname: Deploy\n\non: # ì–´ë–¤ ì‘ì—…ì´ ìˆ˜í–‰ë  ë•Œ deploy.yml ì‘ì—…ì´ ìˆ˜í–‰ëœë‹¤. (íŠ¸ë¦¬ê±°)\n  push: # push ì‘ì—…ì´ ìˆ˜í–‰ë  ë•Œ\n    branches: # íŠ¹ì • ë¸Œëœì¹˜ë¥¼ ëŒ€ìƒìœ¼ë¡œ\n      - main\n\npermissions: # github actionì´ ìˆ˜í–‰ë˜ëŠ” í™˜ê²½ì—ì„œ íŠ¹ì • ê¶Œí•œì„ ì¤€ë‹¤\n  contents: write\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n      - uses: actions/setup-node@v2\n        with:\n          node-version: 20.3.1\n\n      - name: Install node packages\n        run: yarn\n\n      - name: Build\n        run: yarn build\n\n      - name: Deploy ğŸš€\n        uses: JamesIves/github-pages-deploy-action@v4\n        with:\n          folder: public\n```\n\n> `JamesIves/github-pages-deploy-action@v4` ì‘ì—…ì—ì„œ ìˆ˜í–‰í•˜ëŠ” ë‚´ìš© ì¤‘ ì“°ê¸°ê¶Œí•œì„ ìš”êµ¬í•˜ëŠ” ì‘ì—…ì´ ìˆê¸° ë•Œë¬¸ì— permissions ì„¤ì •ì„ í•´ì•¼í•œë‹¤.\n[ê´€ë ¨ ì´ìŠˆ - Failed with exit code 128, Permission Denied](https://github.com/JamesIves/github-pages-deploy-action/issues/1110)\n\nìœ„ deploy.yml íŒŒì¼ì„ ì‘ì„±í–ˆë‹¤ë©´ í”„ë¡œì íŠ¸ ë‚´ë¶€ì—ì„œ ë³€ê²½ì‚¬í•­ì— ëŒ€í•œ commitì„ ìˆ˜í–‰í•˜ê³  git pushë¥¼ í•´ë³¸ë‹¤.\n\n``` shell\ngit branch -m main\n\ngit push origin main\n```\n\n![](.index_images/0491f96f.png)\n\nìœ„ ë‚´ìš©ì„ ëŒ€ëµì ìœ¼ë¡œ ì„¤ëª…í•´ë³´ìë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\nmain ë¸Œëœì¹˜ì— ëŒ€í•œ ì½”ë“œë¥¼ buildí•´ë³´ê³  ì„±ê³µí•œë‹¤ë©´ ê²°ê³¼ë¬¼ì„ gh-pages ë¸Œëœì¹˜ë¡œ ë°°í¬í•œë‹¤.\n\nì´ì œ ê¸€ì„ ì‘ì„±í•˜ê³  main ë¸Œëœì¹˜ë¡œ pushí•˜ê¸°ë§Œ í•˜ë©´ ë°°í¬ê¹Œì§€ ìë™ìœ¼ë¡œ ìˆ˜í–‰ëœë‹¤.\në¡œì»¬ì—ì„œ `npm run deploy-gh`ëŠ” ë”ì´ìƒ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ë‹¤.\n\n## ê²°ë¡ \n\në¸”ë¡œê·¸ë¥¼ ìƒì„±í•˜ê³  ë°°í¬í•˜ê³  ìë™í™”í•˜ëŠ” ê³¼ì •ê¹Œì§€ ì°¨ê·¼ì°¨ê·¼ ì§„í–‰í•´ë´¤ë‹¤.\n\nì—¬ëŸ¬ë²„ ì‚½ì§ˆì„ ê±°ì¹œ ëì— ì™„ì„±í–ˆê¸° ë•Œë¬¸ì— ë” ì• ì •ì´ ë§ì´ ê°€ëŠ” ê²ƒ ê°™ë‹¤. ğŸ‘\n\n## Reference\n\n- https://hoodie.gatsbyjs.io/\n- https://docs.github.com/ko/actions/using-workflows/workflow-syntax-for-github-actions\n- https://studium-anywhere.tistory.com/21\n"},{"excerpt":"ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ 'ì£¼ë…¸'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì„œë¡  ê¸°íšë¶€í„° ê°œë°œê¹Œì§€ í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ì´ ìƒì„±ë˜ëŠ” ëª¨ë“  í”„ë¡œì„¸ìŠ¤ë¥¼ ê²½í—˜í•  ìˆ˜ ìˆëŠ” ì‹œê°„ì„ ê°€ì¡Œë‹¤. í”¼ì›€íŒ€ì—ì„œ ì–´ë–¤ ë°©ì‹ì„ í†µí•´ ì•„ì´ë””ì–´ì™€ ê¸°ëŠ¥ì„ ë„ì¶œí•´ë‚˜ê°”ëŠ”ì§€ ê¸°ë¡í•´ë‘ê³ ì í•œë‹¤. ìŠ¤í”„ë¦°íŠ¸ë€? ìŠ¤í”„ë¦°íŠ¸ëŠ” íŒ€ì´ ì¼ì •ëŸ‰ì˜ ì‘ì—…ì„ ì™„ë£Œí•˜ëŠ” ì‹œê°„ì´ ì •í•´ì§„ ì§§ì€ ê¸°ê°„ì„ ì˜ë¯¸í•œë‹¤. ì—¬ê¸°ì„œëŠ” ê¸°íšë¶€í„° ë°ëª¨ìˆ˜ì¤€ì˜ í”„ë¡œâ€¦","fields":{"slug":"/sprint-idea/"},"frontmatter":{"date":"July 08, 2023","title":"êµ¬ê¸€ ìŠ¤í”„ë¦°íŠ¸ ê¸°ë°˜ ì•„ì´ë””ì–´ ë„ì¶œ","tags":["ì•„ì´ë””ì–´","ê¸°íš"]},"rawMarkdownBody":"\n> ì´ ê¸€ì€ ìš°í…Œì½” í”¼ì›€íŒ€ í¬ë£¨ '[ì£¼ë…¸](https://github.com/Choi-JJunho)'ê°€ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.\n\n## ì„œë¡ \n\nê¸°íšë¶€í„° ê°œë°œê¹Œì§€ í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ì´ ìƒì„±ë˜ëŠ” ëª¨ë“  í”„ë¡œì„¸ìŠ¤ë¥¼ ê²½í—˜í•  ìˆ˜ ìˆëŠ” ì‹œê°„ì„ ê°€ì¡Œë‹¤.\n\ní”¼ì›€íŒ€ì—ì„œ ì–´ë–¤ ë°©ì‹ì„ í†µí•´ ì•„ì´ë””ì–´ì™€ ê¸°ëŠ¥ì„ ë„ì¶œí•´ë‚˜ê°”ëŠ”ì§€ ê¸°ë¡í•´ë‘ê³ ì í•œë‹¤.\n\n## ìŠ¤í”„ë¦°íŠ¸ë€?\n\nìŠ¤í”„ë¦°íŠ¸ëŠ” íŒ€ì´ ì¼ì •ëŸ‰ì˜ ì‘ì—…ì„ ì™„ë£Œí•˜ëŠ” ì‹œê°„ì´ ì •í•´ì§„ ì§§ì€ ê¸°ê°„ì„ ì˜ë¯¸í•œë‹¤.\n\nì—¬ê¸°ì„œëŠ” ê¸°íšë¶€í„° ë°ëª¨ìˆ˜ì¤€ì˜ í”„ë¡œê·¸ë¨ì´ ë‚˜ì˜¤ëŠ” ë‹¨ê³„ê¹Œì§€ë¥¼ í•˜ë‚˜ì˜ ìŠ¤í”„ë¦°íŠ¸ë¼ê³  ìƒê°í•´ë³¼ ìˆ˜ ìˆê² ë‹¤.\n\ní”¼ì›€ íŒ€ì€ êµ¬ê¸€ ìŠ¤í”„ë¦°íŠ¸ì˜ ë°©ë²•ë¡ ì„ ì°¨ìš©í•´ì„œ ê¸°ëŠ¥ì„ ë„ì¶œí–ˆë‹¤.\n\n### êµ¬ê¸€ ìŠ¤í”„ë¦°íŠ¸\n\n![](.index_images/googlesprint.png)\n\n5ì¼ê°„ ê²°ê³¼ë¬¼ì„ ë„ì¶œí•˜ëŠ” ë°©ë²•ë¡ ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ 17ë‹¨ê³„ë¡œ ì´ì–´ì§„ë‹¤.\n\n1. í˜„ì¬ ìƒí™©ì— ëŒ€í•œ êµ¬ì„±ì›ë“¤ì˜ ìƒê°ê³¼ ë¬¸ì œ ìƒí™© ê³µìœ \n2. ìŠ¤í”„ë¦°íŠ¸ë¥¼ í†µí•´ í•´ê²°í•˜ê³ ì í•˜ëŠ” ëª©í‘œ ì„¤ì •\n3. ìŠ¤í”„ë¦°íŠ¸ ì§ˆë¬¸ ë„ì¶œ\n4. ì´í•´ê´€ê³„ìì˜ êµ¬ë§¤ ì—¬ì • Map ì‘ì„±\n5. ì „ë¬¸ê°€ ì¡°ì–¸\n6. HMW(ì–´ë–»ê²Œ í•˜ë©´ ~í•  ìˆ˜ ìˆì„ê¹Œ) ì‘ì„± ë° ì„ ì •\n7. ìŠ¤í”„ë¦°íŠ¸ ê¸°ê°„ì— ì£¼ë ¥í•˜ê³ ì í•˜ëŠ” 1ìˆœìœ„ íƒ€ê¹ƒê³¼ ì§ˆë¬¸ ì„ ì •\n8. ë²ˆê°¯ë¶ˆ ëŒ€í™” ë° ì†”ë£¨ì…˜ ìŠ¤ì¼€ì¹˜\n9. ê³ ê° ì„ ì •ì„ ìœ„í•œ ì„¤ë¬¸ì§€ ì‘ì„±\n10. í”„ë¡œí† íƒ€ì… ì œì‘ì„ ìœ„í•œ ìµœì¢… ì†”ë£¨ì…˜ ì„ ì •\n11. í”„ë¡œí† íƒ€ì… ì œì‘ì„ ìœ„í•œ ìŠ¤í† ë¦¬ë³´ë“œ ë§Œë“¤ê¸°\n12. í”„ë¡œí† íƒ€ì… ì œì‘\n13. í”„ë¡œí† íƒ€ì… ì™„ì„± ë° ì‹œì—°\n14. ê³ ê° ì¸í„°ë·°ìš© ì§ˆë¬¸ ë§Œë“¤ê¸° (ì¸í„°ë·° ë‹´ë‹¹ì)\n15. íƒ€ê¹ƒ ê³ ê° ì¸í„°ë·° ë° í•™ìŠµ\n16. ìŠ¤í”„ë¦°íŠ¸ ì´í›„ì˜ ê°œë°œ í”Œëœ ì ê²€ ë° í–¥í›„ ì¼ì • ë…¼ì˜\n17. ì„±ì°°\n\n### Figma - Figjam\n\nì˜¤í”„ë¼ì¸ í™˜ê²½ì—ì„œ ì¢…ì´, ìº”ë²„ìŠ¤, í¬ìŠ¤íŠ¸ì‡ì„ ì´ìš©í•´ì„œ ê°ìì˜ ì˜ê²¬ì„ ì¢…í•©í•´ë³¼ ìˆ˜ë„ ìˆì§€ë§Œ ì‹œê°„, ê³µê°„ì  ì œì•½ì´ ìˆì„ ë•ŒëŠ” Figmaë¥¼ ì‚¬ìš©í•´ë³¼ ìˆ˜ë„ ìˆë‹¤.\n\në””ìì¸ íˆ´ì¸ Figmaì—ëŠ” Figjamì´ë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.\n\n![](.index_images/figjam.png)\n\nFigjamì—ì„œëŠ” í¬ìŠ¤íŠ¸ì‡, ì—°í•„ê·¸ë¦¬ê¸°, ìŠ¤í‹°ì»¤ë¶™ì´ê¸°, íƒ€ì´ë¨¸ ë“±ì˜ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•œë‹¤.\n\n> ê°œì¸ì ìœ¼ë¡œ íƒ€ì´ë¨¸ ê¸°ëŠ¥ì„ ì ê·¹ í™œìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ìƒê°í–ˆë‹¤.\nìœ„ [êµ¬ê¸€ ìŠ¤í”„ë¦°íŠ¸](###êµ¬ê¸€-ìŠ¤í”„ë¦°íŠ¸)ì˜ `8. ë²ˆê°¯ë¶ˆ ëŒ€í™” ë° ì†”ë£¨ì…˜ ìŠ¤ì¼€ì¹˜` í•­ëª©ì—ì„œ ì¶”êµ¬í•˜ëŠ” ëª©ì ì´ ë¬´ì—‡ì¸ì§€ ìƒê°í•´ë³´ë©´ ì •í•´ì§„ ì‹œê°„ë‚´ë¡œ ì„œë¡œì˜ ì˜ê²¬ì„ ì œì‹œí•˜ì—¬ íšŒì˜ê°€ ëŠ˜ì–´ì§€ì§€ ì•Šê²Œ í•˜ê¸° ìœ„í•¨ì„ì„ ì•Œ ìˆ˜ ìˆë‹¤.\nì •í•´ì•¼í•  ë‚´ìš©ì´ ë§ì€ ë§Œí¼ ì‹œê°„ì´ ëŠ˜ì–´ì§€ëŠ” ê²ƒë§Œí¼ì€ ê°€ì¥ ê²½ê³„í•´ì•¼í•œë‹¤ê³  ìƒê°í•œë‹¤.\n\n## ì„œë¹„ìŠ¤ ì£¼ì œ\n\n![](.index_images/b95b5dfe.png)\n\n`ì‹ë¬¼ì„ ì˜ í‚¤ìš¸ ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì„œë¹„ìŠ¤`ë¼ëŠ” ì£¼ì œë¡œ íŒ€ì´ ì´ë¤„ì¡Œë‹¤.\n\nìœ„ í¬ìŠ¤í„°ë¥¼ í™•ì¸í–ˆì„ ë•Œ í° ì£¼ì œë¡œ ì¶”ìƒì ì¸ ëª©í‘œë“¤ì´ ì¦ë¹„í•´ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì£¼ì–´ì§„ ì‹œê°„ì´ ì§§ê¸° ë•Œë¬¸ì— í•µì‹¬ê¸°ëŠ¥ì„ ì¶”ë ¤ì•¼í•  í•„ìš”ê°€ ìˆë‹¤.\n\n> ğŸ’¡ ëª¨ë“  ê³¼ì •ì„ ì§„í–‰í•  ë•Œ ì´ì•¼ê¸°ë¥¼ ë“£ëŠ” ì‚¬ëŒë“¤ì€ í˜•ê´‘íœ í˜¹ì€ ìŠ¤í‹°ì»¤ ê¸°ëŠ¥ì„ ì´ìš©í•´ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•˜ëŠ” ë¶€ë¶„ì— ìƒ‰ì¹ ì„ í•˜ë©° ë“£ëŠ”ë‹¤. í˜•ê´‘íœê³¼ ìŠ¤í‹°ì»¤ë¥¼ ì´ìš©í•œ í˜¸ì‘ì„ ì´ìš©í•´ ê³µí†µ ê´€ì‹¬ì‚¬ì— ì§‘ì¤‘í•  ìˆ˜ ìˆìœ¼ë©° ì§‘ì¤‘ë ¥ì´ ë¶„ì‚°ë˜ëŠ” ê²ƒë„ ì˜ˆë°©í•  ìˆ˜ ìˆë‹¤.\n\n> â° ëª¨ë“  ê³¼ì •ì—ëŠ” ì œí•œì‹œê°„ì´ ì¡´ì¬í•œë‹¤.\nì œí•œì‹œê°„ì„ ë‘ê³  íšŒì˜ê°€ ë£¨ì¦ˆí•´ì§€ëŠ” ê²ƒì„ ë§‰ì•„ì•¼ë§Œí•œë‹¤!!\n\n### ì„œë¹„ìŠ¤ì˜ ëª©ì ê³¼ ê°€ì¹˜\n\n![](.index_images/959281a8.png)\n\nì„œë¹„ìŠ¤ì˜ ëª©ì ê³¼ ê°€ì¹˜ì— ëŒ€í•´ êµ¬ìƒí•œë‹¤.\n\nì´ ë‹¨ê³„ì—ì„œëŠ” `ì„œë¹„ìŠ¤ê°€ ì–´ë–¤ ê¸°ëŠ¥ì„ ì œê³µí•¨ìœ¼ë¡œì„œ ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤`ë¥¼ ì´ì•¼ê¸°í•˜ë©° ê°ìê°€ ì¶”ìƒì ì¸ ëª©í‘œë¥¼ ì–´ë–¤ ë°©í–¥ìœ¼ë¡œ êµ¬ì²´í™”í•˜ê³  ìˆëŠ”ì§€ ê³µìœ í•œë‹¤.\n\n> â° ì œí•œì‹œê°„ : 3ë¶„\n\n### ì„œë¹„ìŠ¤ì˜ ëŒ€ìƒ\n\n![](.index_images/db53c739.png)\n\nì–´ë–¤ ì‚¬ìš©ìê°€ ì´ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ì§€ ë– ì˜¬ë¦¬ê³  ê°ìì˜ ìƒê°ì„ ì‘ì„±í•œë‹¤.\n\nì´í›„ ê°ìê°€ ìì‹ ì˜ ìƒê°ì„ ì´ì•¼ê¸°í•˜ëŠ” ì‹œê°„ì„ ê°€ì§„ë‹¤.\n\n> â° ì œí•œì‹œê°„ : 3ë¶„\n\n\n### ì–´ë–»ê²Œ í•˜ë©´ ~ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì„ê¹Œ?\n\n![](.index_images/1c560fdf.png)\n\nì–´ë–»ê²Œ í•˜ë©´ ~ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì„ê¹Œ? ë¼ëŠ” ì§ˆë¬¸ë“¤ì„ ì‘ì„±í•˜ê³  ì´ì•¼ê¸°í•œë‹¤.\n\nì´ ê³¼ì •ì„ í†µí•´ í•´ê²°í•´ì•¼í•  ë¬¸ì œë“¤ì„ ì¸ì§€í•  ìˆ˜ ìˆë‹¤.\n\nì´ ë•Œ ê¸°ìˆ ì ì¸ ì§ˆë¬¸ì´ ë‚˜ì˜¤ì§€ ì•Šë„ë¡ ê²½ê³„í•´ì•¼í•œë‹¤.\ní•´ë‹¹ ê³¼ì •ì„ ìˆ˜í–‰í•˜ëŠ” ì´ìœ ëŠ” ì„œë¹„ìŠ¤ì˜ ëª©ì ì„ êµ¬ì²´í™”í•˜ê¸° ìœ„í•¨ì´ë‹¤.\n\n- ì–´ë–»ê²Œ í•˜ë©´ ì œ ì‹œê°„ì— ì‹ë¬¼ì— ë¬¼ì„ ì¤„ ìˆ˜ ìˆì„ê¹Œ? (O)\n- ì–´ë–»ê²Œ í•˜ë©´ ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ í•  ìˆ˜ ìˆì„ê¹Œ? (X)\n\n> â° ì œí•œì‹œê°„ : 5 ~ 8ë¶„\n\n### ì›Œë“œ í´ë¼ìš°ë“œ\n\n![](.index_images/07da0c75.png)\n\nìœ„ ë‹¨ê³„ì—ì„œ ë‚˜ì˜¨ í‚¤ì›Œë“œë“¤ì„ ê¸°ì¤€ìœ¼ë¡œ ë‹¨ì–´ë“¤ì„ ë‚˜ì—´í•œë‹¤.\nì¤‘ìš”í•˜ê²Œ ìƒê°ë˜ëŠ” ë‹¨ì–´ë“¤ì€ í¬ê³  êµµê²Œ í‘œê¸°í•œë‹¤.\n\nì´ ê³¼ì •ì„ í†µí•´ í‚¤ì›Œë“œë¥¼ ê°„ëµí•˜ê²Œ ì¶”ë¦´ ìˆ˜ ìˆë‹¤.\n\n> â° ì œí•œì‹œê°„ : X\n\n### (ì„ íƒ) ëª¨ë°”ì¼ vs ë°ìŠ¤í¬íƒ‘\n\n![](.index_images/8f5a28d2.png)\n\nìƒê°í•˜ëŠ” ì„œë¹„ìŠ¤ê°€ ì–´ë–¤ í™˜ê²½ì—ì„œ ìš´ì˜ë ì§€ ìƒê°í•´ë³¸ë‹¤.\n\nì´ ê³¼ì •ì„ í†µí•´ ì„œë¹„ìŠ¤ê°€ ì–´ë–»ê²Œ ê·¸ë ¤ì§ˆì§€ ëŒ€ëµì ìœ¼ë¡œ ìƒê°í•´ë³¼ ìˆ˜ ìˆë‹¤.\n\n> â° ì œí•œì‹œê°„ : 2ë¶„\n\n### ì¥ì¹˜/ìš”ì†Œ/ê¸°ëŠ¥ ë¸Œë ˆì¸ìŠ¤í† ë°\n\n![](.index_images/2d693ea9.png)\n\nì•ì„œ ì„¤ì •í•œ ë¬¸ì œ, í‚¤ì›Œë“œ ë“±ì„ ì°¸ê³ í•˜ì—¬ ê°œë°œí•˜ê³ ì í•˜ëŠ” ì„œë¹„ìŠ¤ì— ìˆì„ ê²ƒ ê°™ì€ ê¸°ëŠ¥ë“¤ì„ ë¸Œë ˆì¸ ìŠ¤í† ë° ì‹ìœ¼ë¡œ ì‘ì„±í•œë‹¤.\n\nì´ ê³¼ì •ì„ í†µí•´ ì„œë¹„ìŠ¤ì— ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ë“¤ì„ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.\n\n> â° ì œí•œì‹œê°„ : 5 ~ 8ë¶„\n\n### ì§€ë„ ë§Œë“¤ê¸°\n\n![](.index_images/2bb017bc.png)\n\nì•ì„œ ì •ì˜í•œ ì„œë¹„ìŠ¤ ëŒ€ìƒì„ ì°¸ê³ í•˜ì—¬ êµ¬ì²´ì ì¸ í˜ë¥´ì†Œë‚˜ë¥¼ ì§€ì •í•œë‹¤.\ní˜ë¥´ì†Œë‚˜ë¥¼ ì°¸ê³ í•˜ì—¬ ì–´ë–¤ í˜ì´ì§€ë“¤ì´ ì¡´ì¬í• ì§€ ìƒê°í•´ë³¸ë‹¤.\n\nìœ„(`ì¥ì¹˜/ìš”ì†Œ/ê¸°ëŠ¥ ë¸Œë ˆì¸ìŠ¤í† ë°`)ì—ì„œ ë„ì¶œëœ ê¸°ëŠ¥ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ ê° í˜ì´ì§€ì— ê¸°ëŠ¥ë“¤ì„ ì‘ì„±í•œë‹¤.\n\nì´ ê³¼ì •ì„ í†µí•´ ëŒ€ëµì ì¸ ì„œë¹„ìŠ¤ íë¦„ê³¼ êµ¬ì„±ì„ ìƒê°í•´ ë³¼ ìˆ˜ ìˆë‹¤.\n\n> â° ì œí•œì‹œê°„ : X\n\n### í˜ì´ì§€ ê·¸ë ¤ë³´ê¸°\n\n![](.index_images/efe27f26.png)\n\nìœ„ `ì§€ë„ ë§Œë“¤ê¸°` í™œë™ì—ì„œ ë„ì¶œëœ í˜ì´ì§€ë“¤ì„ ì§ì ‘ ê·¸ë ¤ë³´ëŠ” ì‹œê°„ì„ ê°€ì§„ë‹¤.\níŒ€ì›ë“¤ ê°ìê°€ í˜ì´ì§€ê°€ ì–´ë–»ê²Œ êµ¬ì„±ë ì§€ ëŒ€ëµì ìœ¼ë¡œ ê·¸ë ¤ë³¸ë‹¤.\n\nì˜ ê·¸ë¦´ í•„ìš”ëŠ” ì—†ë‹¤. ì—°í•„ë¡œ ì–´ë–¤ ë²„íŠ¼ì´ ì–´ë””ì— ìœ„ì¹˜í• ì§€, ì–´ë–¤ ê¸°ëŠ¥ì´ ì¡´ì¬í•˜ëŠ”ì§€ ì •ë„ë§Œ ì•Œì•„ë³¼ ìˆ˜ ìˆì„ì •ë„ë¡œ ê°€ë³ê²Œ ìŠ¤ì¼€ì¹˜í•´ë„ ì¢‹ë‹¤.\n\nì´ ê³¼ì •ì„ í†µí•´ ê°ìê°€ ìƒê°í•˜ëŠ” Viewë¥¼ ê³µìœ í•˜ë©´ì„œ ì„œë¹„ìŠ¤ì˜ êµ¬í˜„ ë°©í–¥ì„±ì— ëŒ€í•œ ì‹±í¬ë¥¼ ë§ì¶°ê°ˆ ìˆ˜ ìˆë‹¤.\n\n> â° ì œí•œì‹œê°„ : ê° í˜ì´ì§€ë³„ 5ë¶„\n\n### ê²°ì •ê¶Œì ì •í•˜ê¸° & í˜ì´ì§€ ì •í•˜ê¸°\n\n![](.index_images/9f853c4e.png)\n\nìœ„ ê³¼ì •ì—ì„œ ì‘ì„±í•œ í˜ì´ì§€ ì¤‘ í•˜ë‚˜ì˜ í˜ì´ì§€ë¥¼ ê²°ì •í•˜ê¸° ìœ„í•´ ê²°ì •ê¶Œìë¥¼ ì •í•œë‹¤.\n\nê²°ì •ê¶ŒìëŠ” íŒ€ì›ë“¤ì˜ íˆ¬í‘œë¡œ ì •í•˜ê³  í˜ì´ì§€ë¥¼ ê²°ì •í•  ë•Œ ë§Œí¼ì€ ê²°ì •ê¶Œìì˜ ê¶Œí•œì´ ê°€ì¥ ë†’ì€ ìˆ˜ì§ì ì¸ êµ¬ì¡°ë¡œ ì§„í–‰ëœë‹¤.\nì¦‰, ë‹¤ì‹œë§í•´ í˜ì´ì§€ëŠ” ê²°ì •ê¶Œìì˜ ì„ íƒìœ¼ë¡œ ì •í•´ì§„ë‹¤.\n\nê²°ì •ê¶Œìë¥¼ ë½‘ì•˜ë‹¤ë©´ ê° í˜ì´ì§€ë¥¼ ì •í•˜ëŠ” ì‹œê°„ì„ ê°€ì§„ë‹¤.\n\nì´ ë•Œ ê²°ì •ê¶Œìê°€ ì•„ë‹Œ ë‹¤ë¥¸ íŒ€ì›ë“¤ì€ ìì‹ ì˜ í˜ì´ì§€ í˜¹ì€ ìì‹ ì´ ë§ˆìŒì— ë“œëŠ” í˜ì´ì§€ì— ëŒ€í•´ ê²°ì •ê¶Œìë¥¼ ì„¤ë“í•œë‹¤.\n\ní˜ì´ì§€ë¥¼ ê²°ì • í•  ë•Œ ì—¬ëŸ¬ í˜ì´ì§€ì˜ ê¸°ëŠ¥ì„ í•©ì¹  ìˆ˜ë„ ìˆë‹¤.\n\n> â° ì œí•œì‹œê°„ : ê° í˜ì´ì§€ë³„ 5ë¶„ \n> ê²°ì •ëœ í˜ì´ì§€ë“¤ì€ ëª…ì˜ˆì˜ì „ë‹¹ğŸ‘‘ ì— ë³µì‚¬í•˜ì—¬ ì˜¬ë ¤ë‘”ë‹¤.\n> ![](.index_images/e4e8a0fb.png)\n\n\n### BDD\n\nBDD(Behavior Driven Development, í–‰ìœ„ ì£¼ë„ ê°œë°œ) ë°©ë²•ë¡ ì„ ì°¨ìš©í•œ ë°©ì‹ìœ¼ë¡œ given - when - then ì ˆë¡œ í•´ë‹¹ í˜ì´ì§€ì—ì„œ ì¼ì–´ë‚  ìˆ˜ ìˆëŠ” ëª¨ë“  ì´ë²¤íŠ¸ì— ëŒ€í•´ ì •ì˜í•œë‹¤.\n\nì´ ê³¼ì •ì„ í†µí•´ êµ¬ì²´ì ì¸ ê¸°ëŠ¥ ëª…ì„¸ë¥¼ í•  ìˆ˜ ìˆë‹¤.\n\n![](.index_images/faa7372e.png)\n\ní•´ë‹¹ ë°©ì‹ì€ UI ê¸°ë°˜ì˜ ê¸°ëŠ¥ ëª…ì„¸ì— ì¹˜ì¤‘í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— API ì„¤ê³„ê°€ ìš”êµ¬ëœë‹¤ë©´ API ëª…ì„¸ë¥¼ í•˜ëŠ”ê²ƒì„ ì¶”ì²œí•œë‹¤.\n\n> â° ì œí•œì‹œê°„ : X\n\n## ê²°ë¡ \n\nêµ¬ê¸€ ìŠ¤í”„ë¦°íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í”¼ì›€ íŒ€ì´ ì•„ì´ë””ì–´ë¥¼ êµ¬ì²´í™”í•˜ëŠ” ê³¼ì •ì„ ì •ë¦¬í•´ë´¤ë‹¤.\n\nì•„ì´ë””ì–´ ë„ì¶œ ê³¼ì •ì— ì •ë‹µì€ ì—†ì§€ë§Œ ìŠ¤í”„ë¦°íŠ¸ë¥¼ ì²˜ìŒ í•´ë³¸ ì…ì¥ì—ì„œëŠ” ì°¸ê³ í•˜ë©´ ì¢‹ì€ ë°©ë²•ì´ë¼ê³  ìƒê°ë˜ì–´ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê²¨ë´¤ë‹¤.\n\n## Reference\n\n- [êµ¬ê¸€ìŠ¤í”„ë¦°íŠ¸](https://brunch.co.kr/@brunchjwshim/90)\n- [í…Œì˜¤ì˜ ìŠ¤í”„ë¦°íŠ¸](https://velog.io/@teo/google-sprint-14)\n- [Atlassian Sprint](https://www.atlassian.com/ko/agile/scrum/sprints)\n- https://www.thesprintbook.com/the-design-sprint"}]}},"pageContext":{}},"staticQueryHashes":[],"slicesMap":{}}