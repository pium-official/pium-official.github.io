{"componentChunkName":"component---src-templates-post-jsx","path":"/server-logging/","result":{"data":{"site":{"siteMetadata":{"title":"pium.log"}},"markdownRemark":{"id":"5c865dcb-cefd-58be-8968-b5edf6c8080c","excerpt":"이 글은 우테코 피움팀 크루 '그레이'가 작성했습니다. 로깅이란 ? 우리가 처음 개발을 할 때 System.out.println(), cout << \"hello world\" << endl, print() 등으로 원하는 대로 동작하고 있는지 출력하곤 했을 것입니다. 또한 스프링 부트와 같은 프레임워크를 사용하면서 Log 객체를 이용해 로그를 남겨본 경험이 …","html":"<blockquote>\n<p>이 글은 우테코 피움팀 크루 '<a href=\"https://github.com/Kim0914\">그레이</a>'가 작성했습니다.</p>\n</blockquote>\n<h2>로깅이란 ?</h2>\n<p>우리가 처음 개발을 할 때 System.out.println(), cout &#x3C;&#x3C; \"hello world\" &#x3C;&#x3C; endl, print() 등으로 원하는 대로 동작하고 있는지 출력하곤 했을 것입니다. 또한 스프링 부트와 같은 프레임워크를 사용하면서 Log 객체를 이용해 로그를 남겨본 경험이 있을 것입니다.</p>\n<p>이런 과정을 로깅이라고 할 수 있는데, 쉽게 말해 프로그램 동작시 발생하는 모든 일을 기록하는 행위를 말합니다.</p>\n<p>로깅을 통해 시스템 내부에 문제가 발생한 경우 쉽게 파악할 수 있고, 사용자 로그의 경우 분석의 도구로 사용될 수 있습니다.</p>\n<p>하지만 인터넷에서 발생하는 모든 요청에 대해 로그를 남기면 어떻게 될까요?</p>\n<p>로그의 양이 너무나 방대해지며 원하는 로그를 찾는 비용이 점점 커질 것입니다.</p>\n<p>어떻게 로깅을 효율적으로 할 수 있을까요?</p>\n<p>개발자가 원하는 정보를 알맞은 수준의 로그로 남길 수 있다면 효율적으로 로깅을 할 수 있습니다.</p>\n<p>또한 가용하고 있는 서버의 환경에 따라 적절한 로깅 전략을 가져간다면, 개발 과정에서도 로깅을 효율적으로 사용할 수 있을 것입니다.</p>\n<h2>Logback vs Log4j2</h2>\n<p>스프링 환경의 대표적인 로깅 프레임워크는 <code class=\"language-text\">Logback</code>과 <code class=\"language-text\">Log4j2</code>가 있습니다.\n각각의 장단점이 있지만 현재 스프링 부트에서는 기본적으로 logback을 사용하기 때문에 주어진 기간 내에 빠르게 적용할 수 있고,\n현재 프로젝트의 규모에서는 logback과 log4j2 성능 차이가 크지 않을 것이라고 판단해 <code class=\"language-text\">logback</code>을 사용하기로 결정했습니다.</p>\n<h2>스프링 부트에서 로그 남기기</h2>\n<p>스프링 부트에서는 로그를 쉽게 남길 수 있도록 편의를 제공합니다.</p>\n<p>초기의 스프링은 JCK(Jakarta Commons Logging)을 사용해서 로깅을 구현했는데, 요즘에는 Log4j, Logback으로 스프링 부트의 로그 구현체를 사용합니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/ab4d8285e097286cbd4983e0c9e9a2d9/f5f2a/img_0.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACQ0lEQVR42o2T3XPSQBTF+Uu0AoFCAoRAkk02m00CVKgCtc74gY+OD9jp6JP1Y8Z//XjvDdD2wdGHM/uV/WX3nrONnjeCr14iszPEiUacZlCpgdJG2lCl6PT6cM7/Tw0GjqIlDAEVwdIshylKpMZC54W0ic4FzOvdvvcP4GBMJ9zAzldI8xLaVjDlHHm5IPBc+ra6kPnxNEb73IXT8/4iF412+gGD2S2yzQ2i1SeRXu+ljS/rfrD4iI7ewUnfo6XeHfT2gd6glezQmizRaJZf4C5/Q13/QrD5hun2DvH1T4SvfmC6uUO4/Q6nusWTbI+nZo+z/DOe2Rs0i1u0SE0RjcuvAm90JjMMsx304jVCu0ZUrKGqKySzK2q3mNLcMFnVSlcYJEtR27c48zSagwytoaFxgfZAUQ37fYzCC1g2QqfIjEFRlshtIX2WyXNat6R6TiUJxsEYwSSAP/bhelS/jgOn22WXfTJljWK+FEdZtlqQKXOKUiXSZNaxn5qCzJrBzi7kmyBS8EYBOezWLp9zbOJLcVFymGSnuEgWSZzNhOLE4nWluW/gT0L0vCHa3d59bAQYUWRMSVlLEBFUskebI1UHneeO8DqPRuZkjb5xhz6F330MzA7BZpCRax5CndXwY9AZevwhS1MJplFyOqm8FD9+QTV5Tq+k3nRfw/IkU1QihvEPzaGmXIKH1z4Bc4Icr8UbGcJwPoGcjloe8zPM8nqNr8wleAQ8mZJXh7qYw3WLe1PECFPXlb5hKMOOqQjC+FTDPwqq0yHZtkRIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img 0' title='' src='/static/ab4d8285e097286cbd4983e0c9e9a2d9/ca1dc/img_0.png' srcset='/static/ab4d8285e097286cbd4983e0c9e9a2d9/e7570/img_0.png 170w,\n/static/ab4d8285e097286cbd4983e0c9e9a2d9/f46e7/img_0.png 340w,\n/static/ab4d8285e097286cbd4983e0c9e9a2d9/ca1dc/img_0.png 680w,\n/static/ab4d8285e097286cbd4983e0c9e9a2d9/f5f2a/img_0.png 695w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/c87611b3abd7ac530dcc492338c2b41b/bbbf7/img_0-1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 27.647058823529413%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMElEQVR42k2Qy26DMBRE+Q8ewQ+MiYNDIKTYBAI0rdRF1f//mumN20ZdHM3Ii9HxjYw9YV8fn1QHC2Mb2KaD3hsUpsbeGtS2gq4qVHUHoS1EoSHLClJp6uWT6DLe4ecFflrhrgvctGC8bWh7B6kNMiZhWIZeZThpCc4lclGCCUUUIeM4RZxkRIpoWxe8bjds64x1mTBfPeFwOZ9gqgI5DZQ8hy0FtKIRxsMblwqcjAKPLsmQiN4mi6/3EcuLwbUt4I4cg2VwD6gLGlOcoSE7nScoBQ/fzZnALhdIs/yHHUNGRLPr8flxx82fMXQWrj/C903oL+0BqlSQnOwkh6IxVRQo9IFuVwWzLOc0zJ8ZXdwEN45wfsTgPQbnQ7bdGUrrcKckY4h/ScgmSXch/8z+8w1fArNkDzkxkAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img 0 1' title='' src='/static/c87611b3abd7ac530dcc492338c2b41b/ca1dc/img_0-1.png' srcset='/static/c87611b3abd7ac530dcc492338c2b41b/e7570/img_0-1.png 170w,\n/static/c87611b3abd7ac530dcc492338c2b41b/f46e7/img_0-1.png 340w,\n/static/c87611b3abd7ac530dcc492338c2b41b/ca1dc/img_0-1.png 680w,\n/static/c87611b3abd7ac530dcc492338c2b41b/02d09/img_0-1.png 1020w,\n/static/c87611b3abd7ac530dcc492338c2b41b/bbbf7/img_0-1.png 1280w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>스프링 부트는 기본적으로 Logback 설정이 되어 있습니다. 라이브러리를 살펴보면 slf4j를 사용하고 있음을 확인할 수 있습니다.</p>\n<p>Slf4j는 Simple Logging Facade for Java라는 뜻으로 다양한 로깅 프레임워크에 대한 추상화(인터페이스) 역할을 합니다.</p>\n<p>Logback은 Slf4j의 구현체이며 Log4j를 토대로 만든 프레임워크입니다.</p>\n<p>스프링 프레임워크에서도 slf4j와 Logback을 채택해서 사용하고 있습니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/3de5b5b010f986248d99a0a8957ea158/a6a70/img_1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 36.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4klEQVR42pWR224DIQxE9zta7hgIl91tmkj9/y+bTsgqaqs8NA9HlrEZj2G57hpb19hJbREhnRCkkAznBUrbl1hadBBvkYlQLNeBVBqkVPiYoJTB+zN4eXLkD8E35VCcJYxGIcWI0jYOKZBwmsJjv6COnecr4wc6854ErRTU9Txr3scpvBhDd1kTimUPGwscRS0btHac6qDNE+hmcuQPhzfBr03jOhQuq8f5k056hQvh3sS6+rGS0ubgyH/VKHifFpDDQJaB2vt06CQg5IiYBdb6+V7/+pS5Gi+oad++/Kt/+QbHuMFPsxkKWQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img 1' title='' src='/static/3de5b5b010f986248d99a0a8957ea158/ca1dc/img_1.png' srcset='/static/3de5b5b010f986248d99a0a8957ea158/e7570/img_1.png 170w,\n/static/3de5b5b010f986248d99a0a8957ea158/f46e7/img_1.png 340w,\n/static/3de5b5b010f986248d99a0a8957ea158/ca1dc/img_1.png 680w,\n/static/3de5b5b010f986248d99a0a8957ea158/a6a70/img_1.png 730w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>컨트롤러에서 LoggerFactory를 직접 생성해 로그를 남길 수도 있고</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 654px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/b5db7b58566d56006fbb8ad4c4b46024/ba4a2/img_2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 36.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvklEQVR42pWRWQ7DIAwFe46AAQOOkzRr1d7/aK8m7QGSj5FlCQ9eHq+Xwzx7cA7gQvBE6FyA8w3LLXqKl3l8dsI+E7anx74yZBhQZESVFhUpV/iQrguVE5gSiiUpVFRdoOMC0emES3+vQxciltbh5rEtHXR+IomgDAKyj7qO7gmpCSXgGBjHWPDeRuzHitwrIrORQXdGbo8pWmEU9LraDieT2BpqNmlBUUEysfcXhW3pTXhe1dFJK/5d+c+Nkb+esr/WCSulKQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img 2' title='' src='/static/b5db7b58566d56006fbb8ad4c4b46024/ba4a2/img_2.png' srcset='/static/b5db7b58566d56006fbb8ad4c4b46024/e7570/img_2.png 170w,\n/static/b5db7b58566d56006fbb8ad4c4b46024/f46e7/img_2.png 340w,\n/static/b5db7b58566d56006fbb8ad4c4b46024/ba4a2/img_2.png 654w' sizes='(max-width: 654px) 100vw, 654px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>롬복에서 제공해 주는 @Slf4j 어노테이션을 통해 log 객체를 사용할 수 있습니다.</p>\n<p>롬복으로 @Slf4j 어노테이션을 사용하면 컴파일 타임에 다음과 같은 코드를 생성해 준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span>Logger</span> log <span class=\"token operator\">=</span> <span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span>LoggerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LogExample</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>지금까지 설명한 방법으로 로그를 남기면 실행 중인 애플리케이션의 콘솔에 로그가 남게 됩니다.</p>\n<p>즉 애플리케이션을 껐다 켜게 되면 별도의 output으로 빼서 처리하지 않는 한 해당 로그들이 사라지게 됩니다.</p>\n<p>또한 원하는 레벨 별로 로그를 확인하기 제한이 있고, 별도의 파일로 저장해 로그를 관리하기에도 제한이 있습니다.</p>\n<p>이런 상황을 해결할 수 있는, logback을 활용한 효과적으로 로깅할 수 있는 방법을 알아봅시다.</p>\n<h2>Logback을 활용해 효과적으로 로깅하기</h2>\n<p>스프링 부트에서 콘솔 로그의 수준을 변경하는 방법은 <code class=\"language-text\">application.properties</code>나 <code class=\"language-text\">logback-spring.xml</code> 에서 설정하는 방법이 있습니다.</p>\n<p>application.properties로 설정하는 방법이 있지만 세세한 설정을 하는데 제한이 있습니다.</p>\n<p>그러므로 logback-spring.xml로 관리하여 세부적인 설정을 할 수 있습니다.</p>\n<p>스프링 부트는 로깅 설정 파일의 네이밍에 관한 규칙을 가지고 있습니다.</p>\n<p>스프링 부트가 로딩되는 시점에 로그 설정 파일이 프로젝트 내에 존재하는지 스캔하는데</p>\n<ol>\n<li>logback-spring.xml</li>\n<li>logback-spring.groovy</li>\n<li>logback.xml</li>\n<li>logback.grooby</li>\n</ol>\n<p>등의 파일을 스캔하고 발견하면 해당 파일에 정의된 로그 설정을 적용합니다.</p>\n<p>여기서 logback-spring.xml은 Spring Boot에 특화된 설정 파일입니다.</p>\n<p>이 파일을 사용하면 Spring Boot의 로깅 확장 기능을 활용할 수 있습니다. 예를 들면, 프로파일에 따른 로그 레벨 설정이나 Spring 환경 변수를 로깅 설정에 사용하는 것 같은 기능들을 활용할 수 있습니다.</p>\n<p>만약 다른 파일 이름으로 된 로그 설정 파일을 사용하고 싶으면 logging.config 값을 변경한 후 프로그램 실행 시 JVM 인자로 설정하면 됩니다.</p>\n<p>Logback 설정을 하기 전, 구조를 간단하게 살펴보면 Logback은 크게 3가지 <code class=\"language-text\">Logger</code>, <code class=\"language-text\">Appender</code>, <code class=\"language-text\">Layout</code>의 구성 요소를 가지고 있습니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/09e8fa1cc96338605cc06bae60ba647c/ef0cc/img_3.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 58.235294117647065%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABkUlEQVR42p1TyW7CUAx8//89PbQSPVCpFYUT5MASsrJDAoSQhJTANGP6orSqqFRLFsbPy4ztKJQSBAEajQaazSZ2ux1duF6v+Cn03VOKWiwWMAwDrVYL7XZb7OVyiaIo8B9RYRjicrlgu92KstN6vRbUdTmfz2Dz6XSK2WxW/WqbOayjDoeDJFiWhcFgIPZ+v5dkBkVRJD4m0k9hYl0pBEZmyjRNjMdjeJ4H3/fFpuZ5LmgZOJ/P5S3LMoxGIzCn1+vB9VyJdRwHaZoKCOW6rkBmAosSiW3biOO4WgTnOZlMpAkbMNa1HPiOJ7H7ksXpdJLGKkkSUPv9PobDoSSRJhM1PQqD+ZYmKUzbxFPnGQ9vj+gaXfHxTQqyG6Fqyto+Ho/fzofBpCVNwgC79xdEnVcU8W0HmaZMyKStN0abPlKoF+RYOMMvZ1khB/KPm10KWTJf6VkRHZXC49aUdUFeA9+rUykRT0rV/zljMlCr1UoMbkpvktB/+2K4nHsqh81bo7IAD5sNNptNtYz6Z/eXMOYT8oaSPcczsJEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img 3' title='' src='/static/09e8fa1cc96338605cc06bae60ba647c/ca1dc/img_3.png' srcset='/static/09e8fa1cc96338605cc06bae60ba647c/e7570/img_3.png 170w,\n/static/09e8fa1cc96338605cc06bae60ba647c/f46e7/img_3.png 340w,\n/static/09e8fa1cc96338605cc06bae60ba647c/ca1dc/img_3.png 680w,\n/static/09e8fa1cc96338605cc06bae60ba647c/ef0cc/img_3.png 962w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n<code class=\"language-text\">Logger</code>는 로깅을 수행하는 주요 객체입니다.\n로거는 이름을 가지며 주로 패키지 이름 또는 클래스 이름과 일치하게 설정합니다.\n또한 로거는 계층 구조를 가지는데 ROOT 로거는 모든 로거의 상위 로거입니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/43d35f9a20e5195647f6511eb9a7b7b6/d7258/img_4.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABmUlEQVR42pVSa2+CQBDk//+jNq3pw6Zf0BgTQb1ieSgg4JOnVZzenMU0xjbtJptlub3ZnbnVjscjaIvFAp1OB2EY4idj7W9O0wjkui6CIMB8PleAtm0jjuMzyH9M830fVVUhz3P0+30sl0uVs8F3wP1+j+l0qho2jRtnTpyyLKExybLsDFIUhcr5n1bXtYps6DiOOluv19hut8o3mw3SNFXAURSdKHe7XQwGAwyHQxiGAV3Xz4DNhGw4Ho+VHHe3N3ho3eOl/Yz20yMMeVcIgSRJoHEqjkqq1JINOKXneWoSaslC1jW6WrMQIy+AEy0x8SN8HGrJIDtNyEJ2Z2JZlrpMQGpCujzb7Xay4QpxNMdBAgrbx8gYYWAKGMJBujsiz1KJEUMjQEPZNE0Vr1GmhrG8kO4zCE/Hm3kLa9zCu/2KpEgkYI4ojk6PQlFJmyJzIsZLQJ6TQRAGEO4EYuZCTB2M5Lcjvz3Xw2q1Oq0NKRG01+sp3a6tDSOnpBxVUUkvv7xCKSPPKJHGx+A6NIvNyJekFJeL/Zcl/wRaKkLcnPtj/QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img 4' title='' src='/static/43d35f9a20e5195647f6511eb9a7b7b6/ca1dc/img_4.png' srcset='/static/43d35f9a20e5195647f6511eb9a7b7b6/e7570/img_4.png 170w,\n/static/43d35f9a20e5195647f6511eb9a7b7b6/f46e7/img_4.png 340w,\n/static/43d35f9a20e5195647f6511eb9a7b7b6/ca1dc/img_4.png 680w,\n/static/43d35f9a20e5195647f6511eb9a7b7b6/d7258/img_4.png 966w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n<code class=\"language-text\">Appender</code>는 로깅 이벤트를 특정 출력 대상으로 전송하는 구성 요소입니다.\n쉽게 말해 로그 메세지가 출력할 대상을 결정한다고 할 수 있습니다.\n콘솔에 출력할지, 파일에 출력할지 등등.</p>\n<p><strong>각 로거는 하나 이상의 Appender에 연결될 수 있습니다.</strong></p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/d6df828e4016d1e73476adb4d4199514/8aec5/img_5.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 56.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlUlEQVR42pVTa0/CQBDs//9BGo0ao8QPPBKFAAV5llL6bmmbFvpg7KwpQUNi3GRz173u7MzennI8HhFFEabTKdrtNna7HdI0RVmW+I+dTidxRdM0uK4roIfDAfv9Hoz5vn/+8VriNacpm81GNqZpotvtgoyTJIFt2z8AyXq9XsMwDOi6ju12e3bGSCIIAig8bJh5nocsy4Qx97SqqmTlN+O/WTd75hFLWS6X6PV6GA6HGI1GGAwG8s0ClwlhGAoTMlInE6xWK8xmM8znc6iqWhdzRKUwpHElbfbyUnLDkOwIcHN7i4f7O7y9vuD56RGDj3e0Wi3JZY70kElkulgspA/0S0CyIwvGa8pYuzE+7Qial0APUxRlJZKpQCFIp9MRuePxGP1+Xy6nkcwxiuNYbt33A4kFWQkjKbCr3YxzifEyBbCRzCQ2vigKkc1DsqR8GguwuGlZsOteebYF1zbhWqb0jpKt+uw8Nkye1M3O81xAOCKX88WV00DPsoNIbPw7lsljEIas4DiOMCQwq7Fv1wb7r9fyBbiYQ9oRstJbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img 5' title='' src='/static/d6df828e4016d1e73476adb4d4199514/ca1dc/img_5.png' srcset='/static/d6df828e4016d1e73476adb4d4199514/e7570/img_5.png 170w,\n/static/d6df828e4016d1e73476adb4d4199514/f46e7/img_5.png 340w,\n/static/d6df828e4016d1e73476adb4d4199514/ca1dc/img_5.png 680w,\n/static/d6df828e4016d1e73476adb4d4199514/8aec5/img_5.png 942w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n<code class=\"language-text\">Layout</code>은 로깅 이벤트가 어떻게 포맷되어 출력될지 결정하는 구성 요소입니다.\n사용자가 지정한 형식으로 로그 메세지를 변환한다는 것을 의미합니다.\n예를 들어 자바에서 문자열 포맷팅과 비슷하다고 할 수 있습니다.</p>\n<p>이제 로그를 남기는 방법을 알아보겠습니다.</p>\n<h2>logback-spring.xml 작성 &#x26; 환경 별 로그 작성</h2>\n<h3>1. <strong>logback-spring.xml 생성</strong></h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span>\n <span class=\"token comment\">&lt;!-- 추가할 기능을 작성할 곳. --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3>2. <strong>appender와 pattern을 이용해 로그 출력 위치와 출력되는 형식 지정</strong></h3>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>conversionRule</span> <span class=\"token attr-name\">conversionWord</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>clr<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">converterClass</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.boot.logging.logback.ColorConverter<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>CONSOLE_LOG_PATTERN<span class=\"token punctuation\">\"</span></span>\n              <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %clr(%5level) %cyan(%logger) - %msg%n<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>CONSOLE<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.ConsoleAppender<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoder</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pattern</span><span class=\"token punctuation\">></span></span>${CONSOLE_LOG_PATTERN}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pattern</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoder</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>appender</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>root</span> <span class=\"token attr-name\">level</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>INFO<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender-ref</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>CONSOLE<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>root</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>property를 이용해 변수처럼 선언할 수 있습니다. 마치 자바에서 상수화를 시키는 것과 같습니다.</p>\n<p>콘솔에는 색을 포함해 이쁘게 출력하기 위해 스프링 부트에서 제공하는 Logback 컨버터 ColorConverter 태그를 선언합니다.</p>\n<p>작성한 로그 패턴 \"%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %clr(%5level) %cyan(%logger) - %msg%n\"을 살펴보면</p>\n<ul>\n<li>%d{yyyy-MM-dd HH:mm:ss.SSS}: 로그 이벤트가 발생한 날짜와 시간을 yyyy-MM-dd HH:mm:ss.SSS 형식으로 표시.</li>\n<li>[%thread]: 현재 로그 이벤트를 발생시킨 스레드의 이름을 표시.</li>\n<li>%clr(%5level): clr 변환 키워드를 사용하여 로그 레벨 (INFO, ERROR 등)을 적절한 색상으로 출력.</li>\n<li>%cyan(%logger): 로거 이름 (%logger)을 시안색 (cyan)으로 출력.</li>\n<li>%msg: 로그 메시지의 내용을 표시.</li>\n<li>%n: 줄 바꿈 문자.</li>\n</ul>\n<p>appender의 이름은 CONSOLE로 지정하고 pattern은 앞서 property에서 정의한 CONSOLE<em>LOG</em>PATTERN을 사용합니다.</p>\n<p>마지막으로 로거 레벨을 INFO로 설정하고 사용할 appender를 appender-ref 태그를 이용해 명시합니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/0b4be27c29b1fb22bf0b7980a42ab43d/bbbf7/img_6.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 31.176470588235293%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4UlEQVR42p2Ra27DIBCEfYnUTWKDHcDmteAk9z/bdCCtVFWVKvXHJ2AYZhcY1Oqgl1tH6RXLajDN+t8Mxm5wu4fb9o51O2a1/HnwOqnfA1drYDaLm2k4uB7IzRb6g1ZI8xbqG02/tgKfDKXekXKBlAO5CNYUcIkJYxa8UVcxY5MKRzxJ9IUkCPS4IFCbYDIJk30xHMejhx33J5IknIPDiUXGUnvgKAVnBl2ozRw1dU+9cp3l6IRWdI/YQ3p1mGms9YGYI7tzPeQ9ZXZZcOLc8oDQ17zCtfexh/SPbFfme37xAdheqfcsKpUBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img 6' title='' src='/static/0b4be27c29b1fb22bf0b7980a42ab43d/ca1dc/img_6.png' srcset='/static/0b4be27c29b1fb22bf0b7980a42ab43d/e7570/img_6.png 170w,\n/static/0b4be27c29b1fb22bf0b7980a42ab43d/f46e7/img_6.png 340w,\n/static/0b4be27c29b1fb22bf0b7980a42ab43d/ca1dc/img_6.png 680w,\n/static/0b4be27c29b1fb22bf0b7980a42ab43d/02d09/img_6.png 1020w,\n/static/0b4be27c29b1fb22bf0b7980a42ab43d/bbbf7/img_6.png 1280w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n위와 같이 출력됨을 확인할 수 있습니다.</p>\n<h3>3. <strong>환경 별로 로그 남기는 방법 나누기</strong></h3>\n<p>현재 저희 팀은 운영 서버, 개발 서버를 나누어 가용 중에 있고 팀원들이 로컬로 개발하는 환경까지 총 3개의 환경에서 서버를 운영하고 있습니다.</p>\n<p>로컬 서버의 경우 DB로 날아가는 쿼리를 모두 확인할 필요가 있고, 필요한 경우 DEBUG 수준의 로그도 확인하는 상황이 생깁니다.</p>\n<p>개발 서버의 경우 실제 사용자를 기반으로 한 로그가 아닌, 개발 단계에서 필요한 쿼리 확인, 개발자가 의도한 예외가 발생하는지 등의 정보가 필요합니다.</p>\n<p>운영 서버의 경우 쿼리나 의도한 예외를 확인하는 로그보다는, 예상하지 못한 에러(NPE, ISE)등이 발생했을 때 에러에 대한 로그가 필요합니다.</p>\n<p>또한 개발 서버, 운영 서버는 콘솔 output이 아닌 별도의 파일에 로그를 저장해야 합니다.</p>\n<p>그러므로 각 환경마다 로그 전략을 다르게 가져가야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>conversionRule</span> <span class=\"token attr-name\">conversionWord</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>clr<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">converterClass</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.boot.logging.logback.ColorConverter<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>CONSOLE_LOG_PATTERN<span class=\"token punctuation\">\"</span></span>\n              <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %clr(%5level) %cyan(%logger) - %msg%n<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FILE_LOG_PATTERN<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %5level %logger - %msg%n<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    \n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>CONSOLE<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.ConsoleAppender<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoder</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pattern</span><span class=\"token punctuation\">></span></span>${CONSOLE_LOG_PATTERN}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pattern</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoder</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>appender</span><span class=\"token punctuation\">></span></span>\n    \n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FILE-INFO<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoder</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pattern</span><span class=\"token punctuation\">></span></span>${FILE_LOG_PATTERN}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pattern</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoder</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rollingPolicy</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fileNamePattern</span><span class=\"token punctuation\">></span></span>./log/pium-dev-%d{yyyy-MM-dd}.%i.log<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>fileNamePattern</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maxFileSize</span><span class=\"token punctuation\">></span></span>50MB<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maxFileSize</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maxHistory</span><span class=\"token punctuation\">></span></span>30<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maxHistory</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>totalSizeCap</span><span class=\"token punctuation\">></span></span>1GB<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>totalSizeCap</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rollingPolicy</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>appender</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FILE-ERROR<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>filter</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.classic.filter.LevelFilter<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>level</span><span class=\"token punctuation\">></span></span>ERROR<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>level</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>onMatch</span><span class=\"token punctuation\">></span></span>ACCEPT<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>onMatch</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>onMismatch</span><span class=\"token punctuation\">></span></span>DENY<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>onMismatch</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>filter</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoder</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pattern</span><span class=\"token punctuation\">></span></span>${FILE_LOG_PATTERN}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pattern</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoder</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rollingPolicy</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fileNamePattern</span><span class=\"token punctuation\">></span></span>./log/pium-prod-%d{yyyy-MM-dd}.%i.log<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>fileNamePattern</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maxFileSize</span><span class=\"token punctuation\">></span></span>50MB<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maxFileSize</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maxHistory</span><span class=\"token punctuation\">></span></span>30<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maxHistory</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>totalSizeCap</span><span class=\"token punctuation\">></span></span>3GB<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>totalSizeCap</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rollingPolicy</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>appender</span><span class=\"token punctuation\">></span></span>\n    \n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>root</span> <span class=\"token attr-name\">level</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>INFO<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender-ref</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>CONSOLE<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>root</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>우선 파일로 출력하기 위한 property와 appender를 추가합니다.\nProperty는 콘솔에서 지정한 방법과 동일하지만 파일에 저장하는 경우에는 색이 들어갈 필요가 없고, 색 코드가 들어가면 글자가 깨지는 현상이 발생합니다.\n그러므로 색을 제거한 패턴을 작성했습니다.</p>\n<p>Appender의 경우 File로 로그를 남기기 위해 RollingFileAppender를 사용했습니다.\n<code class=\"language-text\">INFO</code>와 <code class=\"language-text\">ERROR</code>로 appender를 구분해 레벨 수준에 따라 별도의 appender로 분리했습니다.\nRollingFileAppender는 <strong>maxFileSize</strong>와 <strong>maxHistory</strong>, <strong>totalSizeCap</strong> 설정을 통해 한 로그 파일의 최대 크기, 며칠 동안 보관할지, 모든 로그 파일(./logs/..)의 크기를 설정할 수 있습니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/ec20e9af53f0f1185e8c1bf011ce922a/bbbf7/img_7.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABg0lEQVR42p2TS47bMBBEfY/YEiXx0/xKlDVjZBAHyf0PVSnS2mUxkywKLRHkQ3WzeFmsh/YBNhRYKRC/QsoDs43Q2mGhpsV8Lm2xiMdlGBWmWSOVO+J6R65vqN9/IeQdltBxmHG9Dl/TbWzACYOaIbHAUyFtiDsdasEwTF1t41fVgTMtx1IRc0Whw+3xhKQK5zLGcfl34EiHPq0dKiFjdmx1MnSncPsfh22oIW+93cQ5ro+fp0OCxxnfbsNL18/1l8PAOhsLxYuaJg3FlhtUNanllO7q69ynZgM1veqlwazzMJR1AucTjo8fKOVAMAXJbRATEdzKb87Zssrev40OTMaOvL3BiLCr3IATnAQY66CNg+MMP56/Ubf38zBb1wmR4HyCijBejrEisMVsZSoWZ3k2vhy+gNKhLTrH84mtviPZ2iHelhO2daclHsiBuU1cq3dqh2Z3hlG7tAw20NKSrg3hEXLsPZdCZ2IyPNWqs/zna4q8MOsSx5N7Ry4kvrLIsxl/ACInPAm+pUi6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img 7' title='' src='/static/ec20e9af53f0f1185e8c1bf011ce922a/ca1dc/img_7.png' srcset='/static/ec20e9af53f0f1185e8c1bf011ce922a/e7570/img_7.png 170w,\n/static/ec20e9af53f0f1185e8c1bf011ce922a/f46e7/img_7.png 340w,\n/static/ec20e9af53f0f1185e8c1bf011ce922a/ca1dc/img_7.png 680w,\n/static/ec20e9af53f0f1185e8c1bf011ce922a/02d09/img_7.png 1020w,\n/static/ec20e9af53f0f1185e8c1bf011ce922a/bbbf7/img_7.png 1280w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>환경 별로 분리하기에 앞서, <strong>각 appender 들은 분리 하여 설정 파일로 저장해 두면 재사용을 할 수 있습니다.</strong></p>\n<p>위에서 작성한 console, file-info, file-error appender 들을 각각의 xml 파일로 분리합니다.</p>\n<p>자바에서 클래스로 분리하는 것과 동일한 맥락입니다.</p>\n<p><strong>console-appender.xml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>included</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>CONSOLE<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.ConsoleAppender<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoder</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pattern</span><span class=\"token punctuation\">></span></span>${CONSOLE_LOG_PATTERN}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pattern</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoder</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>appender</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>included</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>file-info-appender.xml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>included</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FILE-INFO<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoder</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pattern</span><span class=\"token punctuation\">></span></span>${FILE_LOG_PATTERN}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pattern</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoder</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rollingPolicy</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fileNamePattern</span><span class=\"token punctuation\">></span></span>./log/pium-dev-%d{yyyy-MM-dd}.%i.log<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>fileNamePattern</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maxFileSize</span><span class=\"token punctuation\">></span></span>50MB<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maxFileSize</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maxHistory</span><span class=\"token punctuation\">></span></span>30<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maxHistory</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>totalSizeCap</span><span class=\"token punctuation\">></span></span>1GB<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>totalSizeCap</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rollingPolicy</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>appender</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>included</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>file-error-appender.xml</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>included</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FILE-ERROR<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>filter</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.classic.filter.LevelFilter<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>level</span><span class=\"token punctuation\">></span></span>ERROR<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>level</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>onMatch</span><span class=\"token punctuation\">></span></span>ACCEPT<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>onMatch</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>onMismatch</span><span class=\"token punctuation\">></span></span>DENY<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>onMismatch</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>filter</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>encoder</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pattern</span><span class=\"token punctuation\">></span></span>${FILE_LOG_PATTERN}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pattern</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>encoder</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rollingPolicy</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fileNamePattern</span><span class=\"token punctuation\">></span></span>./log/pium-prod-%d{yyyy-MM-dd}.%i.log<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>fileNamePattern</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maxFileSize</span><span class=\"token punctuation\">></span></span>50MB<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maxFileSize</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>maxHistory</span><span class=\"token punctuation\">></span></span>30<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>maxHistory</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>totalSizeCap</span><span class=\"token punctuation\">></span></span>3GB<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>totalSizeCap</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rollingPolicy</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>appender</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>included</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>이제 환경별로 로그 전략을 분리하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">resource</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org/springframework/boot/logging/logback/defaults.xml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>conversionRule</span> <span class=\"token attr-name\">conversionWord</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>clr<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">converterClass</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.springframework.boot.logging.logback.ColorConverter<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>CONSOLE_LOG_PATTERN<span class=\"token punctuation\">\"</span></span>\n              <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %clr(%5level) %cyan(%logger) - %msg%n<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FILE_LOG_PATTERN<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %5level %logger - %msg%n<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n    <span class=\"token comment\">&lt;!--local--></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>springProfile</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>local<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">resource</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>console-appender.xml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>root</span> <span class=\"token attr-name\">level</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>INFO<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender-ref</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>CONSOLE<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>root</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>springProfile</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token comment\">&lt;!--dev--></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>springProfile</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dev<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">resource</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>file-info-appender.xml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>root</span> <span class=\"token attr-name\">level</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>INFO<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender-ref</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FILE-INFO<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>root</span><span class=\"token punctuation\">></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>logger</span> <span class=\"token attr-name\">level</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>DEBUG<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.hibernate.SQL<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender-ref</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FILE-INFO<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>logger</span><span class=\"token punctuation\">></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>logger</span> <span class=\"token attr-name\">level</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>TRACE<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.hibernate.type.descriptor.sql.BasicBinder<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender-ref</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FILE-INFO<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>logger</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>springProfile</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token comment\">&lt;!--prod--></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>springProfile</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>prod<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span> <span class=\"token attr-name\">resource</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>file-error-appender.xml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>root</span> <span class=\"token attr-name\">level</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ERROR<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>appender-ref</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FILE-ERROR<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>root</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>springProfile</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"language-text\">springProfile</code> 태그를 이용해 local, dev, prod로 분리할 수 있습니다.</p>\n<p>include 태그를 이용해 어떤 appender를 사용할지 추가합니다. 자바에서 import와 동일하다고 생각하면 됩니다.</p>\n<p>이후 각 profile 별로 로그 레벨을 설정하고 필요한 appender를 appender-ref 태그에 추가하면 됩니다.</p>\n<p>개발 서버의 경우 쿼리와 쿼리에 바인딩되는 파라미터를 확인하기 위해 DEBUG, TRACE 레벨의 appender를 추가해 줬습니다.</p>\n<p>로컬은 local로 profile을 구분해도 되고, 아무런 profile을 선언하지 않으면 default로 해당 설정을 읽기 때문에 구분하지 않아도 됩니다.</p>\n<p>만약 local로 profile을 설정한 경우에는 인텔리제이에서 아래와 같이 설정해야 콘솔 로그를 확인할 수 있습니다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/dfcce8343428a65a1ae00cf05fc48e9d/4f939/img8.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 84.11764705882354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACTklEQVR42pWUWY7UMBCGcwokJKSedBY7cRLHcZLu9ELDLA+IO/CCxOm4489f1QsMYmB4+FR2xSnX6iSWFdbRIjOkIOWZdV7CtR5x2mAYZ/TDqOu66fRbVhjkprqdl/VdViCJPNgMA3ycsTucMC8H1DRkXAPrWhogrdCpvqLBsnLKvOwxbpabFF3S0eDEmycf9MPueELDdU6PTTPAhCM5IHfh7JWtUfxCWTUXHNb8noi7hanRdAF+mJS2j2RAIzJMcCpHuK5/ZqxgmHlp9HLZy4WJHArMkVC57icMTUIWKdSNV71cfvasZlp62G6CbUeuPY1bJJ4hHz/cI87bW25M3dzkLTTr9ALx3LU99zTYBFT9Auu3XHstTGJqp8baEFEz7MZLuONFRjUihi29k/203WlaRCf/iqeCrVtezKJUrFzHCvdxgxCZwzCcUyDrgQZremKtUhrDkI1K1VVCpVgxLCFLRSeWPM4LqvkBeTjhrt0h7fYXDkj9T9b+SJ7rUs9z/Qkrt0FyzUstFRwfUW4+IY9PyITxCWl44OF7yr/xEenwhFWzO7dNx/wN7MU4jugD+3GeuY4YpwkDw87zXCnL8kUMyfIMifSQdPnChl44KdN2r9Oy3b9XObIIouvHjSb9JaS5tbF1IrRiL3OtdPHblDyfGHc1WKlC5L/4oyH5V7ys+WgU7MPsMjb/w/V1KSxfG0ppozJbIVunrLJ0/GVCXot2BftXUtF5j4xtkz98w6p/pMF1gTQr9S17LfI+ynxLqL5zeNt/xrsv3/Fm+YofTyIB/U3cVpoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img8' title='' src='/static/dfcce8343428a65a1ae00cf05fc48e9d/ca1dc/img8.png' srcset='/static/dfcce8343428a65a1ae00cf05fc48e9d/e7570/img8.png 170w,\n/static/dfcce8343428a65a1ae00cf05fc48e9d/f46e7/img8.png 340w,\n/static/dfcce8343428a65a1ae00cf05fc48e9d/ca1dc/img8.png 680w,\n/static/dfcce8343428a65a1ae00cf05fc48e9d/4f939/img8.png 721w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>dev, prod 환경에서의 로깅을 인텔리제이로 확인하고 싶은 경우에는 동일하게 profiles에 입력하고 RUN 하면 됩니다.</p>\n<h3>Reference</h3>\n<ul>\n<li><a href=\"https://www.baeldung.com/logback\">https://www.baeldung.com/logback</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=1MD5xbwznlI\">https://www.youtube.com/watch?v=1MD5xbwznlI</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=JqZzy7RyudI\">https://www.youtube.com/watch?v=JqZzy7RyudI</a> </li>\n</ul>","frontmatter":{"title":"Logback을 이용해 운영 환경 별 로그 남기기","date":"August 16, 2023","update":"August 16, 2023","tags":["Spring","Logback"],"series":null},"fields":{"slug":"/server-logging/","readingTime":{"minutes":15.48}}},"seriesList":{"edges":[{"node":{"id":"28f1d87e-d3fc-5567-8531-57649652864f","fields":{"slug":"/sprint-idea/"},"frontmatter":{"title":"구글 스프린트 기반 아이디어 도출"}}},{"node":{"id":"4a9246fb-171b-5973-88fc-864034e78afd","fields":{"slug":"/blog-starter/"},"frontmatter":{"title":"피움 블로그 생성과정"}}},{"node":{"id":"a387bf4f-567f-50e7-b6a7-99a1a1c8971b","fields":{"slug":"/jpa-notnull-nullable/"},"frontmatter":{"title":"@NotNull과 nullable = false는 어떤 차이가 있을까?"}}},{"node":{"id":"c826ce0e-1ea7-517c-8d19-84e90a59a798","fields":{"slug":"/jenkins-setting/"},"frontmatter":{"title":"젠킨스 설치하기"}}},{"node":{"id":"a78e224b-b711-5071-8e90-013d6f4bebc3","fields":{"slug":"/pium-deploy-step/"},"frontmatter":{"title":"피움의 배포과정"}}},{"node":{"id":"ce07fbab-1ed5-5f1e-8e2f-eb430879b56a","fields":{"slug":"/fe-tanstack-query/"},"frontmatter":{"title":"프론트엔드: Tanstack Query 사용에 대하여"}}},{"node":{"id":"159c943b-1a50-57dd-aa71-7557364752a5","fields":{"slug":"/ci-cd-setting/"},"frontmatter":{"title":"Jenkins와 Github Webhook을 이용해 CI/CD 구축하기"}}},{"node":{"id":"dea45a4a-bfde-5fbb-8a97-42d3a3e77a0b","fields":{"slug":"/jenkins-hook-by-label/"},"frontmatter":{"title":"PR 라벨로 젠킨스 빌드유발을 구분하기"}}},{"node":{"id":"1a03734e-d413-553f-9152-1dad2fc4acca","fields":{"slug":"/apply-https/"},"frontmatter":{"title":"내 서버에 HTTPS 설정하기"}}},{"node":{"id":"cecbc8b9-db00-562b-aa0b-06c406cfc44a","fields":{"slug":"/bundle-analyze/"},"frontmatter":{"title":"bundle-analyze를 통한 bundle 크기 분석"}}},{"node":{"id":"707f8ffb-1409-5c27-b15a-5661b235c226","fields":{"slug":"/db-drop-stop/"},"frontmatter":{"title":"Table Drop 못하게 막아버리기"}}},{"node":{"id":"fe4b591a-4dd5-5dd2-b18a-b318afd1e9e3","fields":{"slug":"/transactional-not-in-restassured/"},"frontmatter":{"title":"[트러블슈팅] @SpringbootTest의 RANDOM_PORT 환경에서 @Transactional 어노테이션을 사용했을 때, RestAssured GET 요청이 수행되지 않는 경우(트랜잭션 격리 이해하기)"}}},{"node":{"id":"80aa708e-ef8a-5c79-9644-cb8c04d55a63","fields":{"slug":"/acceptance-test-resolve/"},"frontmatter":{"title":"인수테스트 데이터 초기화하기"}}},{"node":{"id":"15def1d5-c20f-5d07-b46e-24a14661365f","fields":{"slug":"/react-setting-without-cra/"},"frontmatter":{"title":"webpack으로만 React 설정하기 (without CRA)"}}},{"node":{"id":"66383c86-e2c8-533a-90e0-2effae572742","fields":{"slug":"/stylelint-and-husky/"},"frontmatter":{"title":"stylelint와 husky를 통해 컨벤션 통일하기"}}},{"node":{"id":"ed5951d5-beda-5a8f-adb2-07c2fcb38d5e","fields":{"slug":"/OAuth2.0/"},"frontmatter":{"title":"내가 이해한 OAuth2.0"}}},{"node":{"id":"45eeb9a3-557d-5704-8fd9-925283e1e27b","fields":{"slug":"/restdocs-start/"},"frontmatter":{"title":"RestDocs로 API 문서화하기"}}},{"node":{"id":"663b560a-734d-51a9-a6dc-3c4f50716c74","fields":{"slug":"/spring-event-apply/"},"frontmatter":{"title":"Spring Event 적용하기"}}},{"node":{"id":"503e9e71-eda3-53d7-8142-7c309faf213e","fields":{"slug":"/why_we_applied_querydsl/"},"frontmatter":{"title":"피움 서비스의 Querydsl 도입 이유"}}},{"node":{"id":"55ae8038-3f65-5a59-8db3-c7405e7fc125","fields":{"slug":"/github-actions-cypress/"},"frontmatter":{"title":"피움 Cypress 자동화 구축기"}}},{"node":{"id":"5c865dcb-cefd-58be-8968-b5edf6c8080c","fields":{"slug":"/server-logging/"},"frontmatter":{"title":"Logback을 이용해 운영 환경 별 로그 남기기"}}},{"node":{"id":"709124d0-5b05-5530-804d-e90ec9856a13","fields":{"slug":"/querydsl_apply_procedure/"},"frontmatter":{"title":"피움 서비스의 Querydsl 적용 과정"}}},{"node":{"id":"8269f166-d041-533c-9d44-332d8d8c3dca","fields":{"slug":"/server-monitoring/"},"frontmatter":{"title":"CloudWatch를 이용한 모니터링 환경 구성"}}},{"node":{"id":"0faec7ad-3bd1-5f5e-9222-115f771df8ed","fields":{"slug":"/tanstack-query-cache-trouble-shooting/"},"frontmatter":{"title":"InfinityQuery에서 fetch가 제대로 이루어지지 않는다?!?!"}}},{"node":{"id":"c77f7199-7fc6-53a3-a1fb-0792e05655a7","fields":{"slug":"/OAuth2.0-backend/"},"frontmatter":{"title":"OAuth 2.0 로그인 구현하기 (카카오)"}}},{"node":{"id":"12e4480d-386b-5d0e-bd69-4209fed36066","fields":{"slug":"/OAuth-test-backend/"},"frontmatter":{"title":"외부 API 를 의존하는 OAuth 로그인 테스트하기"}}}]},"previous":{"fields":{"slug":"/github-actions-cypress/"},"frontmatter":{"title":"피움 Cypress 자동화 구축기"}},"next":{"fields":{"slug":"/querydsl_apply_procedure/"},"frontmatter":{"title":"피움 서비스의 Querydsl 적용 과정"}}},"pageContext":{"id":"5c865dcb-cefd-58be-8968-b5edf6c8080c","series":null,"previousPostId":"55ae8038-3f65-5a59-8db3-c7405e7fc125","nextPostId":"709124d0-5b05-5530-804d-e90ec9856a13"}},"staticQueryHashes":[],"slicesMap":{}}